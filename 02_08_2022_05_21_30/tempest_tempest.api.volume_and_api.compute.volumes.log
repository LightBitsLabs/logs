{2} tempest.api.volume.admin.test_backends_capabilities.BackendsCapabilitiesAdminTestsJSON.test_compare_volume_stats_values [0.090789s] ... ok
{2} tempest.api.volume.admin.test_backends_capabilities.BackendsCapabilitiesAdminTestsJSON.test_get_capabilities_backend [0.053133s] ... ok
{1} tempest.api.compute.volumes.test_volume_snapshots.VolumesSnapshotsTestJSON.test_volume_snapshot_create_get_list_delete [8.191290s] ... ok
{1} tempest.api.compute.volumes.test_volumes_get.VolumesGetTestJSON.test_volume_create_get_delete [2.863523s] ... ok
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_create_group_from_group_snapshot [12.225567s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_boot_from_multiattach_volume [22.307512s] ... ok
{1} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list [0.084489s] ... ok
{1} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_param_limit [0.084843s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_list_get_volume_attachments_multiattach [2.655171s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/api/compute/volumes/test_attach_volume.py", line 406, in test_list_get_volume_attachments_multiattach
    servers, volume, attachments = self._create_and_multiattach()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/compute/volumes/test_attach_volume.py", line 389, in _create_and_multiattach
    'ACTIVE')

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server d4fddfb8-fc65-4716-b532-b9445b09f5a3 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:23:58Z', 'message': 'Build of instance d4fddfb8-fc65-4716-b532-b9445b09f5a3 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance d4fddfb8-fc65-4716-b532-b9445b09f5a3 aborted: Failure prepping block device.\n'}.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:23:56,944 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 201 POST http://controller:5000/v3/auth/tokens 0.584s
2022-08-02 08:23:56,944 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:56 GMT', 'server': 'Apache', 'content-length': '3906', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-f1065797-b3d3-4862-a52e-fbbf63897b12', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "a9650e4b1209437384c5d33c33325099", "name": "tempest-AttachVolumeMultiAttachTest-1575405189-project", "password_expires_at": null}, "audit_ids": ["lexApKghSL6wAm5vQDA5Rg"], "expires_at": "2022-08-03T05:23:56.000000Z", "issued_at": "2022-08-02T05:23:56.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "22f18216c45145578ba70a58f09ecca5", "name": "tempest-AttachVolumeMultiAttachTest-1575405189"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "h
    ttp://[LB_IP_ADDRESS]:8774/v2/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:23:56,953 4569 INFO     [tempest.lib.common.fixed_network] (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach) Found network None available for tenant
2022-08-02 08:23:57,082 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.128s
2022-08-02 08:23:57,083 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "multiattach-server-0", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0", "networks": "none"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:56 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-f486ec6a-98c1-4293-8fb7-3380c677f4cb', 'x-compute-request-id': 'req-f486ec6a-98c1-4293-8fb7-3380c677f4cb', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "d4fddfb8-fc65-4716-b532-b9445b09f5a3", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "kqtVuwtPb9es"}}'
2022-08-02 08:23:57,616 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 201 POST http://controller:5000/v3/auth/tokens 0.522s
2022-08-02 08:23:57,617 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:57 GMT', 'server': 'Apache', 'content-length': '3906', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-9ff32dd3-de58-4065-96d6-55d6b147e111', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "a9650e4b1209437384c5d33c33325099", "name": "tempest-AttachVolumeMultiAttachTest-1575405189-project", "password_expires_at": null}, "audit_ids": ["9NU_WqLSQDqU75T85AywiA"], "expires_at": "2022-08-03T05:23:57.000000Z", "issued_at": "2022-08-02T05:23:57.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "22f18216c45145578ba70a58f09ecca5", "name": "tempest-AttachVolumeMultiAttachTest-1575405189"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": 
    "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:23:57,626 4569 INFO     [tempest.lib.common.fixed_network] (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach) Found network None available for tenant
2022-08-02 08:23:57,775 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.148s
2022-08-02 08:23:57,776 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "multiattach-server-1", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0", "networks": "none"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:57 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/4dd54861-4e70-433f-98d9-78cb951698ad', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Ve
    rsion,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-5afbb7fa-76e0-4564-aae2-cb7a97a17bb6', 'x-compute-request-id': 'req-5afbb7fa-76e0-4564-aae2-cb7a97a17bb6', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "4dd54861-4e70-433f-98d9-78cb951698ad", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/4dd54861-4e70-433f-98d9-78cb951698ad"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/4dd54861-4e70-433f-98d9-78cb951698ad"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "tJ9B7xwMihKv"}}'
2022-08-02 08:23:57,880 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3 0.100s
2022-08-02 08:23:57,881 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:57 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1768', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d6e80c0c-8be7-4ac6-ba02-496246eaa658', 'x-compute-request-id': 'req-d6e80c0c-8be7-4ac6-ba02-496246eaa658', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3'}
        Body: b'{"server": {"id": "d4fddfb8-fc65-4716-b532-b9445b09f5a3", "name": "multiattach-server-0", "status": "BUILD", "tenant_id": "22f18216c45145578ba70a58f09ecca5", "user_id": "a9650e4b1209437384c5d33c33325099", "metadata": {}, "hostId": "5ad0ec0d07b3e776b9b9eefd5fb4a5a56f9368823cda20305c9d4704", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"vcpus": 2, "ram": 1024, "disk": 1, "ephemeral": 0, "swap": 0, "original_name": "m1.nano", "extra_specs": {}}, "created": "2022-08-02T05:23:57Z", "updated": "2022-08-02T05:23:57Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "nova", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": "rack05-server76", "OS-EXT-SRV-ATTR:instance_name": "instance-00000677", "OS-EXT-SRV-ATTR:hypervisor_hostname": "rack05-server76", "OS-EXT-SRV-ATTR:reservation_id": "r-dck1cu8x", "OS-EXT-SRV-ATTR:launch_index": 0, "OS-EXT-SRV-ATTR:hostname": "multiattach-server-0", "OS-EXT-SRV-ATTR:kernel_id": "", "OS-EXT-SRV-ATTR:ramdisk_id": "", "OS-EXT-SRV-ATTR:root_device_name": null, "OS-EXT-SRV-ATTR:user_data": null, "OS-EXT-STS:task_state": "networking", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": [], "host_status": "UP", "locked": false, "description": null, "tags": []}}'
2022-08-02 08:23:58,993 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3 0.097s
2022-08-02 08:23:58,994 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'dat
    e': 'Tue, 02 Aug 2022 05:23:58 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '5023', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-486202ec-71b4-4087-bcc4-d09d14d02255', 'x-compute-request-id': 'req-486202ec-71b4-4087-bcc4-d09d14d02255', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3'}
        Body: b'{"server": {"id": "d4fddfb8-fc65-4716-b532-b9445b09f5a3", "name": "multiattach-server-0", "status": "ERROR", "tenant_id": "22f18216c45145578ba70a58f09ecca5", "user_id": "a9650e4b1209437384c5d33c33325099", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"vcpus": 2, "ram": 1024, "disk": 1, "ephemeral": 0, "swap": 0, "original_name": "m1.nano", "extra_specs": {}}, "created": "2022-08-02T05:23:57Z", "updated": "2022-08-02T05:23:58Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:23:58Z", "message": "Build of instance d4fddfb8-fc65-4716-b532-b9445b09f5a3 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/
    oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manage
2022-08-02 08:23:59,007 4569 INFO     [tempest.common.waiters] State transition "BUILD/networking" ==> "ERROR/None" after 2 second wait

{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_resize_server_with_multiattached_volume ... SKIPPED: Resize not available.
{1} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_param_offset_and_limit [0.178761s] ... ok
{1} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_detail_param_limit [0.083289s] ... ok
{1} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_detail_param_offset_and_limit [0.169155s] ... ok
{1} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_details [0.084655s] ... ok
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_delete_group_snapshots_following_updated_volumes [17.248828s] ... ok
{1} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsV319Test.test_reset_group_snapshot_status [9.466523s] ... ok
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_group_snapshot_create_show_list_delete [8.933510s] ... ok
{1} tempest.api.volume.admin.test_group_types.GroupTypesTest.test_group_type_create_list_update_show_delete [0.351447s] ... ok
{1} tempest.api.volume.admin.test_group_types.GroupTypesTest.test_group_type_list_by_optional_params [0.271043s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_snapshot_volume_backed_multiattach [25.339358s] ... ok
{0} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_invalid_size [0.168413s] ... ok
{0} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_zero [0.016109s] ... ok
{0} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_without_passing_size [0.014455s] ... ok
{0} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_delete_invalid_volume_id [0.047842s] ... ok
{0} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_delete_volume_without_passing_volume_id [0.013104s] ... ok
{0} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_get_volume_without_passing_volume_id [0.013291s] ... ok
{0} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_volume_delete_nonexistent_volume_id [0.061477s] ... ok
{0} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_volume_get_nonexistent_volume_id [0.048378s] ... ok
{1} tempest.api.volume.admin.test_groups.GroupsTest.test_group_create_show_list_delete [7.094315s] ... ok
{2} tempest.api.volume.admin.test_groups.GroupsV314Test.test_create_group_from_group [9.737561s] ... ok
{2} setUpClass (tempest.api.volume.admin.test_multi_backend.VolumeMultiBackendTest) ... SKIPPED: Cinder multi-backend feature disabled
{0} tempest.api.volume.admin.test_encrypted_volumes_extend.EncryptedVolumesExtendAttachedTest.test_extend_attached_encrypted_volume_luksv1 ... SKIPPED: Attached encrypted volume extend is disabled.
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_associate_disassociate_qos [0.428709s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_back_end_consumer [0.140114s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_both_consumer [0.130647s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_front_end_consumer [0.124993s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_get_qos [0.027558s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_list_qos [0.027905s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_set_unset_qos_key [0.168165s] ... ok
{0} tempest.api.volume.admin.test_group_type_specs.GroupTypeSpecsTest.test_group_type_specs_create_show_update_list_delete [0.541576s] ... ok
{0} setUpClass (tempest.api.volume.admin.test_snapshot_manage.SnapshotManageAdminTest) ... SKIPPED: Manage snapshot tests are disabled
{0} setUpClass (tempest.api.volume.admin.test_volume_manage.VolumeManageAdminTest) ... SKIPPED: Manage volume tests are disabled
{1} tempest.api.volume.admin.test_groups.GroupsTest.test_group_update [10.275311s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_delete_quota [0.675649s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_list_default_quotas [0.094667s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_list_quotas [0.110343s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_reset_snapshot_status [0.276229s] ... ok
{1} tempest.api.volume.admin.test_groups.GroupsV320Test.test_reset_group_status [3.095834s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_quota_usage [4.087848s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_creating [3.553610s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_quota_usage_after_volume_transfer [3.910285s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_show_quota_usage [0.117347s] ... ok
{1} tempest.api.volume.admin.test_volume_hosts.VolumeHostsAdminTestsJSON.test_list_hosts [0.181785s] ... ok
{1} tempest.api.volume.admin.test_volume_hosts.VolumeHostsAdminTestsJSON.test_show_host [0.283939s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_update_all_quota_resources_for_tenant [0.510732s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_deleting [3.553706s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_error [3.531866s] ... ok
{1} tempest.api.volume.admin.test_volume_quota_classes.VolumeQuotaClassesTest.test_show_default_quota [0.309565s] ... ok
{1} tempest.api.volume.admin.test_volume_quota_classes.VolumeQuotaClassesTest.test_update_default_quota [1.308457s] ... ok
{1} setUpClass (tempest.api.volume.admin.test_volume_retype.VolumeRetypeWithMigrationTest) ... SKIPPED: Cinder multi-backend feature disabled
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_error_deleting [3.539963s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_update_snapshot_status [0.225338s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_quota_volume_gigabytes [0.386706s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_quota_volumes [0.419537s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_volume_extend_gigabytes_quota_deviation [0.317267s] ... ok
{1} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_disable_log_reason_with_no_reason [0.016191s] ... ok
{1} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_disable_service_with_invalid_binary [0.024080s] ... ok
{1} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_enable_service_with_invalid_host [0.027643s] ... ok
{1} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_freeze_host_with_invalid_host [0.028813s] ... ok
{1} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_thaw_host_with_invalid_host [0.038954s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_invalid_body [0.019658s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_none_body [0.019158s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_nonexistent_type_id [0.057296s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_delete_nonexistent_volume_type_id [0.023192s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_get_nonexistent_extra_spec_name [0.029813s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_get_nonexistent_volume_type_id [0.024855s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_list_nonexistent_volume_type_id [0.025106s] ... ok
{2} tempest.api.volume.admin.test_user_messages.UserMessagesTest.test_delete_message [1.924882s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_multiple_extra_spec [0.018706s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_no_body [0.017392s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_none_extra_spec_id [0.056195s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_nonexistent_extra_spec_id [0.055740s] ... ok
{1} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_nonexistent_type_id [0.054317s] ... ok
{2} tempest.api.volume.admin.test_user_messages.UserMessagesTest.test_list_show_messages [1.574979s] ... ok
{0} tempest.api.volume.admin.test_volume_retype.VolumeRetypeWithoutMigrationTest.test_available_volume_retype [4.294642s] ... ok
{1} tempest.api.volume.test_availability_zone.AvailabilityZoneTestJSON.test_get_availability_zone_list [0.171816s] ... ok
{1} tempest.api.volume.test_extensions.ExtensionsTestJSON.test_list_extensions [0.218125s] ... ok
{2} tempest.api.volume.admin.test_volume_pools.VolumePoolsAdminTestsJSON.test_get_pools_without_details [0.185570s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_host_name [0.029758s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_service_and_host_name [0.032554s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_service_binary_name [0.029244s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_volume_host_name [2.789732s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_list_services [0.026718s] ... ok
{2} tempest.api.volume.admin.test_volume_type_access.VolumeTypesAccessTest.test_volume_type_access_list [0.293943s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_spec_create_get_delete [0.196377s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_specs_list [0.110833s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_specs_update [0.287940s] ... ok
{0} tempest.api.volume.admin.test_volume_snapshot_quotas_negative.VolumeSnapshotQuotasNegativeTestJSON.test_quota_volume_gigabytes_snapshots [0.519984s] ... ok
{0} tempest.api.volume.admin.test_volume_snapshot_quotas_negative.VolumeSnapshotQuotasNegativeTestJSON.test_quota_volume_snapshots [0.094695s] ... ok
{1} tempest.api.volume.test_volumes_clone.VolumesCloneTest.test_create_from_bootable_volume [19.070390s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_force_detach_volume [3.956064s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/admin/test_volumes_actions.py", line 83, in test_force_detach_volume
    server_id = self.create_server()['id']

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 8d4d2fab-94d9-4b03-a543-1df7766006eb failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:25:41Z', 'message': 'Build of instance 8d4d2fab-94d9-4b03-a543-1df7766006eb aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 8d4d2fab-94d9-4b03-a543-1df7766006eb aborted: Failure prepping block device.\n'}. Server boot request ID: req-fcb93420-a21d-4b27-b3ae-7be125cd894c.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:25:40,506 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 201 POST http://controller:5000/v3/auth/tokens 0.579s
2022-08-02 08:25:40,507 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:39 GMT', 'server': 'Apache', 'content-length': '3886', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4ef8ed13-b86a-411d-8436-38d922266893', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "9efd60971f724d47ac080d43f807f748", "name": "tempest-VolumesActionsTest-363283673-project", "password_expires_at": null}, "audit_ids": ["VGGFNFcyR0mjTp4u_B3PnA"], "expires_at": "2022-08-03T05:25:40.000000Z", "issued_at": "2022-08-02T05:25:40.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "330e714bae944765ad2898bda453dd4e", "name": "tempest-VolumesActionsTest-363283673"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/330e714bae944765ad2898bda453dd4e", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/330e714bae944765ad2898bda453dd4e", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/330e714bae944765ad2898bda453dd4e", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/330e714bae944765ad28
    98bda453dd4e", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:25:40,516 4571 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_force_detach_volume) Found network None available for tenant
2022-08-02 08:25:40,896 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.378s
2022-08-02 08:25:40,896 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-1778784363", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-fcb93420-a21d-4b27-b3ae-7be125cd894c', 'x-compute-request-id': 'req-fcb93420-a21d-4b27-b3ae-7be125cd894c', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "8d4d2fab-94d9-4b03-a543-1df7766006eb", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "AHfHD8QR6cR3"}}'
2022-08-02 08:25:40,979 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.078s
2022-08-02 08:25:40,980 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-0de57793-dee7-411b-a40d-4cdff2cc2565', 'x-compute-request-id': 'req-0de57793-dee7-411b-a40d-4cdff2cc2565', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb'}
        Body: b'{"server": {"id": "8d4d2fab-94d9-4b03-a543-1df7766006eb", "name": "tempest-VolumesActionsTest-instance-1778784363", "status": "BUILD", "tenant_id": "330e714bae944765ad2898bda453dd4e", "user_id": "9efd60971f724d47ac080d43f807f748", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:25:40Z", "updated": "2022-08-02T05:25:40Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}, {"rel": "bookmark", "href": "http://192.
    168.16.202:8774/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:25:42,112 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.119s
2022-08-02 08:25:42,113 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1425', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-0de6170d-7c2d-465c-a55c-e7f93f5dc494', 'x-compute-request-id': 'req-0de6170d-7c2d-465c-a55c-e7f93f5dc494', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb'}
        Body: b'{"server": {"id": "8d4d2fab-94d9-4b03-a543-1df7766006eb", "name": "tempest-VolumesActionsTest-instance-1778784363", "status": "BUILD", "tenant_id": "330e714bae944765ad2898bda453dd4e", "user_id": "9efd60971f724d47ac080d43f807f748", "metadata": {}, "hostId": "f2c1228ef0aeb80b680d14e93bb62138019956db609cd872af64174d", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:25:40Z", "updated": "2022-08-02T05:25:41Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "nova", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": "rack05-server76", "OS-EXT-SRV-ATTR:instance_name": "instance-0000067a", "OS-EXT-SRV-ATTR:hypervisor_hostname": "rack05-server76", "OS-EXT-STS:task_state": "networking", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:25:42,124 4571 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "BUILD/networking" after 2 second wait
2022-08-02 08:25:43,225 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.099s
2022-08-02 08:25:43,225 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4676', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d83009ad-1682-450c-ba90-79dc84aa231d', 'x-compute-request-id': 'req-d83009ad-1682-450c-ba90-79dc84aa231d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df
    7766006eb'}
        Body: b'{"server": {"id": "8d4d2fab-94d9-4b03-a543-1df7766006eb", "name": "tempest-VolumesActionsTest-instance-1778784363", "status": "ERROR", "tenant_id": "330e714bae944765ad2898bda453dd4e", "user_id": "9efd60971f724d47ac080d43f807f748", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:25:40Z", "updated": "2022-08-02T05:25:42Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:25:41Z", "message": "Build of instance 8d4d2fab-94d9-4b03-a543-1df7766006eb aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/
    site-packages/nova/compute
2022-08-02 08:25:43,238 4571 INFO     [tempest.common.waiters] State transition "BUILD/networking" ==> "ERROR/None" after 3 second wait
2022-08-02 08:25:43,832 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.594s
2022-08-02 08:25:43,833 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-c4c12666-c290-45db-9ba7-2113d9692a8a', 'x-compute-request-id': 'req-c4c12666-c290-45db-9ba7-2113d9692a8a', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb'}
        Body: b''
2022-08-02 08:25:43,868 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.034s
2022-08-02 08:25:43,869 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-92588ac7-923f-40ae-b93d-fe5b03dd05df', 'x-compute-request-id': 'req-92588ac7-923f-40ae-b93d-fe5b03dd05df', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 8d4d2fab-94d9-4b03-a543-1df7766006eb could not be found."}}'

{0} tempest.api.volume.admin.test_volume_types.VolumeTypesTest.test_volume_type_create_get_delete [0.138963s] ... ok
{0} tempest.api.volume.admin.test_volume_types.VolumeTypesTest.test_volume_type_encryption_create_get_update_delete [0.449643s] ... ok
{0} tempest.api.volume.admin.test_volume_types.VolumeTypesTest.test_volume_type_list [0.051927s] ... ok
{0} tempest.api.volume.admin.test_volume_types.VolumeTypesTest.test_volume_type_update [0.274256s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_force_delete_when_volume_is_attaching [4.024004s] ... ok
{1} tempest.api.volume.test_volumes_clone.VolumesCloneTest.test_create_from_volume [4.958723s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_force_delete_when_volume_is_creating [3.711484s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_volume_type_encryption_nonexistent_type_id [0.195319s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_with_empty_name [0.016592s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_with_repeated_name [0.070862s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_delete_nonexistent_type_id [0.026267s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_get_nonexistent_type_id [0.022756s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_force_delete_when_volume_is_error [3.685594s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_force_delete_when_volume_is_maintenance [3.742559s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_reset_status [2.954057s] ... ok
{1} tempest.api.volume.test_volumes_extend.VolumesExtendTest.test_volume_extend [14.751784s] ... ok
{0} tempest.api.volume.test_image_metadata.VolumesImageMetadata.test_update_show_delete_image_metadata [0.249780s] ... ok
{1} tempest.api.volume.test_volumes_extend.VolumesExtendTest.test_volume_extend_when_volume_has_snapshot [6.069144s] ... ok
{2} tempest.api.volume.admin.test_volumes_list.VolumesListAdminTestJSON.test_volume_list_param_tenant [2.897074s] ... ok
{0} tempest.api.volume.test_volume_absolute_limits.AbsoluteLimitsTests.test_get_volume_absolute_limits [0.124864s] ... ok
{2} tempest.api.volume.test_snapshot_metadata.SnapshotMetadataTestJSON.test_crud_snapshot_metadata [0.311151s] ... ok
{2} tempest.api.volume.test_snapshot_metadata.SnapshotMetadataTestJSON.test_update_show_snapshot_metadata_item [0.256720s] ... ok
{1} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete [7.695611s] ... ok
{0} tempest.api.volume.test_volume_delete_cascade.VolumesDeleteCascade.test_volume_delete_cascade [8.770926s] ... ok
{2} tempest.api.volume.test_versions.VersionsTest.test_list_versions [0.014103s] ... ok
{2} tempest.api.volume.test_versions.VersionsTest.test_show_version [0.133939s] ... ok
{2} tempest.api.volume.test_volume_metadata.VolumesMetadataTest.test_crud_volume_metadata [0.345267s] ... ok
{2} tempest.api.volume.test_volume_metadata.VolumesMetadataTest.test_update_show_volume_metadata_item [0.220362s] ... ok
{1} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete_as_clone [10.083086s] ... ok
{0} tempest.api.volume.test_volume_delete_cascade.VolumesDeleteCascade.test_volume_from_snapshot_cascade_delete [8.005734s] ... ok
{2} tempest.api.volume.test_volume_transfers.VolumesTransfersTest.test_create_get_list_accept_volume_transfer [5.065852s] ... ok
{0} tempest.api.volume.test_volume_transfers.VolumesTransfersV355Test.test_create_get_list_accept_volume_transfer [4.970194s] ... ok
{2} tempest.api.volume.test_volume_transfers.VolumesTransfersTest.test_create_list_delete_volume_transfer [3.826407s] ... ok
{0} tempest.api.volume.test_volume_transfers.VolumesTransfersV355Test.test_create_list_delete_volume_transfer [3.849584s] ... ok
{1} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete_from_image [20.325796s] ... ok
{0} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_attach_detach_volume_to_instance [3.563675s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 45, in test_attach_detach_volume_to_instance
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:05Z', 'message': 'Build of instance 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 aborted: Failure prepping block device.\n'}. Server boot request ID: req-86bd5815-c19a-437e-bc89-7bdee00c7cb4.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:02,773 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://controller:5000/v3/auth/tokens 0.550s
2022-08-02 08:27:02,774 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:02 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-50b96d8b-0e00-4e7e-8e09-41e0b723ba7b', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "09b2d1bc822147a9b2018d40e052b219", "name": "tempest-VolumesActionsTest-1909648883-project", "password_expires_at": null}, "audit_ids": ["TdKwNo-sSsOUJtorXvNAwQ"], "expires_at": "2022-08-03T05:27:02.000000Z", "issued_at": "2022-08-02T05:27:02.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "27b3f42bd1d841148a24c5185288dd9f", "name": "tempest-VolumesActionsTest-1909648883"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27b3f
    42bd1d841148a24c5185288dd9f", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:02,775 4569 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-08-02 08:27:02,885 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.109s
2022-08-02 08:27:02,886 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesActionsTest-439712853-desc", "domain_id": "default", "name": "tempest-VolumesActionsTest-439712853"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:02 GMT', 'server': 'Apache', 'content-length': '371', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-3e30cada-a7f3-4a71-bd05-85cfb2e85f23', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "7cd4cce4b4784f70906e89450fc68e85", "name": "tempest-VolumesActionsTest-439712853", "domain_id": "default", "description": "tempest-VolumesActionsTest-439712853-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85"}}}\n'
2022-08-02 08:27:03,460 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.573s
2022-08-02 08:27:03,461 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesActionsTest-439712853-project-admin", "password": "E3+tsS%#2pIW%!A", "domain_id": "default"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:02 GMT', 'server': 'Apache', 'content-length': '292', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-093b4698-6875-4ff8-b29a-a517755364d0', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "8a9d6d47cd144a739323846b7c4946cf", "name": "tempest-VolumesActionsTest-439712853-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/8a9d6d47cd144a739323846b7c4946cf"}}}\n'
2022-08-02 08:27:03,494 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.032s
2022-08-02 08:27:03,494 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-3f4a6295-bf98-41e4-be9a-61ab4d9a4382', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c089
    8b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:03,549 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.053s
2022-08-02 08:27:03,549 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6ded092b-1b43-4f1b-82ca-de26b11edf02', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:03,632 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.082s
2022-08-02 08:27:03,633 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-b8d7a4c0-2380-46ce-83f3-eef1b29cbfcb', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:03,670 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.036s
2022-08-02 08:27:03,671 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-e0
    deda30-ea9d-4c3e-bd55-a494fe96f899', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:03,754 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.082s
2022-08-02 08:27:03,755 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-9726abda-052a-48f5-a7f7-9c23ae5d4070', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:03,834 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.078s
2022-08-02 08:27:03,835 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-b33a3546-0c52-4941-aedf-fc054b9769cb', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:03,914 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.078s
2022-08-02 08:27:03,915 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-5c43d8a6-8241-43f6-9708-c3dfb639544a', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853a
    e340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:03,955 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.039s
2022-08-02 08:27:03,956 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-de736821-2db0-46c8-8490-fffe53831a7c', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:03,957 4569 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user 8a9d6d47cd144a739323846b7c4946cf is created with scope project and roles: ['admin', 'admin']
2022-08-02 08:27:03,957 4569 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesActionsTest-439712853-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': '7cd4cce4b4784f70906e89450fc68e85', 'project_name': 'tempest-VolumesActionsTest-439712853', 'tenant_id': '7cd4cce4b4784f70906e89450fc68e85', 'tenant_name': 'tempest-VolumesActionsTest-439712853', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': '8a9d6d47cd144a739323846b7c4946cf', 'system': None}, Network: None, Subnet: None, Router: None
2022-08-02 08:27:03,967 4569 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_attach_detach_volume_to_instance) Found network None available for tenant
2022-08-02 08:27:04,211 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.243s
2022-08-02 08:27:04,212 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-778752586", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-86bd5815-c19a-437e-bc89-7bdee00c7cb4', 'x-compute-request-id': 'req-86bd5815-c19a-437e-bc89-7bdee00c7cb4', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "5424eecc-994e-4eb8-ab3c-3b98b59ee6e9", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "3zkPGXdGo8Zs"}}'
20
    22-08-02 08:27:04,301 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 0.084s
2022-08-02 08:27:04,302 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:04 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1321', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b6414c02-2285-4f7c-b96b-be65c81d1ffc', 'x-compute-request-id': 'req-b6414c02-2285-4f7c-b96b-be65c81d1ffc', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9'}
        Body: b'{"server": {"id": "5424eecc-994e-4eb8-ab3c-3b98b59ee6e9", "name": "tempest-VolumesActionsTest-instance-778752586", "status": "BUILD", "tenant_id": "27b3f42bd1d841148a24c5185288dd9f", "user_id": "09b2d1bc822147a9b2018d40e052b219", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:04Z", "updated": "2022-08-02T05:27:04Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:05,413 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 0.099s
2022-08-02 08:27:05,414 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:05 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4675', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-ed1a16ca-9f2a-415c-9e2e-9bf1628b2fb2', 'x-compute-request-id': 'req-ed1a16ca-9f2a-415c-9e2e-9bf1628b2fb2', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9'}
        Body: b'{"server": {"id": "5424eecc-994e-4eb8-ab3c-3b98b59ee6e9", "name": "tempest-VolumesActionsTest-instance-778752586", "status": "ERROR", "tenant_id": "27b3f42bd1d841148a24c5185288dd9f", "user_id": "09b2d1bc822147a9b2018d40e052b219", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:04Z", "updated": "2022-08-02T05:27:05Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://192.16
    8.16.202:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:05Z", "message": "Build of instance 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/
2022-08-02 08:27:05,427 4569 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:05,692 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 0.264s
2022-08-02 08:27:05,692 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:05 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'com
    pute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-f21fcc8e-14eb-4d71-9721-c2772b510ea8', 'x-compute-request-id': 'req-f21fcc8e-14eb-4d71-9721-c2772b510ea8', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9'}
        Body: b''
2022-08-02 08:27:05,728 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 0.035s
2022-08-02 08:27:05,729 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:05 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b5da36e7-3ee8-40aa-b1e2-e981fabf7a88', 'x-compute-request-id': 'req-b5da36e7-3ee8-40aa-b1e2-e981fabf7a88', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 could not be found."}}'

{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list [0.057379s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_by_name [0.056524s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_by_name [0.079318s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_pagination [0.305865s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_with_multiple_params [0.142254s] ... ok
{0} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_get_volume_attachment [2.290062s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 81, in test_get_volume_attachment
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 156b37c6-1f2a-4eb4-b29a-5ae646a8921e failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:07Z', 'message': 'Build of instance 156b37c6-1f2a-4eb4-b29a-5ae646a8921e aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 156b37c6-1f2a-4eb4-b29a-5ae646a8921e aborted: Failure prepping block device.\n'}. Server boot request ID: req-8f16d8ee-454b-4062-9c47-00a6e23aa046.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:06,304 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 201 POST http://controller:5000/v3/auth/tokens 0.564s
2022-08-02 08:27:06,305 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:05 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-7861606c-8bc3-434d-a162-91e403035d91', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "09b2d1bc822147a9b2018d40e052b219", "name": "tempest-VolumesActionsTest-1909648883-project", "password_expires_at": null}, "audit_ids": ["SB9haReyS7iF8t70kvpqmg"], "expires_at": "2022-08-03T05:27:06.000000Z", "issued_at": "2022-08-02T05:27:06.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "27b3f42bd1d841148a24c5185288dd9f", "name": "tempest-VolumesActionsTest-1909648883"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27b3f42bd1d84114
    8a24c5185288dd9f", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:06,314 4569 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_get_volume_attachment) Found network None available for tenant
2022-08-02 08:27:06,541 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.226s
2022-08-02 08:27:06,542 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-350620099", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:06 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-8f16d8ee-454b-4062-9c47-00a6e23aa046', 'x-compute-request-id': 'req-8f16d8ee-454b-4062-9c47-00a6e23aa046', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "156b37c6-1f2a-4eb4-b29a-5ae646a8921e", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "KXK3mxGccad5"}}'
2022-08-02 08:27:06,614 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e 0.067s
2022-08-02 08:27:06,615 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:06 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1321', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-217110e6-d98a-4d64-9566-cc40345d6b64', 'x-compute-request-id': 'req-217110e6-d98a-4d64-9566-cc40345d6b64', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e'}
        Body: b'{"server": {"id": "156b37c6-1f2a-4eb4-b29a-5ae646a8921e", "name": "tempest-VolumesActionsTest-instance-350620099", "status": "BUILD", "tenant_id": "27b3f42bd1d841148a24c5185288dd9f", "user_id": "09b2d1bc822147a9b2018d40e052b219", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:06Z", "updated": "2022-08-02T05:27:06Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}, {"rel": "bookmark", "href": "htt
    p://[LB_IP_ADDRESS]:8774/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:07,721 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e 0.094s
2022-08-02 08:27:07,722 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:07 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4675', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-41da47b0-2467-451d-b159-24e9139261f2', 'x-compute-request-id': 'req-41da47b0-2467-451d-b159-24e9139261f2', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e'}
        Body: b'{"server": {"id": "156b37c6-1f2a-4eb4-b29a-5ae646a8921e", "name": "tempest-VolumesActionsTest-instance-350620099", "status": "ERROR", "tenant_id": "27b3f42bd1d841148a24c5185288dd9f", "user_id": "09b2d1bc822147a9b2018d40e052b219", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:06Z", "updated": "2022-08-02T05:27:07Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:07Z", "message": "Build of instance 156b37c6-1f2a-4eb4-b29a-5ae646a8921e aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid
    ,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/
2022-08-02 08:27:07,733 4569 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:07,984 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e 0.251s
2022-08-02 08:27:07,985 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:07 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-00225668-2e4e-4b97-986c-744a4055b97e', 'x-compute-request-id': 'req-00225668-2e4e-4b97-986c-744a4055b97e', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e'}
        Body: b''
2022-08-02 08:27:08,023 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e 0.037s
2022-08-02 08:27:08,023 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:07 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7b684119-c14c-49b4-810d-196cfb2f5477', 'x-compute-request-id': 'req-7b684119-c14c-49b4-810d-196cfb2f5477', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 156b37c6-1f2a-4eb4-b29a-5ae646a8921e could not be found."}}'

{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_pagination [0.246884s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_param_display_name_and_status [0.057192s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_display_name_and_status [0.069023s] ... ok
{0} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_reserve_unreserve_volume [0.197235s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_marker [0.082013s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_metadata [0.076772s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_details [0.069890s] ... ok
{0} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_bootable [0.180377s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_param_metadata [0.066993s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_availability_zone [0.134936s] ... ok
{0} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_readonly_update [0.200231s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_bootable [0.114897s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_status [0.114216s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_availability_zone [0.076198s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_bootable [0.069911s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_status [0.077215s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit [0.039912s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit_equals_infinite [0.092726s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit_equals_zero [0.026811s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_marker [0.083454s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_offset [0.035304s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_created_at_asc [0.036170s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_created_at_desc [0.035584s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_id_asc [0.039560s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_id_desc [0.037485s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_name_asc [0.038751s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_name_desc [0.036334s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshots_list_details_with_params [0.111994s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshots_list_with_params [0.106191s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_create_snapshot_with_nonexistent_volume_id [0.128474s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_create_snapshot_without_passing_volume_id [0.029098s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshot_invalid_param_limit [0.015211s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshots_invalid_param_marker [0.026394s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshots_invalid_param_sort [0.019448s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_attach_volumes_with_nonexistent_volume_id [4.341524s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_negative.py", line 179, in test_attach_volumes_with_nonexistent_volume_id
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 9ca26f09-829c-4b47-a507-526256baff6c failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:22Z', 'message': 'Build of instance 9ca26f09-829c-4b47-a507-526256baff6c aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 9ca26f09-829c-4b47-a507-526256baff6c aborted: Failure prepping block device.\n'}. Server boot request ID: req-3cad7218-c415-413f-969d-b08738c2b913.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:19,174 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://controller:5000/v3/auth/tokens 0.501s
2022-08-02 08:27:19,175 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:18 GMT', 'server': 'Apache', 'content-length': '3890', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6d7faa5e-2967-4de4-8bae-721331eab315', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "fde46240e3e940feb5ffd1692d5b51a6", "name": "tempest-VolumesNegativeTest-1198824065-project", "password_expires_at": null}, "audit_ids": ["440UDrp_QluCBYxdr4EocA"], "expires_at": "2022-08-03T05:27:19.000000Z", "issued_at": "2022-08-02T05:27:19.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "7bf144c4a32d48a585ba92aa059ff151", "name": "tempest-VolumesNegativeTest-1198824065"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/7bf144c4a32d48a585ba92aa059ff151", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/7bf144c4a32d48a585ba92aa059ff151", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/7bf144c4a32d48a585ba92aa059ff151", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8
    774/v2/7bf144c4a32d48a585ba92aa059ff151", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:19,175 4571 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-08-02 08:27:19,963 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.786s
2022-08-02 08:27:19,963 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesNegativeTest-1653369793-desc", "domain_id": "default", "name": "tempest-VolumesNegativeTest-1653369793"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:19 GMT', 'server': 'Apache', 'content-length': '375', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-38b72888-0c73-4d10-9a27-9bb23bba86c7', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "aeaa9785755a421aa36c0c30fddbe401", "name": "tempest-VolumesNegativeTest-1653369793", "domain_id": "default", "description": "tempest-VolumesNegativeTest-1653369793-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401"}}}\n'
2022-08-02 08:27:20,534 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.569s
2022-08-02 08:27:20,535 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesNegativeTest-1653369793-project-admin", "password": "U1__mdTS%1hkBic", "domain_id": "default"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:19 GMT', 'server': 'Apache', 'content-length': '294', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-eccecbfb-660c-4ad2-a5c2-da0665f428a5', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "be76f642c2914d26959fce4a44f0c004", "name": "tempest-VolumesNegativeTest-1653369793-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/be76f642c2914d26959fce4a44f0c004"}}}\n'
2022-08-02 08:27:20,620 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.083s
2022-08-02 08:27:20,620 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-d3e1aceb-4fd8-4cce-9181-8fb56ae9e04c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"
    self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:20,677 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c 0.055s
2022-08-02 08:27:20,677 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-5cf6509e-631c-49d5-b46a-3ec440e20c1c', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:20,759 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.080s
2022-08-02 08:27:20,759 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-221fade1-1df8-44c7-be34-267ebf364ece', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:20,795 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c 0.035s
2022-08-02 08:27:20,796 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20
     GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-f504b2ed-0eb7-4eb5-bc20-a5a43bc456ac', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:20,878 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.081s
2022-08-02 08:27:20,878 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4c5e8000-cf1b-4bc5-a9c3-1dae1712bff8', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:20,922 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c 0.043s
2022-08-02 08:27:20,923 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-5e823a9d-7548-4bc0-bb1c-7cffe1c2d827', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:21,011 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.087s
2022-08-02 08:27:21,012 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-7734927d-a4d9-40c6-8424-dde320cd897b', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": 
    null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:21,052 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c 0.038s
2022-08-02 08:27:21,052 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:21 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-f0517f14-6c90-418f-99d5-c9fe499ca6a8', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:21,053 4571 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user be76f642c2914d26959fce4a44f0c004 is created with scope project and roles: ['admin', 'admin']
2022-08-02 08:27:21,054 4571 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesNegativeTest-1653369793-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': 'aeaa9785755a421aa36c0c30fddbe401', 'project_name': 'tempest-VolumesNegativeTest-1653369793', 'tenant_id': 'aeaa9785755a421aa36c0c30fddbe401', 'tenant_name': 'tempest-VolumesNegativeTest-1653369793', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'be76f642c2914d26959fce4a44f0c004', 'system': None}, Network: None, Subnet: None, Router: None
2022-08-02 08:27:21,114 4571 INFO     [tempest.lib.common.fixed_network] (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id) Found network None available for tenant
2022-08-02 08:27:21,356 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.241s
2022-08-02 08:27:21,357 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesNegativeTest-instance-863425057", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:21 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-3cad7218-c415-413f-969d-b08738c2b913', 'x-compute-request-id': 'req-3cad7218-c415-413f-969d-b08738c2b913', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "9ca26f09-829c-4b47-a507-526256baff6c", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/serv
    ers/9ca26f09-829c-4b47-a507-526256baff6c"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "X2YokuikYYJv"}}'
2022-08-02 08:27:21,432 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c 0.070s
2022-08-02 08:27:21,433 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:21 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-30280f71-ba10-448e-9c1c-3503124d49cf', 'x-compute-request-id': 'req-30280f71-ba10-448e-9c1c-3503124d49cf', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c'}
        Body: b'{"server": {"id": "9ca26f09-829c-4b47-a507-526256baff6c", "name": "tempest-VolumesNegativeTest-instance-863425057", "status": "BUILD", "tenant_id": "7bf144c4a32d48a585ba92aa059ff151", "user_id": "fde46240e3e940feb5ffd1692d5b51a6", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:21Z", "updated": "2022-08-02T05:27:21Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/9ca26f09-829c-4b47-a507-526256baff6c"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:22,543 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c 0.098s
2022-08-02 08:27:22,544 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:22 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4676', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-5b6bb99c-d56a-49dc-b19e-d7fa7a84eb87', 'x-compute-request-id': 'req-5b6bb99c-d56a-49dc-b19e-d7fa7a84eb87', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c'}
        Body: b'{"server": {"id": "9ca26f09-829c-4b47-a507-526256baff6c", "name": "tempest-VolumesNegativeTest-instance-863425057", "status": "ERROR", "tenant_id": "7bf144c4a32d48a585ba92aa059ff151", "user_id": "fde46240e3e940feb5ffd1692d5b51a6", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}
    , "created": "2022-08-02T05:27:21Z", "updated": "2022-08-02T05:27:22Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/9ca26f09-829c-4b47-a507-526256baff6c"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:22Z", "message": "Build of instance 9ca26f09-829c-4b47-a507-526256baff6c aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute
2022-08-02 08:27:22,556 4571 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:22,970 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c 0.413s
2022-08-02 08:27:22,971 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json
    ', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:22 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-cc98ce0d-7a12-4ba6-9515-a501d1fa5091', 'x-compute-request-id': 'req-cc98ce0d-7a12-4ba6-9515-a501d1fa5091', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c'}
        Body: b''
2022-08-02 08:27:23,006 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c 0.034s
2022-08-02 08:27:23,006 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:22 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b1c13136-6ace-4d3a-912a-5fb2bb9d0f80', 'x-compute-request-id': 'req-b1c13136-6ace-4d3a-912a-5fb2bb9d0f80', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 9ca26f09-829c-4b47-a507-526256baff6c could not be found."}}'

{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_from_deactivated_image [0.476470s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_from_image_with_decreasing_size [0.331985s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_invalid_size [0.017269s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_snapshot_id [0.024676s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_source_volid [0.042290s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_volume_type [0.032001s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_negative [0.014989s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_zero [0.016329s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_without_passing_size [0.016297s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_delete_invalid_volume_id [0.040009s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_delete_volume_without_passing_volume_id [0.012839s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_detach_volumes_with_invalid_volume_id [0.027558s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_get_invalid_volume_id [0.027453s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_get_volume_without_passing_volume_id [0.013255s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_detail_with_invalid_status [0.065807s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_detail_with_nonexistent_name [0.059000s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_with_invalid_status [0.050637s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_with_nonexistent_name [0.054295s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_reserve_volume_with_negative_volume_status [0.140899s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_reserve_volume_with_nonexistent_volume_id [0.029148s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_unreserve_volume_with_nonexistent_volume_id [0.027410s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_empty_volume_id [0.013344s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_invalid_volume_id [0.028662s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_nonexistent_volume_id [0.028006s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_delete_nonexistent_volume_id [0.027825s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_None_size [0.015667s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_non_number_size [0.016088s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_nonexistent_volume_id [0.026788s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_size_smaller_than_original_size [0.014941s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_without_passing_volume_id [0.027270s] ... ok
{2} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_get_nonexistent_volume_id [0.027647s] ... ok
{0} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_upload [16.944667s] ... ok
{1} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_volume_from_snapshot_decreasing_size [4.364581s] ... ok
{0} tempest.api.volume.test_volumes_clone_negative.VolumesCloneNegativeTest.test_create_from_volume_decreasing_size [2.820089s] ... ok
{2} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_delete_with_volume_in_use [3.445518s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_snapshots.py", line 48, in test_snapshot_create_delete_with_volume_in_use
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 47044cfd-c79a-441b-ac98-313f6703e4e9 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:33Z', 'message': 'Build of instance 47044cfd-c79a-441b-ac98-313f6703e4e9 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 47044cfd-c79a-441b-ac98-313f6703e4e9 aborted: Failure prepping block device.\n'}. Server boot request ID: req-5005c792-f071-4d71-ba6d-80e880f1bd19.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:31,204 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://controller:5000/v3/auth/tokens 0.562s
2022-08-02 08:27:31,204 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:30 GMT', 'server': 'Apache', 'content-length': '3898', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-e7aedde8-3739-411b-b7b2-8aa517d042be', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "506929844ff64164aecd274db900a939", "name": "tempest-VolumesSnapshotTestJSON-1470293109-project", "password_expires_at": null}, "audit_ids": ["G6NJ9NIaTs2VHoPoK0awfw"], "expires_at": "2022-08-03T05:27:31.000000Z", "issued_at": "2022-08-02T05:27:31.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "3a41cb28974b4d7c959c0e0586fc9193", "name": "tempest-VolumesSnapshotTestJSON-1470293109"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://192.
    168.16.202:8774/v2/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:31,205 4571 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-08-02 08:27:31,299 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.093s
2022-08-02 08:27:31,300 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesSnapshotTestJSON-347464651-desc", "domain_id": "default", "name": "tempest-VolumesSnapshotTestJSON-347464651"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'content-length': '381', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-02fba8b8-e790-47e0-a3ef-e58e30df17db', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "b1d03be88d7d43a3be849a4d90ff5b70", "name": "tempest-VolumesSnapshotTestJSON-347464651", "domain_id": "default", "description": "tempest-VolumesSnapshotTestJSON-347464651-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70"}}}\n'
2022-08-02 08:27:31,871 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.569s
2022-08-02 08:27:31,871 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesSnapshotTestJSON-347464651-project-admin", "password": "I3!hNdAoVDBHjRj", "domain_id": "default"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'content-length': '297', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-1e894c8c-b17c-439b-b18a-15404a2cedc0', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "d8eed37051554334a770e92cc7df29ed", "name": "tempest-VolumesSnapshotTestJSON-347464651-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/d8eed37051554334a770e92cc7df29ed"}}}\n'
2022-08-02 08:27:31,902 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.030s
2022-08-02 08:27:31,903 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-be2709fe-113c-40e4-b9cd-2df46a593448', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "desc
    ription": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:31,956 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c 0.052s
2022-08-02 08:27:31,957 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-2ec2180f-3c8d-45c3-8f54-104d5fb9c9d7', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:32,035 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.077s
2022-08-02 08:27:32,035 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-81c4bcad-8603-4061-abf5-b70a814776d6', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:32,075 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c 0.038s
2022-08-02 08:27:32,076 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    R
    esponse - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-0df9d0c3-7015-4676-95e4-5ba3f6f8f6be', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:32,162 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.085s
2022-08-02 08:27:32,163 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-a43b4516-1e1e-4f69-8efd-f3b345f48e85', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:32,200 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c 0.036s
2022-08-02 08:27:32,200 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-ea401f06-347e-432a-9416-3e0c4e8e745b', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:32,296 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.095s
2022-08-02 08:27:32,297 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-e0d2127d-0569-4143-b251-4767985c7faa', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae
    340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:32,332 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c 0.034s
2022-08-02 08:27:32,332 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-c78d8ce6-59fd-486a-876a-8ae4560e80d1', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:32,333 4571 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user d8eed37051554334a770e92cc7df29ed is created with scope project and roles: ['admin', 'admin']
2022-08-02 08:27:32,333 4571 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesSnapshotTestJSON-347464651-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': 'b1d03be88d7d43a3be849a4d90ff5b70', 'project_name': 'tempest-VolumesSnapshotTestJSON-347464651', 'tenant_id': 'b1d03be88d7d43a3be849a4d90ff5b70', 'tenant_name': 'tempest-VolumesSnapshotTestJSON-347464651', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'd8eed37051554334a770e92cc7df29ed', 'system': None}, Network: None, Subnet: None, Router: None
2022-08-02 08:27:32,344 4571 INFO     [tempest.lib.common.fixed_network] (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use) Found network None available for tenant
2022-08-02 08:27:32,585 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.240s
2022-08-02 08:27:32,586 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesSnapshotTestJSON-instance-1325970618", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-5005c792-f071-4d71-ba6d-80e880f1bd19', 'x-compute-request-id': 'req-5005c792-f071-4d71-ba6d-80e880f1bd19', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "47044cfd-c79a-441b-ac98-313f6703e4e9", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd
    -c79a-441b-ac98-313f6703e4e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "dQ74agattAkc"}}'
2022-08-02 08:27:32,665 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9 0.074s
2022-08-02 08:27:32,666 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1327', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-f9c07d23-69d3-4644-99fe-d00a92e73c87', 'x-compute-request-id': 'req-f9c07d23-69d3-4644-99fe-d00a92e73c87', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9'}
        Body: b'{"server": {"id": "47044cfd-c79a-441b-ac98-313f6703e4e9", "name": "tempest-VolumesSnapshotTestJSON-instance-1325970618", "status": "BUILD", "tenant_id": "3a41cb28974b4d7c959c0e0586fc9193", "user_id": "506929844ff64164aecd274db900a939", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:32Z", "updated": "2022-08-02T05:27:32Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:33,781 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9 0.100s
2022-08-02 08:27:33,781 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:33 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4681', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-effda547-00ac-4456-a2e8-d1f89af15cdc', 'x-compute-request-id': 'req-effda547-00ac-4456-a2e8-d1f89af15cdc', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9'}
        Body: b'{"server": {"id": "47044cfd-c79a-441b-ac98-313f6703e4e9", "name": "tempest-VolumesSnapshotTestJSON-instance-1325970618", "status": "ERROR", "tenant_id": "3a41cb28974b4d7c959c0e0586fc9193", "user_id": "506929844ff64164aecd274db900a939", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326
    b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:32Z", "updated": "2022-08-02T05:27:33Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:33Z", "message": "Build of instance 47044cfd-c79a-441b-ac98-313f6703e4e9 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/co
2022-08-02 08:27:33,793 4571 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:34,044 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9 0.250s
2022-08-02 08:27:34,045 4571 DEBUG    [tempes
    t.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:33 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-61ff2513-24a3-4f53-89c5-1c60248eed0f', 'x-compute-request-id': 'req-61ff2513-24a3-4f53-89c5-1c60248eed0f', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9'}
        Body: b''
2022-08-02 08:27:34,080 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9 0.035s
2022-08-02 08:27:34,081 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:34 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-37b8e743-6f3c-43fa-9363-04d3daffd572', 'x-compute-request-id': 'req-37b8e743-6f3c-43fa-9363-04d3daffd572', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 47044cfd-c79a-441b-ac98-313f6703e4e9 could not be found."}}'

{2} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_get_list_update_delete [3.564705s] ... ok
{2} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_offline_delete_online [4.603705s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_snapshots.py", line 83, in test_snapshot_create_offline_delete_online
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 562e8056-b9e5-45ea-b181-55d7ba95aff5 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:41Z', 'message': 'Build of instance 562e8056-b9e5-45ea-b181-55d7ba95aff5 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 562e8056-b9e5-45ea-b181-55d7ba95aff5 aborted: Failure prepping block device.\n'}. Server boot request ID: req-873eef97-919d-4e8d-823c-6d00086289da.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:37,813 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 202 POST http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots 0.161s
2022-08-02 08:27:37,813 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"snapshot": {"volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "name": "tempest-VolumesSnapshotTestJSON-Snapshot-751442025"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:37 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '309', 'x-compute-request-id': 'req-91d2febd-2253-489c-ab14-e0f69cf09a12', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-91d2febd-2253-489c-ab14-e0f69cf09a12', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots'}
        Body: b'{"snapshot": {"id": "58a72f8a-9424-4cf7-a76b-6c94c1bb879f", "created_at": "2022-08-02T05:27:37.768734", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Snapshot-751442025", "description": null, "volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "status": "creating", "size": 1, "metadata": {}}}'
2022-08-02 08:27:37,843 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f 0.024s
2022-08-02 08:27:37,843 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:37 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '441', 'x-compute-request-id': 'req-11b90004-ff41-47c1-b852-3b90c3772f2b', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-11b90004-ff41-47c1-b852-3b90c3772f2b', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f'}
        Body: b'{"snapshot": {"id": "58a72f8a-9424-4cf7-a76b-6c94c1bb879f", "created_at": "2022-08-02T05:27:37.000000", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Snapshot-751442025", "description": null, "volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "status": "creating", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "3a41cb28974b4d7c959c0e0586fc9193", "os-extended-snapshot-attributes:progress": "0%"}}'
2022-08-02 08:27:38,875 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f 0.026s
2022-08-02 08:27:38,876 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:38 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '441', 'x-compute-request-id': 'req-6872cfbc-3359-467c-a950-5c3d3e1ae830', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-6872cfbc-3359-467c-a950-5c3d3e1ae830', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f'}
        Body: b'{"snapshot": {"id": "58a72f8a-9424-4cf7-a76b-6c94c1bb879f", "created_at": "2022-08-02T05:27:37.000000", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Sn
    apshot-751442025", "description": null, "volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "status": "creating", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "3a41cb28974b4d7c959c0e0586fc9193", "os-extended-snapshot-attributes:progress": "0%"}}'
2022-08-02 08:27:39,908 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f 0.026s
2022-08-02 08:27:39,909 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:39 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '468', 'x-compute-request-id': 'req-bcb54af9-199c-469b-9631-4466f827cdb9', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-bcb54af9-199c-469b-9631-4466f827cdb9', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f'}
        Body: b'{"snapshot": {"id": "58a72f8a-9424-4cf7-a76b-6c94c1bb879f", "created_at": "2022-08-02T05:27:37.000000", "updated_at": "2022-08-02T05:27:39.000000", "name": "tempest-VolumesSnapshotTestJSON-Snapshot-751442025", "description": null, "volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "status": "available", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "3a41cb28974b4d7c959c0e0586fc9193", "os-extended-snapshot-attributes:progress": "100%"}}'
2022-08-02 08:27:39,914 4571 INFO     [tempest.common.waiters] snapshot 58a72f8a-9424-4cf7-a76b-6c94c1bb879f reached available after waiting for 2.914292 seconds
2022-08-02 08:27:40,495 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 201 POST http://controller:5000/v3/auth/tokens 0.571s
2022-08-02 08:27:40,495 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:39 GMT', 'server': 'Apache', 'content-length': '3898', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-9b7061c9-406d-4de2-a594-767d4219f96e', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "506929844ff64164aecd274db900a939", "name": "tempest-VolumesSnapshotTestJSON-1470293109-project", "password_expires_at": null}, "audit_ids": ["GXs8gx7BSpi096cCKm9H8A"], "expires_at": "2022-08-03T05:27:40.000000Z", "issued_at": "2022-08-02T05:27:40.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "3a41cb28974b4d7c959c0e0586fc9193", "name": "tempest-VolumesSnapshotTestJSON-1470293109"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "inte
    rface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:40,505 4571 INFO     [tempest.lib.common.fixed_network] (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online) Found network None available for tenant
2022-08-02 08:27:40,731 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.224s
2022-08-02 08:27:40,731 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesSnapshotTestJSON-instance-1719997459", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-873eef97-919d-4e8d-823c-6d00086289da', 'x-compute-request-id': 'req-873eef97-919d-4e8d-823c-6d00086289da', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "562e8056-b9e5-45ea-b181-55d7ba95aff5", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}, {"rel": "
    bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "iZK7kcyzp8iW"}}'
2022-08-02 08:27:40,808 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5 0.072s
2022-08-02 08:27:40,809 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1327', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d97a7b1d-a12a-4117-9221-0408314a921b', 'x-compute-request-id': 'req-d97a7b1d-a12a-4117-9221-0408314a921b', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5'}
        Body: b'{"server": {"id": "562e8056-b9e5-45ea-b181-55d7ba95aff5", "name": "tempest-VolumesSnapshotTestJSON-instance-1719997459", "status": "BUILD", "tenant_id": "3a41cb28974b4d7c959c0e0586fc9193", "user_id": "506929844ff64164aecd274db900a939", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:40Z", "updated": "2022-08-02T05:27:40Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:41,917 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5 0.096s
2022-08-02 08:27:41,918 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4681', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-25249c68-a983-45be-b58d-84c7f243ba02', 'x-compute-request-id': 'req-25249c68-a983-45be-b58d-84c7f243ba02', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5'}
        Body: b'{"server": {"id": "562e8056-b9e5-45ea-b181-55d7ba95aff5", "name": "tempest-VolumesSnapshotTestJSON-instance-1719997459", "status": "ERROR", "tenant_id": "3a41cb28974b4d7c959c0e0586fc9193", "user_id": "506929844ff64164aecd274db900a939", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": 
    "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:40Z", "updated": "2022-08-02T05:27:41Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:41Z", "message": "Build of instance 562e8056-b9e5-45ea-b181-55d7ba95aff5 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/co
2022-08-02 08:27:41,929 4571 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:42,218 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5 0.288s
2022-08-02 08:27:42,218 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Conten
    t-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-cacb7fc9-5748-4eb6-bf85-3656e0130f28', 'x-compute-request-id': 'req-cacb7fc9-5748-4eb6-bf85-3656e0130f28', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5'}
        Body: b''
2022-08-02 08:27:42,253 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5 0.033s
2022-08-02 08:27:42,253 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-9f4740bb-e138-4693-a7e7-f0a6301f70d9', 'x-compute-request-id': 'req-9f4740bb-e138-4693-a7e7-f0a6301f70d9', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 562e8056-b9e5-45ea-b181-55d7ba95aff5 could not be found."}}'

{0} tempest.api.volume.test_volumes_extend.VolumesExtendAttachedTest.test_extend_attached_volume [5.024726s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_extend.py", line 187, in test_extend_attached_volume
    self._test_extend_attached_volume(volume)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_extend.py", line 117, in _test_extend_attached_volume
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server da803025-baac-41db-9aeb-f27e5aad3053 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:42Z', 'message': 'Build of instance da803025-baac-41db-9aeb-f27e5aad3053 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance da803025-baac-41db-9aeb-f27e5aad3053 aborted: Failure prepping block device.\n'}. Server boot request ID: req-03c07e84-23c5-4050-8e08-83117a81dba1.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:38,732 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 202 POST http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes 0.558s
2022-08-02 08:27:38,732 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: {"volume": {"size": 1, "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:38 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '892', 'x-compute-request-id': 'req-91a748b2-ba64-4533-8e71-9b17c0644d5c', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-91a748b2-ba64-4533-8e71-9b17c0644d5c', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes'}
        Body: b'{"volume": {"id": "c40609bf-637c-455d-8fe0-4c2393c92a88", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-08-02T05:27:38.668983", "updated_at": null, "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}], "user_id": "955e6cab114d4f0580de39d9ddf821b2", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null}}'
2022-08-02 08:27:38,789 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88 0.042s
2022-08-02 08:27:38,790 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:38 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1071', 'x-compute-request-id': 'req-a3e8ea35-e674-4f6f-8b21-20376236c376', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-a3e8ea35-e674-4f6f-8b21-20376236c376', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88'}
        Body: b'{"volume": {"id": "c40609bf-637c-455d-8fe0-4c2393c92a88", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-08-02T05:27:38.000000", "updated_at": null, "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}], "user_id": "955e6cab114d4f0580de39d9ddf821b2", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": null, "os-vol-tenant-attr:tenant_id": "040fc79fc14d49c987f9ad715e629745", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id
    ": null}}'
2022-08-02 08:27:39,850 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88 0.048s
2022-08-02 08:27:39,851 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:39 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1129', 'x-compute-request-id': 'req-61473a3b-f0c0-4058-995b-c9ca0a312167', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-61473a3b-f0c0-4058-995b-c9ca0a312167', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88'}
        Body: b'{"volume": {"id": "c40609bf-637c-455d-8fe0-4c2393c92a88", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-08-02T05:27:38.000000", "updated_at": "2022-08-02T05:27:38.000000", "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}], "user_id": "955e6cab114d4f0580de39d9ddf821b2", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": "rack03-server59@LIGHTOSsetykm#setykm", "os-vol-tenant-attr:tenant_id": "040fc79fc14d49c987f9ad715e629745", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null}}'
2022-08-02 08:27:40,907 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88 0.043s
2022-08-02 08:27:40,907 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1130', 'x-compute-request-id': 'req-116ce27e-6c47-43ec-8a8a-214668608eb7', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-116ce27e-6c47-43ec-8a8a-214668608eb7', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88'}
        Body: b'{"volume": {"id": "c40609bf-637c-455d-8fe0-4c2393c92a88", "status": "available", "size": 1, "availability_zone": "nova", "created_at": "2022-08-02T05:27:38.000000", "updated_at": "2022-08-02T05:27:40.000000", "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}], "user_id": "955e6cab114d4f0580de39d9ddf821b2", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattac
    h": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": "rack03-server59@LIGHTOSsetykm#setykm", "os-vol-tenant-attr:tenant_id": "040fc79fc14d49c987f9ad715e629745", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null}}'
2022-08-02 08:27:40,919 4569 INFO     [tempest.common.waiters] volume c40609bf-637c-455d-8fe0-4c2393c92a88 reached available after waiting for 2.919112 seconds
2022-08-02 08:27:41,432 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 201 POST http://controller:5000/v3/auth/tokens 0.508s
2022-08-02 08:27:41,432 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:40 GMT', 'server': 'Apache', 'content-length': '3902', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-1de3c5ed-e65e-4570-8615-db3ce849a90d', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "955e6cab114d4f0580de39d9ddf821b2", "name": "tempest-VolumesExtendAttachedTest-1123876583-project", "password_expires_at": null}, "audit_ids": ["z8MLS3beQNagws_2GgnWCA"], "expires_at": "2022-08-03T05:27:41.000000Z", "issued_at": "2022-08-02T05:27:41.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "040fc79fc14d49c987f9ad715e629745", "name": "tempest-VolumesExtendAttachedTest-1123876583"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/040
    fc79fc14d49c987f9ad715e629745", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/040fc79fc14d49c987f9ad715e629745", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/040fc79fc14d49c987f9ad715e629745", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:41,442 4569 INFO     [tempest.lib.common.fixed_network] (VolumesExtendAttachedTest:test_extend_attached_volume) Found network None available for tenant
2022-08-02 08:27:41,679 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.236s
2022-08-02 08:27:41,680 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesExtendAttachedTest-instance-1558297019", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-03c07e84-23c5-4050-8e08-83117a81dba1', 'x-compute-request-id': 'req-03c07e84-23c5-4050-8e08-83117a81dba1', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "da803025-baac-41db-9aeb-f27e5aad3053", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/da803025-baac-41db-9aeb-f27e5aad3053"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "XWY5rZQQV3kN"}}'
2022-08-02 08:27:41,762 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053 0.078s
2022-08-02 08:27:41,763 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1329', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-cff3af1c-fe2c-41a2-923b-a4c2fed4cb97', 'x-compute-request-id': 'req-cff3af1c-fe2c-41a2-923b-a4c2fed4cb97', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053'}
        Body: b'{"server": {"id": "da803025-baac-41db-9aeb-f27e5aad3053", "name": "tempest-VolumesExtendAttachedTest-instance-1558297019", "status": "BUILD", "tenant_id": "040fc79fc14d49c987f9ad715e629745", "user_id": "955e6cab114d4f0580de39d9ddf821b2", "metadata": {}, "hostId": "", "image": {"i
    d": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:41Z", "updated": "2022-08-02T05:27:41Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/da803025-baac-41db-9aeb-f27e5aad3053"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:42,874 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053 0.097s
2022-08-02 08:27:42,874 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4683', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-e746d0c5-5c0e-4593-9a44-8c52a4d5ea36', 'x-compute-request-id': 'req-e746d0c5-5c0e-4593-9a44-8c52a4d5ea36', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053'}
        Body: b'{"server": {"id": "da803025-baac-41db-9aeb-f27e5aad3053", "name": "tempest-VolumesExtendAttachedTest-instance-1558297019", "status": "ERROR", "tenant_id": "040fc79fc14d49c987f9ad715e629745", "user_id": "955e6cab114d4f0580de39d9ddf821b2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:41Z", "updated": "2022-08-02T05:27:42Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/da803025-baac-41db-9aeb-f27e5aad3053"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:42Z", "message": "Build of instance da803025-baac-41db-9aeb-f27e5aad3053 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device
    _info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/
2022-08-02 08:27:42,886 4569 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:43,158 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053 0.271s
2022-08-02 08:27:43,158 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-2417eb8a-bd26-4e9f-b880-7e03cfd74f1e', 'x-compute-request-id': 'req-2417eb8a-bd26-4e9f-b880-7e03cfd74f1e', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053'}
        Body: b''
2022-08-02 08:27:43,195 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053 0.035s
2022-08-02 08:27:43,195 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-10e2c714-52df-4420-aec7-73bd1077c177', 'x-compute-request-id': 'req-10e2c714-52df-4420-aec7-73bd1077c177', 'connection': 'close', 'content-type': 'application/json; charse
    t=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance da803025-baac-41db-9aeb-f27e5aad3053 could not be found."}}'

{0} tempest.api.volume.test_volumes_get.VolumesSummaryTest.test_show_volume_summary [0.142443s] ... ok
{2} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_volume_from_snapshot [8.413223s] ... ok
{2} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_volume_from_snapshot_no_size [8.427580s] ... ok

==============================
Failed 8 tests - output below:
==============================

tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_list_get_volume_attachments_multiattach[id-8d5853f7-56e7-4988-9b0c-48cea3c7049a]
----------------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/api/compute/volumes/test_attach_volume.py", line 406, in test_list_get_volume_attachments_multiattach
    servers, volume, attachments = self._create_and_multiattach()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/compute/volumes/test_attach_volume.py", line 389, in _create_and_multiattach
    'ACTIVE')

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server d4fddfb8-fc65-4716-b532-b9445b09f5a3 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:23:58Z', 'message': 'Build of instance d4fddfb8-fc65-4716-b532-b9445b09f5a3 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance d4fddfb8-fc65-4716-b532-b9445b09f5a3 aborted: Failure prepping block device.\n'}.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:23:56,944 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 201 POST http://controller:5000/v3/auth/tokens 0.584s
2022-08-02 08:23:56,944 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:56 GMT', 'server': 'Apache', 'content-length': '3906', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-f1065797-b3d3-4862-a52e-fbbf63897b12', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "a9650e4b1209437384c5d33c33325099", "name": "tempest-AttachVolumeMultiAttachTest-1575405189-project", "password_expires_at": null}, "audit_ids": ["lexApKghSL6wAm5vQDA5Rg"], "expires_at": "2022-08-03T05:23:56.000000Z", "issued_at": "2022-08-02T05:23:56.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "22f18216c45145578ba70a58f09ecca5", "name": "tempest-AttachVolumeMultiAttachTest-1575405189"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "h
    ttp://[LB_IP_ADDRESS]:8774/v2/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:23:56,953 4569 INFO     [tempest.lib.common.fixed_network] (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach) Found network None available for tenant
2022-08-02 08:23:57,082 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.128s
2022-08-02 08:23:57,083 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "multiattach-server-0", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0", "networks": "none"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:56 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-f486ec6a-98c1-4293-8fb7-3380c677f4cb', 'x-compute-request-id': 'req-f486ec6a-98c1-4293-8fb7-3380c677f4cb', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "d4fddfb8-fc65-4716-b532-b9445b09f5a3", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "kqtVuwtPb9es"}}'
2022-08-02 08:23:57,616 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 201 POST http://controller:5000/v3/auth/tokens 0.522s
2022-08-02 08:23:57,617 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:57 GMT', 'server': 'Apache', 'content-length': '3906', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-9ff32dd3-de58-4065-96d6-55d6b147e111', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "a9650e4b1209437384c5d33c33325099", "name": "tempest-AttachVolumeMultiAttachTest-1575405189-project", "password_expires_at": null}, "audit_ids": ["9NU_WqLSQDqU75T85AywiA"], "expires_at": "2022-08-03T05:23:57.000000Z", "issued_at": "2022-08-02T05:23:57.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "22f18216c45145578ba70a58f09ecca5", "name": "tempest-AttachVolumeMultiAttachTest-1575405189"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": 
    "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/22f18216c45145578ba70a58f09ecca5", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:23:57,626 4569 INFO     [tempest.lib.common.fixed_network] (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach) Found network None available for tenant
2022-08-02 08:23:57,775 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.148s
2022-08-02 08:23:57,776 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "multiattach-server-1", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0", "networks": "none"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:57 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/4dd54861-4e70-433f-98d9-78cb951698ad', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Ve
    rsion,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-5afbb7fa-76e0-4564-aae2-cb7a97a17bb6', 'x-compute-request-id': 'req-5afbb7fa-76e0-4564-aae2-cb7a97a17bb6', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "4dd54861-4e70-433f-98d9-78cb951698ad", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/4dd54861-4e70-433f-98d9-78cb951698ad"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/4dd54861-4e70-433f-98d9-78cb951698ad"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "tJ9B7xwMihKv"}}'
2022-08-02 08:23:57,880 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3 0.100s
2022-08-02 08:23:57,881 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:23:57 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1768', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d6e80c0c-8be7-4ac6-ba02-496246eaa658', 'x-compute-request-id': 'req-d6e80c0c-8be7-4ac6-ba02-496246eaa658', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3'}
        Body: b'{"server": {"id": "d4fddfb8-fc65-4716-b532-b9445b09f5a3", "name": "multiattach-server-0", "status": "BUILD", "tenant_id": "22f18216c45145578ba70a58f09ecca5", "user_id": "a9650e4b1209437384c5d33c33325099", "metadata": {}, "hostId": "5ad0ec0d07b3e776b9b9eefd5fb4a5a56f9368823cda20305c9d4704", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"vcpus": 2, "ram": 1024, "disk": 1, "ephemeral": 0, "swap": 0, "original_name": "m1.nano", "extra_specs": {}}, "created": "2022-08-02T05:23:57Z", "updated": "2022-08-02T05:23:57Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "nova", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": "rack05-server76", "OS-EXT-SRV-ATTR:instance_name": "instance-00000677", "OS-EXT-SRV-ATTR:hypervisor_hostname": "rack05-server76", "OS-EXT-SRV-ATTR:reservation_id": "r-dck1cu8x", "OS-EXT-SRV-ATTR:launch_index": 0, "OS-EXT-SRV-ATTR:hostname": "multiattach-server-0", "OS-EXT-SRV-ATTR:kernel_id": "", "OS-EXT-SRV-ATTR:ramdisk_id": "", "OS-EXT-SRV-ATTR:root_device_name": null, "OS-EXT-SRV-ATTR:user_data": null, "OS-EXT-STS:task_state": "networking", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": [], "host_status": "UP", "locked": false, "description": null, "tags": []}}'
2022-08-02 08:23:58,993 4569 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3 0.097s
2022-08-02 08:23:58,994 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'dat
    e': 'Tue, 02 Aug 2022 05:23:58 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '5023', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-486202ec-71b4-4087-bcc4-d09d14d02255', 'x-compute-request-id': 'req-486202ec-71b4-4087-bcc4-d09d14d02255', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3'}
        Body: b'{"server": {"id": "d4fddfb8-fc65-4716-b532-b9445b09f5a3", "name": "multiattach-server-0", "status": "ERROR", "tenant_id": "22f18216c45145578ba70a58f09ecca5", "user_id": "a9650e4b1209437384c5d33c33325099", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"vcpus": 2, "ram": 1024, "disk": 1, "ephemeral": 0, "swap": 0, "original_name": "m1.nano", "extra_specs": {}}, "created": "2022-08-02T05:23:57Z", "updated": "2022-08-02T05:23:58Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d4fddfb8-fc65-4716-b532-b9445b09f5a3"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:23:58Z", "message": "Build of instance d4fddfb8-fc65-4716-b532-b9445b09f5a3 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/
    oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manage
2022-08-02 08:23:59,007 4569 INFO     [tempest.common.waiters] State transition "BUILD/networking" ==> "ERROR/None" after 2 second wait


tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_force_detach_volume[compute,id-d38285d9-929d-478f-96a5-00e66a115b81]
------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/admin/test_volumes_actions.py", line 83, in test_force_detach_volume
    server_id = self.create_server()['id']

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 8d4d2fab-94d9-4b03-a543-1df7766006eb failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:25:41Z', 'message': 'Build of instance 8d4d2fab-94d9-4b03-a543-1df7766006eb aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 8d4d2fab-94d9-4b03-a543-1df7766006eb aborted: Failure prepping block device.\n'}. Server boot request ID: req-fcb93420-a21d-4b27-b3ae-7be125cd894c.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:25:40,506 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 201 POST http://controller:5000/v3/auth/tokens 0.579s
2022-08-02 08:25:40,507 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:39 GMT', 'server': 'Apache', 'content-length': '3886', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4ef8ed13-b86a-411d-8436-38d922266893', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "9efd60971f724d47ac080d43f807f748", "name": "tempest-VolumesActionsTest-363283673-project", "password_expires_at": null}, "audit_ids": ["VGGFNFcyR0mjTp4u_B3PnA"], "expires_at": "2022-08-03T05:25:40.000000Z", "issued_at": "2022-08-02T05:25:40.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "330e714bae944765ad2898bda453dd4e", "name": "tempest-VolumesActionsTest-363283673"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/330e714bae944765ad2898bda453dd4e", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/330e714bae944765ad2898bda453dd4e", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/330e714bae944765ad2898bda453dd4e", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/330e714bae944765ad28
    98bda453dd4e", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:25:40,516 4571 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_force_detach_volume) Found network None available for tenant
2022-08-02 08:25:40,896 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.378s
2022-08-02 08:25:40,896 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-1778784363", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-fcb93420-a21d-4b27-b3ae-7be125cd894c', 'x-compute-request-id': 'req-fcb93420-a21d-4b27-b3ae-7be125cd894c', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "8d4d2fab-94d9-4b03-a543-1df7766006eb", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "AHfHD8QR6cR3"}}'
2022-08-02 08:25:40,979 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.078s
2022-08-02 08:25:40,980 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-0de57793-dee7-411b-a40d-4cdff2cc2565', 'x-compute-request-id': 'req-0de57793-dee7-411b-a40d-4cdff2cc2565', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb'}
        Body: b'{"server": {"id": "8d4d2fab-94d9-4b03-a543-1df7766006eb", "name": "tempest-VolumesActionsTest-instance-1778784363", "status": "BUILD", "tenant_id": "330e714bae944765ad2898bda453dd4e", "user_id": "9efd60971f724d47ac080d43f807f748", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:25:40Z", "updated": "2022-08-02T05:25:40Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}, {"rel": "bookmark", "href": "http://192.
    168.16.202:8774/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:25:42,112 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.119s
2022-08-02 08:25:42,113 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1425', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-0de6170d-7c2d-465c-a55c-e7f93f5dc494', 'x-compute-request-id': 'req-0de6170d-7c2d-465c-a55c-e7f93f5dc494', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb'}
        Body: b'{"server": {"id": "8d4d2fab-94d9-4b03-a543-1df7766006eb", "name": "tempest-VolumesActionsTest-instance-1778784363", "status": "BUILD", "tenant_id": "330e714bae944765ad2898bda453dd4e", "user_id": "9efd60971f724d47ac080d43f807f748", "metadata": {}, "hostId": "f2c1228ef0aeb80b680d14e93bb62138019956db609cd872af64174d", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:25:40Z", "updated": "2022-08-02T05:25:41Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "nova", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": "rack05-server76", "OS-EXT-SRV-ATTR:instance_name": "instance-0000067a", "OS-EXT-SRV-ATTR:hypervisor_hostname": "rack05-server76", "OS-EXT-STS:task_state": "networking", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:25:42,124 4571 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "BUILD/networking" after 2 second wait
2022-08-02 08:25:43,225 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.099s
2022-08-02 08:25:43,225 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4676', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d83009ad-1682-450c-ba90-79dc84aa231d', 'x-compute-request-id': 'req-d83009ad-1682-450c-ba90-79dc84aa231d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df
    7766006eb'}
        Body: b'{"server": {"id": "8d4d2fab-94d9-4b03-a543-1df7766006eb", "name": "tempest-VolumesActionsTest-instance-1778784363", "status": "ERROR", "tenant_id": "330e714bae944765ad2898bda453dd4e", "user_id": "9efd60971f724d47ac080d43f807f748", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:25:40Z", "updated": "2022-08-02T05:25:42Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:25:41Z", "message": "Build of instance 8d4d2fab-94d9-4b03-a543-1df7766006eb aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/
    site-packages/nova/compute
2022-08-02 08:25:43,238 4571 INFO     [tempest.common.waiters] State transition "BUILD/networking" ==> "ERROR/None" after 3 second wait
2022-08-02 08:25:43,832 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.594s
2022-08-02 08:25:43,833 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-c4c12666-c290-45db-9ba7-2113d9692a8a', 'x-compute-request-id': 'req-c4c12666-c290-45db-9ba7-2113d9692a8a', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb'}
        Body: b''
2022-08-02 08:25:43,868 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb 0.034s
2022-08-02 08:25:43,869 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:25:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-92588ac7-923f-40ae-b93d-fe5b03dd05df', 'x-compute-request-id': 'req-92588ac7-923f-40ae-b93d-fe5b03dd05df', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/8d4d2fab-94d9-4b03-a543-1df7766006eb'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 8d4d2fab-94d9-4b03-a543-1df7766006eb could not be found."}}'


tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_attach_detach_volume_to_instance[compute,id-fff42874-7db5-4487-a8e1-ddda5fb5288d,smoke]
-------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 45, in test_attach_detach_volume_to_instance
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:05Z', 'message': 'Build of instance 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 aborted: Failure prepping block device.\n'}. Server boot request ID: req-86bd5815-c19a-437e-bc89-7bdee00c7cb4.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:02,773 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://controller:5000/v3/auth/tokens 0.550s
2022-08-02 08:27:02,774 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:02 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-50b96d8b-0e00-4e7e-8e09-41e0b723ba7b', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "09b2d1bc822147a9b2018d40e052b219", "name": "tempest-VolumesActionsTest-1909648883-project", "password_expires_at": null}, "audit_ids": ["TdKwNo-sSsOUJtorXvNAwQ"], "expires_at": "2022-08-03T05:27:02.000000Z", "issued_at": "2022-08-02T05:27:02.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "27b3f42bd1d841148a24c5185288dd9f", "name": "tempest-VolumesActionsTest-1909648883"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27b3f
    42bd1d841148a24c5185288dd9f", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:02,775 4569 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-08-02 08:27:02,885 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.109s
2022-08-02 08:27:02,886 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesActionsTest-439712853-desc", "domain_id": "default", "name": "tempest-VolumesActionsTest-439712853"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:02 GMT', 'server': 'Apache', 'content-length': '371', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-3e30cada-a7f3-4a71-bd05-85cfb2e85f23', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "7cd4cce4b4784f70906e89450fc68e85", "name": "tempest-VolumesActionsTest-439712853", "domain_id": "default", "description": "tempest-VolumesActionsTest-439712853-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85"}}}\n'
2022-08-02 08:27:03,460 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.573s
2022-08-02 08:27:03,461 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesActionsTest-439712853-project-admin", "password": "E3+tsS%#2pIW%!A", "domain_id": "default"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:02 GMT', 'server': 'Apache', 'content-length': '292', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-093b4698-6875-4ff8-b29a-a517755364d0', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "8a9d6d47cd144a739323846b7c4946cf", "name": "tempest-VolumesActionsTest-439712853-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/8a9d6d47cd144a739323846b7c4946cf"}}}\n'
2022-08-02 08:27:03,494 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.032s
2022-08-02 08:27:03,494 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-3f4a6295-bf98-41e4-be9a-61ab4d9a4382', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c089
    8b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:03,549 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.053s
2022-08-02 08:27:03,549 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6ded092b-1b43-4f1b-82ca-de26b11edf02', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:03,632 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.082s
2022-08-02 08:27:03,633 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-b8d7a4c0-2380-46ce-83f3-eef1b29cbfcb', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:03,670 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.036s
2022-08-02 08:27:03,671 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-e0
    deda30-ea9d-4c3e-bd55-a494fe96f899', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:03,754 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.082s
2022-08-02 08:27:03,755 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-9726abda-052a-48f5-a7f7-9c23ae5d4070', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:03,834 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.078s
2022-08-02 08:27:03,835 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-b33a3546-0c52-4941-aedf-fc054b9769cb', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:03,914 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.078s
2022-08-02 08:27:03,915 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-5c43d8a6-8241-43f6-9708-c3dfb639544a', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853a
    e340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:03,955 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.039s
2022-08-02 08:27:03,956 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-de736821-2db0-46c8-8490-fffe53831a7c', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/7cd4cce4b4784f70906e89450fc68e85/users/8a9d6d47cd144a739323846b7c4946cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:03,957 4569 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user 8a9d6d47cd144a739323846b7c4946cf is created with scope project and roles: ['admin', 'admin']
2022-08-02 08:27:03,957 4569 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesActionsTest-439712853-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': '7cd4cce4b4784f70906e89450fc68e85', 'project_name': 'tempest-VolumesActionsTest-439712853', 'tenant_id': '7cd4cce4b4784f70906e89450fc68e85', 'tenant_name': 'tempest-VolumesActionsTest-439712853', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': '8a9d6d47cd144a739323846b7c4946cf', 'system': None}, Network: None, Subnet: None, Router: None
2022-08-02 08:27:03,967 4569 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_attach_detach_volume_to_instance) Found network None available for tenant
2022-08-02 08:27:04,211 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.243s
2022-08-02 08:27:04,212 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-778752586", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:03 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-86bd5815-c19a-437e-bc89-7bdee00c7cb4', 'x-compute-request-id': 'req-86bd5815-c19a-437e-bc89-7bdee00c7cb4', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "5424eecc-994e-4eb8-ab3c-3b98b59ee6e9", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "3zkPGXdGo8Zs"}}'
20
    22-08-02 08:27:04,301 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 0.084s
2022-08-02 08:27:04,302 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:04 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1321', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b6414c02-2285-4f7c-b96b-be65c81d1ffc', 'x-compute-request-id': 'req-b6414c02-2285-4f7c-b96b-be65c81d1ffc', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9'}
        Body: b'{"server": {"id": "5424eecc-994e-4eb8-ab3c-3b98b59ee6e9", "name": "tempest-VolumesActionsTest-instance-778752586", "status": "BUILD", "tenant_id": "27b3f42bd1d841148a24c5185288dd9f", "user_id": "09b2d1bc822147a9b2018d40e052b219", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:04Z", "updated": "2022-08-02T05:27:04Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:05,413 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 0.099s
2022-08-02 08:27:05,414 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:05 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4675', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-ed1a16ca-9f2a-415c-9e2e-9bf1628b2fb2', 'x-compute-request-id': 'req-ed1a16ca-9f2a-415c-9e2e-9bf1628b2fb2', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9'}
        Body: b'{"server": {"id": "5424eecc-994e-4eb8-ab3c-3b98b59ee6e9", "name": "tempest-VolumesActionsTest-instance-778752586", "status": "ERROR", "tenant_id": "27b3f42bd1d841148a24c5185288dd9f", "user_id": "09b2d1bc822147a9b2018d40e052b219", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:04Z", "updated": "2022-08-02T05:27:05Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://192.16
    8.16.202:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:05Z", "message": "Build of instance 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/
2022-08-02 08:27:05,427 4569 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:05,692 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 0.264s
2022-08-02 08:27:05,692 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:05 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'com
    pute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-f21fcc8e-14eb-4d71-9721-c2772b510ea8', 'x-compute-request-id': 'req-f21fcc8e-14eb-4d71-9721-c2772b510ea8', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9'}
        Body: b''
2022-08-02 08:27:05,728 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 0.035s
2022-08-02 08:27:05,729 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:05 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b5da36e7-3ee8-40aa-b1e2-e981fabf7a88', 'x-compute-request-id': 'req-b5da36e7-3ee8-40aa-b1e2-e981fabf7a88', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/5424eecc-994e-4eb8-ab3c-3b98b59ee6e9'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 5424eecc-994e-4eb8-ab3c-3b98b59ee6e9 could not be found."}}'


tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_get_volume_attachment[compute,id-9516a2c8-9135-488c-8dd6-5677a7e5f371]
--------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 81, in test_get_volume_attachment
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 156b37c6-1f2a-4eb4-b29a-5ae646a8921e failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:07Z', 'message': 'Build of instance 156b37c6-1f2a-4eb4-b29a-5ae646a8921e aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 156b37c6-1f2a-4eb4-b29a-5ae646a8921e aborted: Failure prepping block device.\n'}. Server boot request ID: req-8f16d8ee-454b-4062-9c47-00a6e23aa046.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:06,304 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 201 POST http://controller:5000/v3/auth/tokens 0.564s
2022-08-02 08:27:06,305 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:05 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-7861606c-8bc3-434d-a162-91e403035d91', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "09b2d1bc822147a9b2018d40e052b219", "name": "tempest-VolumesActionsTest-1909648883-project", "password_expires_at": null}, "audit_ids": ["SB9haReyS7iF8t70kvpqmg"], "expires_at": "2022-08-03T05:27:06.000000Z", "issued_at": "2022-08-02T05:27:06.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "27b3f42bd1d841148a24c5185288dd9f", "name": "tempest-VolumesActionsTest-1909648883"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27b3f42bd1d841148a24c5185288dd9f", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27b3f42bd1d84114
    8a24c5185288dd9f", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:06,314 4569 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_get_volume_attachment) Found network None available for tenant
2022-08-02 08:27:06,541 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.226s
2022-08-02 08:27:06,542 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-350620099", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:06 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-8f16d8ee-454b-4062-9c47-00a6e23aa046', 'x-compute-request-id': 'req-8f16d8ee-454b-4062-9c47-00a6e23aa046', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "156b37c6-1f2a-4eb4-b29a-5ae646a8921e", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "KXK3mxGccad5"}}'
2022-08-02 08:27:06,614 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e 0.067s
2022-08-02 08:27:06,615 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:06 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1321', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-217110e6-d98a-4d64-9566-cc40345d6b64', 'x-compute-request-id': 'req-217110e6-d98a-4d64-9566-cc40345d6b64', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e'}
        Body: b'{"server": {"id": "156b37c6-1f2a-4eb4-b29a-5ae646a8921e", "name": "tempest-VolumesActionsTest-instance-350620099", "status": "BUILD", "tenant_id": "27b3f42bd1d841148a24c5185288dd9f", "user_id": "09b2d1bc822147a9b2018d40e052b219", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:06Z", "updated": "2022-08-02T05:27:06Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}, {"rel": "bookmark", "href": "htt
    p://[LB_IP_ADDRESS]:8774/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:07,721 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e 0.094s
2022-08-02 08:27:07,722 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:07 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4675', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-41da47b0-2467-451d-b159-24e9139261f2', 'x-compute-request-id': 'req-41da47b0-2467-451d-b159-24e9139261f2', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e'}
        Body: b'{"server": {"id": "156b37c6-1f2a-4eb4-b29a-5ae646a8921e", "name": "tempest-VolumesActionsTest-instance-350620099", "status": "ERROR", "tenant_id": "27b3f42bd1d841148a24c5185288dd9f", "user_id": "09b2d1bc822147a9b2018d40e052b219", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:06Z", "updated": "2022-08-02T05:27:07Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:07Z", "message": "Build of instance 156b37c6-1f2a-4eb4-b29a-5ae646a8921e aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid
    ,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/
2022-08-02 08:27:07,733 4569 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:07,984 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e 0.251s
2022-08-02 08:27:07,985 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:07 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-00225668-2e4e-4b97-986c-744a4055b97e', 'x-compute-request-id': 'req-00225668-2e4e-4b97-986c-744a4055b97e', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e'}
        Body: b''
2022-08-02 08:27:08,023 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e 0.037s
2022-08-02 08:27:08,023 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:07 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7b684119-c14c-49b4-810d-196cfb2f5477', 'x-compute-request-id': 'req-7b684119-c14c-49b4-810d-196cfb2f5477', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/156b37c6-1f2a-4eb4-b29a-5ae646a8921e'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 156b37c6-1f2a-4eb4-b29a-5ae646a8921e could not be found."}}'


tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_attach_volumes_with_nonexistent_volume_id[compute,id-f5e56b0a-5d02-43c1-a2a7-c9b792c2e3f6,negative]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_negative.py", line 179, in test_attach_volumes_with_nonexistent_volume_id
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 9ca26f09-829c-4b47-a507-526256baff6c failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:22Z', 'message': 'Build of instance 9ca26f09-829c-4b47-a507-526256baff6c aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 9ca26f09-829c-4b47-a507-526256baff6c aborted: Failure prepping block device.\n'}. Server boot request ID: req-3cad7218-c415-413f-969d-b08738c2b913.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:19,174 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://controller:5000/v3/auth/tokens 0.501s
2022-08-02 08:27:19,175 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:18 GMT', 'server': 'Apache', 'content-length': '3890', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6d7faa5e-2967-4de4-8bae-721331eab315', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "fde46240e3e940feb5ffd1692d5b51a6", "name": "tempest-VolumesNegativeTest-1198824065-project", "password_expires_at": null}, "audit_ids": ["440UDrp_QluCBYxdr4EocA"], "expires_at": "2022-08-03T05:27:19.000000Z", "issued_at": "2022-08-02T05:27:19.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "7bf144c4a32d48a585ba92aa059ff151", "name": "tempest-VolumesNegativeTest-1198824065"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/7bf144c4a32d48a585ba92aa059ff151", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/7bf144c4a32d48a585ba92aa059ff151", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/7bf144c4a32d48a585ba92aa059ff151", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8
    774/v2/7bf144c4a32d48a585ba92aa059ff151", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:19,175 4571 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-08-02 08:27:19,963 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.786s
2022-08-02 08:27:19,963 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesNegativeTest-1653369793-desc", "domain_id": "default", "name": "tempest-VolumesNegativeTest-1653369793"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:19 GMT', 'server': 'Apache', 'content-length': '375', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-38b72888-0c73-4d10-9a27-9bb23bba86c7', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "aeaa9785755a421aa36c0c30fddbe401", "name": "tempest-VolumesNegativeTest-1653369793", "domain_id": "default", "description": "tempest-VolumesNegativeTest-1653369793-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401"}}}\n'
2022-08-02 08:27:20,534 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.569s
2022-08-02 08:27:20,535 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesNegativeTest-1653369793-project-admin", "password": "U1__mdTS%1hkBic", "domain_id": "default"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:19 GMT', 'server': 'Apache', 'content-length': '294', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-eccecbfb-660c-4ad2-a5c2-da0665f428a5', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "be76f642c2914d26959fce4a44f0c004", "name": "tempest-VolumesNegativeTest-1653369793-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/be76f642c2914d26959fce4a44f0c004"}}}\n'
2022-08-02 08:27:20,620 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.083s
2022-08-02 08:27:20,620 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-d3e1aceb-4fd8-4cce-9181-8fb56ae9e04c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"
    self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:20,677 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c 0.055s
2022-08-02 08:27:20,677 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-5cf6509e-631c-49d5-b46a-3ec440e20c1c', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:20,759 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.080s
2022-08-02 08:27:20,759 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-221fade1-1df8-44c7-be34-267ebf364ece', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:20,795 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c 0.035s
2022-08-02 08:27:20,796 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20
     GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-f504b2ed-0eb7-4eb5-bc20-a5a43bc456ac', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:20,878 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.081s
2022-08-02 08:27:20,878 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4c5e8000-cf1b-4bc5-a9c3-1dae1712bff8', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:20,922 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c 0.043s
2022-08-02 08:27:20,923 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-5e823a9d-7548-4bc0-bb1c-7cffe1c2d827', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:21,011 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.087s
2022-08-02 08:27:21,012 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:20 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-7734927d-a4d9-40c6-8424-dde320cd897b', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": 
    null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:21,052 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c 0.038s
2022-08-02 08:27:21,052 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:21 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-f0517f14-6c90-418f-99d5-c9fe499ca6a8', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/aeaa9785755a421aa36c0c30fddbe401/users/be76f642c2914d26959fce4a44f0c004/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:21,053 4571 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user be76f642c2914d26959fce4a44f0c004 is created with scope project and roles: ['admin', 'admin']
2022-08-02 08:27:21,054 4571 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesNegativeTest-1653369793-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': 'aeaa9785755a421aa36c0c30fddbe401', 'project_name': 'tempest-VolumesNegativeTest-1653369793', 'tenant_id': 'aeaa9785755a421aa36c0c30fddbe401', 'tenant_name': 'tempest-VolumesNegativeTest-1653369793', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'be76f642c2914d26959fce4a44f0c004', 'system': None}, Network: None, Subnet: None, Router: None
2022-08-02 08:27:21,114 4571 INFO     [tempest.lib.common.fixed_network] (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id) Found network None available for tenant
2022-08-02 08:27:21,356 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.241s
2022-08-02 08:27:21,357 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesNegativeTest-instance-863425057", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:21 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-3cad7218-c415-413f-969d-b08738c2b913', 'x-compute-request-id': 'req-3cad7218-c415-413f-969d-b08738c2b913', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "9ca26f09-829c-4b47-a507-526256baff6c", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/serv
    ers/9ca26f09-829c-4b47-a507-526256baff6c"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "X2YokuikYYJv"}}'
2022-08-02 08:27:21,432 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c 0.070s
2022-08-02 08:27:21,433 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:21 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-30280f71-ba10-448e-9c1c-3503124d49cf', 'x-compute-request-id': 'req-30280f71-ba10-448e-9c1c-3503124d49cf', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c'}
        Body: b'{"server": {"id": "9ca26f09-829c-4b47-a507-526256baff6c", "name": "tempest-VolumesNegativeTest-instance-863425057", "status": "BUILD", "tenant_id": "7bf144c4a32d48a585ba92aa059ff151", "user_id": "fde46240e3e940feb5ffd1692d5b51a6", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:21Z", "updated": "2022-08-02T05:27:21Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/9ca26f09-829c-4b47-a507-526256baff6c"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:22,543 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c 0.098s
2022-08-02 08:27:22,544 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:22 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4676', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-5b6bb99c-d56a-49dc-b19e-d7fa7a84eb87', 'x-compute-request-id': 'req-5b6bb99c-d56a-49dc-b19e-d7fa7a84eb87', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c'}
        Body: b'{"server": {"id": "9ca26f09-829c-4b47-a507-526256baff6c", "name": "tempest-VolumesNegativeTest-instance-863425057", "status": "ERROR", "tenant_id": "7bf144c4a32d48a585ba92aa059ff151", "user_id": "fde46240e3e940feb5ffd1692d5b51a6", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}
    , "created": "2022-08-02T05:27:21Z", "updated": "2022-08-02T05:27:22Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/9ca26f09-829c-4b47-a507-526256baff6c"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:22Z", "message": "Build of instance 9ca26f09-829c-4b47-a507-526256baff6c aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute
2022-08-02 08:27:22,556 4571 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:22,970 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c 0.413s
2022-08-02 08:27:22,971 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json
    ', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:22 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-cc98ce0d-7a12-4ba6-9515-a501d1fa5091', 'x-compute-request-id': 'req-cc98ce0d-7a12-4ba6-9515-a501d1fa5091', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c'}
        Body: b''
2022-08-02 08:27:23,006 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c 0.034s
2022-08-02 08:27:23,006 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:22 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b1c13136-6ace-4d3a-912a-5fb2bb9d0f80', 'x-compute-request-id': 'req-b1c13136-6ace-4d3a-912a-5fb2bb9d0f80', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/9ca26f09-829c-4b47-a507-526256baff6c'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 9ca26f09-829c-4b47-a507-526256baff6c could not be found."}}'


tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_delete_with_volume_in_use[compute,id-8567b54c-4455-446d-a1cf-651ddeaa3ff2]
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_snapshots.py", line 48, in test_snapshot_create_delete_with_volume_in_use
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 47044cfd-c79a-441b-ac98-313f6703e4e9 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:33Z', 'message': 'Build of instance 47044cfd-c79a-441b-ac98-313f6703e4e9 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 47044cfd-c79a-441b-ac98-313f6703e4e9 aborted: Failure prepping block device.\n'}. Server boot request ID: req-5005c792-f071-4d71-ba6d-80e880f1bd19.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:31,204 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://controller:5000/v3/auth/tokens 0.562s
2022-08-02 08:27:31,204 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:30 GMT', 'server': 'Apache', 'content-length': '3898', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-e7aedde8-3739-411b-b7b2-8aa517d042be', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "506929844ff64164aecd274db900a939", "name": "tempest-VolumesSnapshotTestJSON-1470293109-project", "password_expires_at": null}, "audit_ids": ["G6NJ9NIaTs2VHoPoK0awfw"], "expires_at": "2022-08-03T05:27:31.000000Z", "issued_at": "2022-08-02T05:27:31.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "3a41cb28974b4d7c959c0e0586fc9193", "name": "tempest-VolumesSnapshotTestJSON-1470293109"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://192.
    168.16.202:8774/v2/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:31,205 4571 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-08-02 08:27:31,299 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.093s
2022-08-02 08:27:31,300 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesSnapshotTestJSON-347464651-desc", "domain_id": "default", "name": "tempest-VolumesSnapshotTestJSON-347464651"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'content-length': '381', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-02fba8b8-e790-47e0-a3ef-e58e30df17db', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "b1d03be88d7d43a3be849a4d90ff5b70", "name": "tempest-VolumesSnapshotTestJSON-347464651", "domain_id": "default", "description": "tempest-VolumesSnapshotTestJSON-347464651-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70"}}}\n'
2022-08-02 08:27:31,871 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.569s
2022-08-02 08:27:31,871 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesSnapshotTestJSON-347464651-project-admin", "password": "I3!hNdAoVDBHjRj", "domain_id": "default"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'content-length': '297', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-1e894c8c-b17c-439b-b18a-15404a2cedc0', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "d8eed37051554334a770e92cc7df29ed", "name": "tempest-VolumesSnapshotTestJSON-347464651-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/d8eed37051554334a770e92cc7df29ed"}}}\n'
2022-08-02 08:27:31,902 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.030s
2022-08-02 08:27:31,903 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-be2709fe-113c-40e4-b9cd-2df46a593448', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "desc
    ription": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:31,956 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c 0.052s
2022-08-02 08:27:31,957 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-2ec2180f-3c8d-45c3-8f54-104d5fb9c9d7', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:32,035 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.077s
2022-08-02 08:27:32,035 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:31 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-81c4bcad-8603-4061-abf5-b70a814776d6', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:32,075 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c 0.038s
2022-08-02 08:27:32,076 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    R
    esponse - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-0df9d0c3-7015-4676-95e4-5ba3f6f8f6be', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:32,162 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.085s
2022-08-02 08:27:32,163 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-a43b4516-1e1e-4f69-8efd-f3b345f48e85', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:32,200 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c 0.036s
2022-08-02 08:27:32,200 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-ea401f06-347e-432a-9416-3e0c4e8e745b', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:32,296 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.095s
2022-08-02 08:27:32,297 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-e0d2127d-0569-4143-b251-4767985c7faa', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae
    340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 08:27:32,332 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c 0.034s
2022-08-02 08:27:32,332 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-c78d8ce6-59fd-486a-876a-8ae4560e80d1', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/b1d03be88d7d43a3be849a4d90ff5b70/users/d8eed37051554334a770e92cc7df29ed/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 08:27:32,333 4571 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user d8eed37051554334a770e92cc7df29ed is created with scope project and roles: ['admin', 'admin']
2022-08-02 08:27:32,333 4571 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesSnapshotTestJSON-347464651-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': 'b1d03be88d7d43a3be849a4d90ff5b70', 'project_name': 'tempest-VolumesSnapshotTestJSON-347464651', 'tenant_id': 'b1d03be88d7d43a3be849a4d90ff5b70', 'tenant_name': 'tempest-VolumesSnapshotTestJSON-347464651', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'd8eed37051554334a770e92cc7df29ed', 'system': None}, Network: None, Subnet: None, Router: None
2022-08-02 08:27:32,344 4571 INFO     [tempest.lib.common.fixed_network] (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use) Found network None available for tenant
2022-08-02 08:27:32,585 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.240s
2022-08-02 08:27:32,586 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesSnapshotTestJSON-instance-1325970618", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-5005c792-f071-4d71-ba6d-80e880f1bd19', 'x-compute-request-id': 'req-5005c792-f071-4d71-ba6d-80e880f1bd19', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "47044cfd-c79a-441b-ac98-313f6703e4e9", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd
    -c79a-441b-ac98-313f6703e4e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "dQ74agattAkc"}}'
2022-08-02 08:27:32,665 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9 0.074s
2022-08-02 08:27:32,666 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1327', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-f9c07d23-69d3-4644-99fe-d00a92e73c87', 'x-compute-request-id': 'req-f9c07d23-69d3-4644-99fe-d00a92e73c87', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9'}
        Body: b'{"server": {"id": "47044cfd-c79a-441b-ac98-313f6703e4e9", "name": "tempest-VolumesSnapshotTestJSON-instance-1325970618", "status": "BUILD", "tenant_id": "3a41cb28974b4d7c959c0e0586fc9193", "user_id": "506929844ff64164aecd274db900a939", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:32Z", "updated": "2022-08-02T05:27:32Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:33,781 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9 0.100s
2022-08-02 08:27:33,781 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:33 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4681', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-effda547-00ac-4456-a2e8-d1f89af15cdc', 'x-compute-request-id': 'req-effda547-00ac-4456-a2e8-d1f89af15cdc', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9'}
        Body: b'{"server": {"id": "47044cfd-c79a-441b-ac98-313f6703e4e9", "name": "tempest-VolumesSnapshotTestJSON-instance-1325970618", "status": "ERROR", "tenant_id": "3a41cb28974b4d7c959c0e0586fc9193", "user_id": "506929844ff64164aecd274db900a939", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326
    b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:32Z", "updated": "2022-08-02T05:27:33Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/47044cfd-c79a-441b-ac98-313f6703e4e9"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:33Z", "message": "Build of instance 47044cfd-c79a-441b-ac98-313f6703e4e9 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/co
2022-08-02 08:27:33,793 4571 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:34,044 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9 0.250s
2022-08-02 08:27:34,045 4571 DEBUG    [tempes
    t.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:33 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-61ff2513-24a3-4f53-89c5-1c60248eed0f', 'x-compute-request-id': 'req-61ff2513-24a3-4f53-89c5-1c60248eed0f', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9'}
        Body: b''
2022-08-02 08:27:34,080 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9 0.035s
2022-08-02 08:27:34,081 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:34 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-37b8e743-6f3c-43fa-9363-04d3daffd572', 'x-compute-request-id': 'req-37b8e743-6f3c-43fa-9363-04d3daffd572', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/47044cfd-c79a-441b-ac98-313f6703e4e9'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 47044cfd-c79a-441b-ac98-313f6703e4e9 could not be found."}}'


tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_offline_delete_online[compute,id-5210a1de-85a0-11e6-bb21-641c676a5d61]
-------------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_snapshots.py", line 83, in test_snapshot_create_offline_delete_online
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 562e8056-b9e5-45ea-b181-55d7ba95aff5 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:41Z', 'message': 'Build of instance 562e8056-b9e5-45ea-b181-55d7ba95aff5 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 562e8056-b9e5-45ea-b181-55d7ba95aff5 aborted: Failure prepping block device.\n'}. Server boot request ID: req-873eef97-919d-4e8d-823c-6d00086289da.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:37,813 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 202 POST http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots 0.161s
2022-08-02 08:27:37,813 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"snapshot": {"volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "name": "tempest-VolumesSnapshotTestJSON-Snapshot-751442025"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:37 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '309', 'x-compute-request-id': 'req-91d2febd-2253-489c-ab14-e0f69cf09a12', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-91d2febd-2253-489c-ab14-e0f69cf09a12', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots'}
        Body: b'{"snapshot": {"id": "58a72f8a-9424-4cf7-a76b-6c94c1bb879f", "created_at": "2022-08-02T05:27:37.768734", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Snapshot-751442025", "description": null, "volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "status": "creating", "size": 1, "metadata": {}}}'
2022-08-02 08:27:37,843 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f 0.024s
2022-08-02 08:27:37,843 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:37 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '441', 'x-compute-request-id': 'req-11b90004-ff41-47c1-b852-3b90c3772f2b', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-11b90004-ff41-47c1-b852-3b90c3772f2b', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f'}
        Body: b'{"snapshot": {"id": "58a72f8a-9424-4cf7-a76b-6c94c1bb879f", "created_at": "2022-08-02T05:27:37.000000", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Snapshot-751442025", "description": null, "volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "status": "creating", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "3a41cb28974b4d7c959c0e0586fc9193", "os-extended-snapshot-attributes:progress": "0%"}}'
2022-08-02 08:27:38,875 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f 0.026s
2022-08-02 08:27:38,876 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:38 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '441', 'x-compute-request-id': 'req-6872cfbc-3359-467c-a950-5c3d3e1ae830', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-6872cfbc-3359-467c-a950-5c3d3e1ae830', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f'}
        Body: b'{"snapshot": {"id": "58a72f8a-9424-4cf7-a76b-6c94c1bb879f", "created_at": "2022-08-02T05:27:37.000000", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Sn
    apshot-751442025", "description": null, "volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "status": "creating", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "3a41cb28974b4d7c959c0e0586fc9193", "os-extended-snapshot-attributes:progress": "0%"}}'
2022-08-02 08:27:39,908 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f 0.026s
2022-08-02 08:27:39,909 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:39 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '468', 'x-compute-request-id': 'req-bcb54af9-199c-469b-9631-4466f827cdb9', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-bcb54af9-199c-469b-9631-4466f827cdb9', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193/snapshots/58a72f8a-9424-4cf7-a76b-6c94c1bb879f'}
        Body: b'{"snapshot": {"id": "58a72f8a-9424-4cf7-a76b-6c94c1bb879f", "created_at": "2022-08-02T05:27:37.000000", "updated_at": "2022-08-02T05:27:39.000000", "name": "tempest-VolumesSnapshotTestJSON-Snapshot-751442025", "description": null, "volume_id": "fe3529a1-a33d-4390-81d4-137a9d3de937", "status": "available", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "3a41cb28974b4d7c959c0e0586fc9193", "os-extended-snapshot-attributes:progress": "100%"}}'
2022-08-02 08:27:39,914 4571 INFO     [tempest.common.waiters] snapshot 58a72f8a-9424-4cf7-a76b-6c94c1bb879f reached available after waiting for 2.914292 seconds
2022-08-02 08:27:40,495 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 201 POST http://controller:5000/v3/auth/tokens 0.571s
2022-08-02 08:27:40,495 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:39 GMT', 'server': 'Apache', 'content-length': '3898', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-9b7061c9-406d-4de2-a594-767d4219f96e', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "506929844ff64164aecd274db900a939", "name": "tempest-VolumesSnapshotTestJSON-1470293109-project", "password_expires_at": null}, "audit_ids": ["GXs8gx7BSpi096cCKm9H8A"], "expires_at": "2022-08-03T05:27:40.000000Z", "issued_at": "2022-08-02T05:27:40.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "3a41cb28974b4d7c959c0e0586fc9193", "name": "tempest-VolumesSnapshotTestJSON-1470293109"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "inte
    rface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/3a41cb28974b4d7c959c0e0586fc9193", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:40,505 4571 INFO     [tempest.lib.common.fixed_network] (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online) Found network None available for tenant
2022-08-02 08:27:40,731 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.224s
2022-08-02 08:27:40,731 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesSnapshotTestJSON-instance-1719997459", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-873eef97-919d-4e8d-823c-6d00086289da', 'x-compute-request-id': 'req-873eef97-919d-4e8d-823c-6d00086289da', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "562e8056-b9e5-45ea-b181-55d7ba95aff5", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}, {"rel": "
    bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "iZK7kcyzp8iW"}}'
2022-08-02 08:27:40,808 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5 0.072s
2022-08-02 08:27:40,809 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1327', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d97a7b1d-a12a-4117-9221-0408314a921b', 'x-compute-request-id': 'req-d97a7b1d-a12a-4117-9221-0408314a921b', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5'}
        Body: b'{"server": {"id": "562e8056-b9e5-45ea-b181-55d7ba95aff5", "name": "tempest-VolumesSnapshotTestJSON-instance-1719997459", "status": "BUILD", "tenant_id": "3a41cb28974b4d7c959c0e0586fc9193", "user_id": "506929844ff64164aecd274db900a939", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:40Z", "updated": "2022-08-02T05:27:40Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:41,917 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5 0.096s
2022-08-02 08:27:41,918 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4681', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-25249c68-a983-45be-b58d-84c7f243ba02', 'x-compute-request-id': 'req-25249c68-a983-45be-b58d-84c7f243ba02', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5'}
        Body: b'{"server": {"id": "562e8056-b9e5-45ea-b181-55d7ba95aff5", "name": "tempest-VolumesSnapshotTestJSON-instance-1719997459", "status": "ERROR", "tenant_id": "3a41cb28974b4d7c959c0e0586fc9193", "user_id": "506929844ff64164aecd274db900a939", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": 
    "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:40Z", "updated": "2022-08-02T05:27:41Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:41Z", "message": "Build of instance 562e8056-b9e5-45ea-b181-55d7ba95aff5 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/co
2022-08-02 08:27:41,929 4571 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:42,218 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5 0.288s
2022-08-02 08:27:42,218 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Conten
    t-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-cacb7fc9-5748-4eb6-bf85-3656e0130f28', 'x-compute-request-id': 'req-cacb7fc9-5748-4eb6-bf85-3656e0130f28', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5'}
        Body: b''
2022-08-02 08:27:42,253 4571 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5 0.033s
2022-08-02 08:27:42,253 4571 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-9f4740bb-e138-4693-a7e7-f0a6301f70d9', 'x-compute-request-id': 'req-9f4740bb-e138-4693-a7e7-f0a6301f70d9', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/562e8056-b9e5-45ea-b181-55d7ba95aff5'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 562e8056-b9e5-45ea-b181-55d7ba95aff5 could not be found."}}'


tempest.api.volume.test_volumes_extend.VolumesExtendAttachedTest.test_extend_attached_volume[compute,id-301f5a30-1c6f-4ea0-be1a-91fd28d44354]
---------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_extend.py", line 187, in test_extend_attached_volume
    self._test_extend_attached_volume(volume)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_extend.py", line 117, in _test_extend_attached_volume
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server da803025-baac-41db-9aeb-f27e5aad3053 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T05:27:42Z', 'message': 'Build of instance da803025-baac-41db-9aeb-f27e5aad3053 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance da803025-baac-41db-9aeb-f27e5aad3053 aborted: Failure prepping block device.\n'}. Server boot request ID: req-03c07e84-23c5-4050-8e08-83117a81dba1.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 08:27:38,732 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 202 POST http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes 0.558s
2022-08-02 08:27:38,732 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: {"volume": {"size": 1, "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:38 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '892', 'x-compute-request-id': 'req-91a748b2-ba64-4533-8e71-9b17c0644d5c', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-91a748b2-ba64-4533-8e71-9b17c0644d5c', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes'}
        Body: b'{"volume": {"id": "c40609bf-637c-455d-8fe0-4c2393c92a88", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-08-02T05:27:38.668983", "updated_at": null, "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}], "user_id": "955e6cab114d4f0580de39d9ddf821b2", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null}}'
2022-08-02 08:27:38,789 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88 0.042s
2022-08-02 08:27:38,790 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:38 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1071', 'x-compute-request-id': 'req-a3e8ea35-e674-4f6f-8b21-20376236c376', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-a3e8ea35-e674-4f6f-8b21-20376236c376', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88'}
        Body: b'{"volume": {"id": "c40609bf-637c-455d-8fe0-4c2393c92a88", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-08-02T05:27:38.000000", "updated_at": null, "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}], "user_id": "955e6cab114d4f0580de39d9ddf821b2", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": null, "os-vol-tenant-attr:tenant_id": "040fc79fc14d49c987f9ad715e629745", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id
    ": null}}'
2022-08-02 08:27:39,850 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88 0.048s
2022-08-02 08:27:39,851 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:39 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1129', 'x-compute-request-id': 'req-61473a3b-f0c0-4058-995b-c9ca0a312167', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-61473a3b-f0c0-4058-995b-c9ca0a312167', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88'}
        Body: b'{"volume": {"id": "c40609bf-637c-455d-8fe0-4c2393c92a88", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-08-02T05:27:38.000000", "updated_at": "2022-08-02T05:27:38.000000", "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}], "user_id": "955e6cab114d4f0580de39d9ddf821b2", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": "rack03-server59@LIGHTOSsetykm#setykm", "os-vol-tenant-attr:tenant_id": "040fc79fc14d49c987f9ad715e629745", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null}}'
2022-08-02 08:27:40,907 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88 0.043s
2022-08-02 08:27:40,907 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1130', 'x-compute-request-id': 'req-116ce27e-6c47-43ec-8a8a-214668608eb7', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-116ce27e-6c47-43ec-8a8a-214668608eb7', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88'}
        Body: b'{"volume": {"id": "c40609bf-637c-455d-8fe0-4c2393c92a88", "status": "available", "size": 1, "availability_zone": "nova", "created_at": "2022-08-02T05:27:38.000000", "updated_at": "2022-08-02T05:27:40.000000", "name": "tempest-VolumesExtendAttachedTest-Volume-2075545483", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/040fc79fc14d49c987f9ad715e629745/volumes/c40609bf-637c-455d-8fe0-4c2393c92a88"}], "user_id": "955e6cab114d4f0580de39d9ddf821b2", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattac
    h": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": "rack03-server59@LIGHTOSsetykm#setykm", "os-vol-tenant-attr:tenant_id": "040fc79fc14d49c987f9ad715e629745", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null}}'
2022-08-02 08:27:40,919 4569 INFO     [tempest.common.waiters] volume c40609bf-637c-455d-8fe0-4c2393c92a88 reached available after waiting for 2.919112 seconds
2022-08-02 08:27:41,432 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 201 POST http://controller:5000/v3/auth/tokens 0.508s
2022-08-02 08:27:41,432 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:40 GMT', 'server': 'Apache', 'content-length': '3902', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-1de3c5ed-e65e-4570-8615-db3ce849a90d', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "955e6cab114d4f0580de39d9ddf821b2", "name": "tempest-VolumesExtendAttachedTest-1123876583-project", "password_expires_at": null}, "audit_ids": ["z8MLS3beQNagws_2GgnWCA"], "expires_at": "2022-08-03T05:27:41.000000Z", "issued_at": "2022-08-02T05:27:41.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "040fc79fc14d49c987f9ad715e629745", "name": "tempest-VolumesExtendAttachedTest-1123876583"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/040fc79fc14d49c987f9ad715e629745", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/040
    fc79fc14d49c987f9ad715e629745", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/040fc79fc14d49c987f9ad715e629745", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/040fc79fc14d49c987f9ad715e629745", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 08:27:41,442 4569 INFO     [tempest.lib.common.fixed_network] (VolumesExtendAttachedTest:test_extend_attached_volume) Found network None available for tenant
2022-08-02 08:27:41,679 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.236s
2022-08-02 08:27:41,680 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesExtendAttachedTest-instance-1558297019", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-03c07e84-23c5-4050-8e08-83117a81dba1', 'x-compute-request-id': 'req-03c07e84-23c5-4050-8e08-83117a81dba1', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "da803025-baac-41db-9aeb-f27e5aad3053", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/da803025-baac-41db-9aeb-f27e5aad3053"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "XWY5rZQQV3kN"}}'
2022-08-02 08:27:41,762 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053 0.078s
2022-08-02 08:27:41,763 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1329', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-cff3af1c-fe2c-41a2-923b-a4c2fed4cb97', 'x-compute-request-id': 'req-cff3af1c-fe2c-41a2-923b-a4c2fed4cb97', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053'}
        Body: b'{"server": {"id": "da803025-baac-41db-9aeb-f27e5aad3053", "name": "tempest-VolumesExtendAttachedTest-instance-1558297019", "status": "BUILD", "tenant_id": "040fc79fc14d49c987f9ad715e629745", "user_id": "955e6cab114d4f0580de39d9ddf821b2", "metadata": {}, "hostId": "", "image": {"i
    d": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:41Z", "updated": "2022-08-02T05:27:41Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/da803025-baac-41db-9aeb-f27e5aad3053"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 08:27:42,874 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053 0.097s
2022-08-02 08:27:42,874 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4683', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-e746d0c5-5c0e-4593-9a44-8c52a4d5ea36', 'x-compute-request-id': 'req-e746d0c5-5c0e-4593-9a44-8c52a4d5ea36', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053'}
        Body: b'{"server": {"id": "da803025-baac-41db-9aeb-f27e5aad3053", "name": "tempest-VolumesExtendAttachedTest-instance-1558297019", "status": "ERROR", "tenant_id": "040fc79fc14d49c987f9ad715e629745", "user_id": "955e6cab114d4f0580de39d9ddf821b2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T05:27:41Z", "updated": "2022-08-02T05:27:42Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/da803025-baac-41db-9aeb-f27e5aad3053"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T05:27:42Z", "message": "Build of instance da803025-baac-41db-9aeb-f27e5aad3053 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device
    _info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/
2022-08-02 08:27:42,886 4569 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 08:27:43,158 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053 0.271s
2022-08-02 08:27:43,158 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-2417eb8a-bd26-4e9f-b880-7e03cfd74f1e', 'x-compute-request-id': 'req-2417eb8a-bd26-4e9f-b880-7e03cfd74f1e', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053'}
        Body: b''
2022-08-02 08:27:43,195 4569 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053 0.035s
2022-08-02 08:27:43,195 4569 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 05:27:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-10e2c714-52df-4420-aec7-73bd1077c177', 'x-compute-request-id': 'req-10e2c714-52df-4420-aec7-73bd1077c177', 'connection': 'close', 'content-type': 'application/json; charse
    t=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/da803025-baac-41db-9aeb-f27e5aad3053'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance da803025-baac-41db-9aeb-f27e5aad3053 could not be found."}}'



======
Totals
======
Ran: 219 tests in 265.0791 sec.
 - Passed: 205
 - Skipped: 6
 - Expected Fail: 0
 - Unexpected Success: 0
 - Failed: 8
Sum of execute time for each test: 401.9972 sec.

==============
Worker Balance
==============
 - Worker 0 (58 tests) => 0:04:13.667005
 - Worker 1 (64 tests) => 0:03:53.323978
 - Worker 2 (97 tests) => 0:04:23.170306
