{1} tempest.api.volume.admin.test_backends_capabilities.BackendsCapabilitiesAdminTestsJSON.test_compare_volume_stats_values [0.087419s] ... ok
{1} tempest.api.volume.admin.test_backends_capabilities.BackendsCapabilitiesAdminTestsJSON.test_get_capabilities_backend [0.044701s] ... ok
{2} tempest.api.compute.volumes.test_volumes_get.VolumesGetTestJSON.test_volume_create_get_delete [2.222333s] ... ok
{1} tempest.api.volume.admin.test_encrypted_volumes_extend.EncryptedVolumesExtendAttachedTest.test_extend_attached_encrypted_volume_luksv1 ... SKIPPED: Attached encrypted volume extend is disabled.
{1} tempest.api.volume.admin.test_group_type_specs.GroupTypeSpecsTest.test_group_type_specs_create_show_update_list_delete [0.610002s] ... ok
{2} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list [0.077135s] ... ok
{2} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_param_limit [0.074544s] ... ok
{2} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_param_offset_and_limit [0.159212s] ... ok
{2} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_detail_param_limit [0.077836s] ... ok
{2} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_detail_param_offset_and_limit [0.157280s] ... ok
{2} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_details [0.073639s] ... ok
{1} tempest.api.volume.admin.test_group_types.GroupTypesTest.test_group_type_create_list_update_show_delete [0.382268s] ... ok
{1} tempest.api.volume.admin.test_group_types.GroupTypesTest.test_group_type_list_by_optional_params [0.255229s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_invalid_size [0.178715s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_zero [0.017779s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_without_passing_size [0.015310s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_delete_invalid_volume_id [0.049621s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_delete_volume_without_passing_volume_id [0.013372s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_get_volume_without_passing_volume_id [0.011603s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_volume_delete_nonexistent_volume_id [0.049695s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_volume_get_nonexistent_volume_id [0.048143s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_boot_from_multiattach_volume [24.474211s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_list_get_volume_attachments_multiattach [2.678220s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/api/compute/volumes/test_attach_volume.py", line 406, in test_list_get_volume_attachments_multiattach
    servers, volume, attachments = self._create_and_multiattach()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/compute/volumes/test_attach_volume.py", line 389, in _create_and_multiattach
    'ACTIVE')

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 63f9c707-7b4c-4438-9d52-7a9bf4a1b223 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T07:58:36Z', 'message': 'Build of instance 63f9c707-7b4c-4438-9d52-7a9bf4a1b223 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 63f9c707-7b4c-4438-9d52-7a9bf4a1b223 aborted: Failure prepping block device.\n'}.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 10:58:35,263 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 201 POST http://controller:5000/v3/auth/tokens 0.578s
2022-07-27 10:58:35,263 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:34 GMT', 'server': 'Apache', 'content-length': '3904', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-c7bcdfc1-92a8-4705-937e-c6df97631359', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "e1cc31f6eb7b4c7db332544e032a731a", "name": "tempest-AttachVolumeMultiAttachTest-179970713-project", "password_expires_at": null}, "audit_ids": ["UU2gmGd1TNWcBSezMbdXUw"], "expires_at": "2022-07-28T07:58:35.000000Z", "issued_at": "2022-07-27T07:58:35.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "27e2edc683cb475e8cdd939cfa6d9ba7", "name": "tempest-AttachVolumeMultiAttachTest-179970713"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "h
    ttp://[LB_IP_ADDRESS]:8774/v2/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 10:58:35,272 11637 INFO     [tempest.lib.common.fixed_network] (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach) Found network None available for tenant
2022-07-27 10:58:35,419 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.145s
2022-07-27 10:58:35,420 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "multiattach-server-0", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0", "networks": "none"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:35 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7242d342-7e89-4954-9636-383f7db8298c', 'x-compute-request-id': 'req-7242d342-7e89-4954-9636-383f7db8298c', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "63f9c707-7b4c-4438-9d52-7a9bf4a1b223", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "Agx2fLvTQGfi"}}'
2022-07-27 10:58:35,980 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 201 POST http://controller:5000/v3/auth/tokens 0.549s
2022-07-27 10:58:35,981 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:35 GMT', 'server': 'Apache', 'content-length': '3904', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-158651db-279b-4748-8fc3-0c626d038f19', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "e1cc31f6eb7b4c7db332544e032a731a", "name": "tempest-AttachVolumeMultiAttachTest-179970713-project", "password_expires_at": null}, "audit_ids": ["nXtf47vQReeIDT5IqChhUQ"], "expires_at": "2022-07-28T07:58:35.000000Z", "issued_at": "2022-07-27T07:58:35.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "27e2edc683cb475e8cdd939cfa6d9ba7", "name": "tempest-AttachVolumeMultiAttachTest-179970713"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region
    ": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 10:58:35,991 11637 INFO     [tempest.lib.common.fixed_network] (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach) Found network None available for tenant
2022-07-27 10:58:36,125 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.132s
2022-07-27 10:58:36,126 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "multiattach-server-1", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0", "networks": "none"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:35 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/ff48a141-d3e8-4510-900f-e2e2311bb9f5', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-
    API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-be8e9ba2-0dd2-4fdb-b7dc-0e8ebc056ec0', 'x-compute-request-id': 'req-be8e9ba2-0dd2-4fdb-b7dc-0e8ebc056ec0', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "ff48a141-d3e8-4510-900f-e2e2311bb9f5", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/ff48a141-d3e8-4510-900f-e2e2311bb9f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/ff48a141-d3e8-4510-900f-e2e2311bb9f5"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "Zv2EskCBLYsK"}}'
2022-07-27 10:58:36,228 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223 0.098s
2022-07-27 10:58:36,229 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:36 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1760', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-1dab75c3-30a0-408d-b7e1-a48c80618908', 'x-compute-request-id': 'req-1dab75c3-30a0-408d-b7e1-a48c80618908', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223'}
        Body: b'{"server": {"id": "63f9c707-7b4c-4438-9d52-7a9bf4a1b223", "name": "multiattach-server-0", "status": "BUILD", "tenant_id": "27e2edc683cb475e8cdd939cfa6d9ba7", "user_id": "e1cc31f6eb7b4c7db332544e032a731a", "metadata": {}, "hostId": "b5e3eb1f7d8bdd92948a352c262ccb537e00c6a055c611e52a038708", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"vcpus": 2, "ram": 1024, "disk": 1, "ephemeral": 0, "swap": 0, "original_name": "m1.nano", "extra_specs": {}}, "created": "2022-07-27T07:58:35Z", "updated": "2022-07-27T07:58:36Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "nova", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": "rack05-server76", "OS-EXT-SRV-ATTR:instance_name": "instance-0000036a", "OS-EXT-SRV-ATTR:hypervisor_hostname": "rack05-server76", "OS-EXT-SRV-ATTR:reservation_id": "r-fq1dfwmv", "OS-EXT-SRV-ATTR:launch_index": 0, "OS-EXT-SRV-ATTR:hostname": "multiattach-server-0", "OS-EXT-SRV-ATTR:kernel_id": "", "OS-EXT-SRV-ATTR:ramdisk_id": "", "OS-EXT-SRV-ATTR:root_device_name": null, "OS-EXT-SRV-ATTR:user_data": null, "OS-EXT-STS:task_state": null, "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": [], "host_status": "UP", "locked": false, "description": null, "tags": []}}'
2022-07-27 10:58:37,341 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223 0.097s
2022-07-27 10:58:37,342 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'d
    ate': 'Wed, 27 Jul 2022 07:58:37 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '5023', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-e32f3950-ff29-4d18-b384-bbfe4b234c74', 'x-compute-request-id': 'req-e32f3950-ff29-4d18-b384-bbfe4b234c74', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223'}
        Body: b'{"server": {"id": "63f9c707-7b4c-4438-9d52-7a9bf4a1b223", "name": "multiattach-server-0", "status": "ERROR", "tenant_id": "27e2edc683cb475e8cdd939cfa6d9ba7", "user_id": "e1cc31f6eb7b4c7db332544e032a731a", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"vcpus": 2, "ram": 1024, "disk": 1, "ephemeral": 0, "swap": 0, "original_name": "m1.nano", "extra_specs": {}}, "created": "2022-07-27T07:58:35Z", "updated": "2022-07-27T07:58:36Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T07:58:36Z", "message": "Build of instance 63f9c707-7b4c-4438-9d52-7a9bf4a1b223 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-package
    s/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manage
2022-07-27 10:58:37,355 11637 INFO     [tempest.common.waiters] State transition "BUILD/None" ==> "ERROR/None" after 1 second wait

{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_resize_server_with_multiattached_volume ... SKIPPED: Resize not available.
{1} tempest.api.volume.admin.test_groups.GroupsV314Test.test_create_group_from_group [9.572379s] ... ok
{1} setUpClass (tempest.api.volume.admin.test_snapshot_manage.SnapshotManageAdminTest) ... SKIPPED: Manage snapshot tests are disabled
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_create_group_from_group_snapshot [12.133029s] ... ok
{1} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_reset_snapshot_status [0.283692s] ... ok
{1} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_creating [3.530113s] ... ok
{1} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_deleting [3.533622s] ... ok
{1} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_error [3.531272s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_snapshot_volume_backed_multiattach [26.344911s] ... ok
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_delete_group_snapshots_following_updated_volumes [17.095792s] ... ok
{1} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_error_deleting [3.527982s] ... ok
{1} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_update_snapshot_status [0.241987s] ... ok
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_group_snapshot_create_show_list_delete [8.859483s] ... ok
{1} tempest.api.volume.admin.test_user_messages.UserMessagesTest.test_delete_message [1.979873s] ... ok
{1} tempest.api.volume.admin.test_user_messages.UserMessagesTest.test_list_show_messages [1.570875s] ... ok
{0} tempest.api.compute.volumes.test_volume_snapshots.VolumesSnapshotsTestJSON.test_volume_snapshot_create_get_list_delete [6.490763s] ... ok
{1} tempest.api.volume.admin.test_volume_hosts.VolumeHostsAdminTestsJSON.test_list_hosts [0.152290s] ... ok
{1} tempest.api.volume.admin.test_volume_hosts.VolumeHostsAdminTestsJSON.test_show_host [0.230352s] ... ok
{2} tempest.api.volume.admin.test_groups.GroupsTest.test_group_create_show_list_delete [8.230036s] ... ok
{1} tempest.api.volume.admin.test_volume_pools.VolumePoolsAdminTestsJSON.test_get_pools_without_details [0.153364s] ... ok
{0} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsV319Test.test_reset_group_snapshot_status [9.208313s] ... ok
{1} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_delete_quota [0.540834s] ... ok
{1} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_list_default_quotas [0.067352s] ... ok
{1} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_list_quotas [0.082979s] ... ok
{2} tempest.api.volume.admin.test_groups.GroupsTest.test_group_update [10.142596s] ... ok
{2} setUpClass (tempest.api.volume.admin.test_multi_backend.VolumeMultiBackendTest) ... SKIPPED: Cinder multi-backend feature disabled
{1} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_quota_usage [3.996240s] ... ok
{0} tempest.api.volume.admin.test_groups.GroupsV320Test.test_reset_group_status [3.042253s] ... ok
{0} setUpClass (tempest.api.volume.admin.test_volume_manage.VolumeManageAdminTest) ... SKIPPED: Manage volume tests are disabled
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_associate_disassociate_qos [0.419823s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_back_end_consumer [0.125806s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_both_consumer [0.126820s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_front_end_consumer [0.127182s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_get_qos [0.026701s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_list_qos [0.028120s] ... ok
{2} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_set_unset_qos_key [0.157329s] ... ok
{1} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_quota_usage_after_volume_transfer [4.750364s] ... ok
{1} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_show_quota_usage [0.099184s] ... ok
{1} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_update_all_quota_resources_for_tenant [0.370464s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_quota_volume_gigabytes [0.292182s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_quota_volumes [0.306178s] ... ok
{2} tempest.api.volume.admin.test_volume_quota_classes.VolumeQuotaClassesTest.test_show_default_quota [0.201807s] ... ok
{0} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_volume_extend_gigabytes_quota_deviation [0.233020s] ... ok
{2} tempest.api.volume.admin.test_volume_quota_classes.VolumeQuotaClassesTest.test_update_default_quota [1.129953s] ... ok
{0} setUpClass (tempest.api.volume.admin.test_volume_retype.VolumeRetypeWithMigrationTest) ... SKIPPED: Cinder multi-backend feature disabled
{1} tempest.api.volume.admin.test_volume_snapshot_quotas_negative.VolumeSnapshotQuotasNegativeTestJSON.test_quota_volume_gigabytes_snapshots [0.367765s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_host_name [0.030948s] ... ok
{1} tempest.api.volume.admin.test_volume_snapshot_quotas_negative.VolumeSnapshotQuotasNegativeTestJSON.test_quota_volume_snapshots [0.076132s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_service_and_host_name [0.029888s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_service_binary_name [0.024246s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_volume_host_name [2.662264s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_list_services [0.027382s] ... ok
{2} tempest.api.volume.admin.test_volume_retype.VolumeRetypeWithoutMigrationTest.test_available_volume_retype [4.113517s] ... ok
{1} tempest.api.volume.admin.test_volume_types.VolumeTypesTest.test_volume_type_create_get_delete [0.231015s] ... ok
{1} tempest.api.volume.admin.test_volume_types.VolumeTypesTest.test_volume_type_encryption_create_get_update_delete [0.359683s] ... ok
{1} tempest.api.volume.admin.test_volume_types.VolumeTypesTest.test_volume_type_list [0.043365s] ... ok
{1} tempest.api.volume.admin.test_volume_types.VolumeTypesTest.test_volume_type_update [0.209310s] ... ok
{0} tempest.api.volume.admin.test_volume_type_access.VolumeTypesAccessTest.test_volume_type_access_list [0.337411s] ... ok
{2} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_disable_log_reason_with_no_reason [0.018471s] ... ok
{2} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_disable_service_with_invalid_binary [0.027083s] ... ok
{2} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_enable_service_with_invalid_host [0.026695s] ... ok
{2} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_freeze_host_with_invalid_host [0.029658s] ... ok
{2} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_thaw_host_with_invalid_host [0.028858s] ... ok
{0} tempest.api.volume.test_extensions.ExtensionsTestJSON.test_list_extensions [0.186917s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_spec_create_get_delete [0.187624s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_specs_list [0.095495s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_specs_update [0.249898s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_invalid_body [0.019545s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_none_body [0.017691s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_nonexistent_type_id [0.045292s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_delete_nonexistent_volume_type_id [0.022351s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_get_nonexistent_extra_spec_name [0.027074s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_get_nonexistent_volume_type_id [0.025495s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_list_nonexistent_volume_type_id [0.022750s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_multiple_extra_spec [0.014395s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_no_body [0.017210s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_none_extra_spec_id [0.046443s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_nonexistent_extra_spec_id [0.046283s] ... ok
{2} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_nonexistent_type_id [0.043925s] ... ok
{1} tempest.api.volume.admin.test_volumes_list.VolumesListAdminTestJSON.test_volume_list_param_tenant [2.807759s] ... ok
{2} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_volume_type_encryption_nonexistent_type_id [0.235116s] ... ok
{2} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_with_empty_name [0.016948s] ... ok
{2} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_with_repeated_name [0.072786s] ... ok
{2} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_delete_nonexistent_type_id [0.023320s] ... ok
{2} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_get_nonexistent_type_id [0.022536s] ... ok
{0} tempest.api.volume.test_image_metadata.VolumesImageMetadata.test_update_show_delete_image_metadata [0.229888s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_force_detach_volume [3.597054s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/admin/test_volumes_actions.py", line 83, in test_force_detach_volume
    server_id = self.create_server()['id']

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:00:30Z', 'message': 'Build of instance d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 aborted: Failure prepping block device.\n'}. Server boot request ID: req-19cf0b1e-fdac-40bb-a2e6-2bee98ac6e51.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:00:28,631 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 201 POST http://controller:5000/v3/auth/tokens 0.575s
2022-07-27 11:00:28,632 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:28 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-27b64ab0-fb89-4682-97ab-f4cf413fca76', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "53b4efad68b64143af32dc33a51d72db", "name": "tempest-VolumesActionsTest-1541222890-project", "password_expires_at": null}, "audit_ids": ["iL0n78ddTIWK8GALSroP1Q"], "expires_at": "2022-07-28T08:00:28.000000Z", "issued_at": "2022-07-27T08:00:28.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "d762d4a562ef4a01a93c95b632e29029", "name": "tempest-VolumesActionsTest-1541222890"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/d762d4a562ef4a01a93c95b632e29029", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/d762d4a562ef4a01a93c95b632e29029", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/d762d4a562ef4a01a93c95b632e29029", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/d762d4a562ef4a01
    a93c95b632e29029", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:00:28,641 11639 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_force_detach_volume) Found network None available for tenant
2022-07-27 11:00:29,043 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.401s
2022-07-27 11:00:29,044 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-1432426022", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:28 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-19cf0b1e-fdac-40bb-a2e6-2bee98ac6e51', 'x-compute-request-id': 'req-19cf0b1e-fdac-40bb-a2e6-2bee98ac6e51', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "d2d3b078-c6ad-44b6-a904-c0c7bc4155b9", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "5yBQTre7jFCA"}}'
2022-07-27 11:00:29,120 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.071s
2022-07-27 11:00:29,121 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:29 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-1d1daf24-6a10-4353-aaf2-794a9325d451', 'x-compute-request-id': 'req-1d1daf24-6a10-4353-aaf2-794a9325d451', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9'}
        Body: b'{"server": {"id": "d2d3b078-c6ad-44b6-a904-c0c7bc4155b9", "name": "tempest-VolumesActionsTest-instance-1432426022", "status": "BUILD", "tenant_id": "d762d4a562ef4a01a93c95b632e29029", "user_id": "53b4efad68b64143af32dc33a51d72db", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:29Z", "updated": "2022-07-27T08:00:29Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}, {"rel": "bookmark", "href": "ht
    tp://[LB_IP_ADDRESS]:8774/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:00:30,217 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.082s
2022-07-27 11:00:30,218 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:30 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1425', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-a0e0fc94-74e7-44a4-9f06-0668ec39bb5d', 'x-compute-request-id': 'req-a0e0fc94-74e7-44a4-9f06-0668ec39bb5d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9'}
        Body: b'{"server": {"id": "d2d3b078-c6ad-44b6-a904-c0c7bc4155b9", "name": "tempest-VolumesActionsTest-instance-1432426022", "status": "BUILD", "tenant_id": "d762d4a562ef4a01a93c95b632e29029", "user_id": "53b4efad68b64143af32dc33a51d72db", "metadata": {}, "hostId": "d1945427ffb5769a3ebbd8127357f6dfd257ac6a222c6c3ddbfc4a68", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:29Z", "updated": "2022-07-27T08:00:30Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "nova", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": "rack05-server76", "OS-EXT-SRV-ATTR:instance_name": "instance-0000036d", "OS-EXT-SRV-ATTR:hypervisor_hostname": "rack05-server76", "OS-EXT-STS:task_state": "networking", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:00:30,230 11639 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "BUILD/networking" after 1 second wait
2022-07-27 11:00:31,334 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.102s
2022-07-27 11:00:31,334 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:31 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4676', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-55f7fcee-6e30-4e80-808f-985df09e5ae7', 'x-compute-request-id': 'req-55f7fcee-6e30-4e80-808f-985df09e5ae7', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad
    -44b6-a904-c0c7bc4155b9'}
        Body: b'{"server": {"id": "d2d3b078-c6ad-44b6-a904-c0c7bc4155b9", "name": "tempest-VolumesActionsTest-instance-1432426022", "status": "ERROR", "tenant_id": "d762d4a562ef4a01a93c95b632e29029", "user_id": "53b4efad68b64143af32dc33a51d72db", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:29Z", "updated": "2022-07-27T08:00:30Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:00:30Z", "message": "Build of instance d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/
    lib/python3.8/site-packages/nova/compute
2022-07-27 11:00:31,346 11639 INFO     [tempest.common.waiters] State transition "BUILD/networking" ==> "ERROR/None" after 2 second wait
2022-07-27 11:00:31,604 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.257s
2022-07-27 11:00:31,604 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:31 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-fe07d246-01d6-4443-9f8d-a0662ff0d16c', 'x-compute-request-id': 'req-fe07d246-01d6-4443-9f8d-a0662ff0d16c', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9'}
        Body: b''
2022-07-27 11:00:31,638 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.032s
2022-07-27 11:00:31,639 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:31 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-44cf7261-e3f4-4b02-9131-29b4eb3c369c', 'x-compute-request-id': 'req-44cf7261-e3f4-4b02-9131-29b4eb3c369c', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 could not be found."}}'

{1} tempest.api.volume.test_volume_transfers.VolumesTransfersV355Test.test_create_get_list_accept_volume_transfer [4.932556s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_force_delete_when_volume_is_attaching [3.847268s] ... ok
{0} tempest.api.volume.test_snapshot_metadata.SnapshotMetadataTestJSON.test_crud_snapshot_metadata [0.293724s] ... ok
{0} tempest.api.volume.test_snapshot_metadata.SnapshotMetadataTestJSON.test_update_show_snapshot_metadata_item [0.254548s] ... ok
{1} tempest.api.volume.test_volume_transfers.VolumesTransfersV355Test.test_create_list_delete_volume_transfer [3.803790s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_force_delete_when_volume_is_creating [3.717152s] ... ok
{0} tempest.api.volume.test_versions.VersionsTest.test_list_versions [0.015142s] ... ok
{0} tempest.api.volume.test_versions.VersionsTest.test_show_version [0.208323s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_force_delete_when_volume_is_error [3.692663s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_force_delete_when_volume_is_maintenance [3.679441s] ... ok
{1} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_attach_detach_volume_to_instance [3.469555s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 45, in test_attach_detach_volume_to_instance
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 42040872-3d0d-4e1a-9400-ccaf95c2de90 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:00:47Z', 'message': 'Build of instance 42040872-3d0d-4e1a-9400-ccaf95c2de90 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 42040872-3d0d-4e1a-9400-ccaf95c2de90 aborted: Failure prepping block device.\n'}. Server boot request ID: req-17429e1c-e522-4ff5-934d-3780349521bc.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:00:45,634 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://controller:5000/v3/auth/tokens 0.572s
2022-07-27 11:00:45,635 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:45 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4f03bb91-02b7-427c-a050-67be1e3d1bb5', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "1459bdf747ad4c1ba27ba7c1768b978e", "name": "tempest-VolumesActionsTest-1828341456-project", "password_expires_at": null}, "audit_ids": ["UN5XealsT8GLu9T2aa-hbw"], "expires_at": "2022-07-28T08:00:45.000000Z", "issued_at": "2022-07-27T08:00:45.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "ff5203e0bb8e48de8e636552d863417e", "name": "tempest-VolumesActionsTest-1828341456"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ff5
    203e0bb8e48de8e636552d863417e", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:00:45,636 11638 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-07-27 11:00:45,732 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.095s
2022-07-27 11:00:45,732 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesActionsTest-1254144275-desc", "domain_id": "default", "name": "tempest-VolumesActionsTest-1254144275"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:45 GMT', 'server': 'Apache', 'content-length': '373', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-3b18743e-347b-4ee6-9db9-a5287adbbcfe', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "bf81edb9d10f44a0afc9396d5594bed9", "name": "tempest-VolumesActionsTest-1254144275", "domain_id": "default", "description": "tempest-VolumesActionsTest-1254144275-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9"}}}\n'
2022-07-27 11:00:46,308 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.574s
2022-07-27 11:00:46,309 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesActionsTest-1254144275-project-admin", "password": "Y5%QjHzTQ40&1pX", "domain_id": "default"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:45 GMT', 'server': 'Apache', 'content-length': '293', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-693a7e51-4adc-4d32-93e3-5ad59a46d2b3', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "fa34089593f34f45bbcf8060012be85b", "name": "tempest-VolumesActionsTest-1254144275-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/fa34089593f34f45bbcf8060012be85b"}}}\n'
2022-07-27 11:00:46,347 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.037s
2022-07-27 11:00:46,348 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-871aa396-3414-4fea-856f-002793e2061c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/
    roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:00:46,405 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c 0.055s
2022-07-27 11:00:46,405 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-8e0dad5e-afc7-4eab-b2c3-0d8c1b590b42', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:00:46,487 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.080s
2022-07-27 11:00:46,487 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-13d85dad-b807-42d2-877f-a5c39cc0774d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:00:46,526 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c 0.037s
2022-07-27 11:00:46,526 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack
    -request-id': 'req-36548bf2-ac88-4df8-9ca8-f75f38a2492a', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:00:46,621 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.093s
2022-07-27 11:00:46,621 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-d5ef52b2-1493-4298-baba-5c5321735d49', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:00:46,658 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c 0.036s
2022-07-27 11:00:46,659 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-0e0a47b0-e92f-41d7-ad89-d2336816984e', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:00:46,744 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.084s
2022-07-27 11:00:46,745 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-48348274-2f44-4c47-8678-d5a2d9388dd0', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3
    /roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:00:46,780 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c 0.034s
2022-07-27 11:00:46,780 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-e0c2e058-ac36-4c6b-9491-60357998fe2f', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:00:46,781 11638 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user fa34089593f34f45bbcf8060012be85b is created with scope project and roles: ['admin', 'admin']
2022-07-27 11:00:46,781 11638 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesActionsTest-1254144275-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': 'bf81edb9d10f44a0afc9396d5594bed9', 'project_name': 'tempest-VolumesActionsTest-1254144275', 'tenant_id': 'bf81edb9d10f44a0afc9396d5594bed9', 'tenant_name': 'tempest-VolumesActionsTest-1254144275', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'fa34089593f34f45bbcf8060012be85b', 'system': None}, Network: None, Subnet: None, Router: None
2022-07-27 11:00:46,791 11638 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_attach_detach_volume_to_instance) Found network None available for tenant
2022-07-27 11:00:47,036 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.244s
2022-07-27 11:00:47,037 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-128514013", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-17429e1c-e522-4ff5-934d-3780349521bc', 'x-compute-request-id': 'req-17429e1c-e522-4ff5-934d-3780349521bc', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "42040872-3d0d-4e1a-9400-ccaf95c2de90", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"
    }], "adminPass": "PiQWEz7iJ2co"}}'
2022-07-27 11:00:47,111 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90 0.069s
2022-07-27 11:00:47,111 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:47 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1321', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-00f4992e-01ec-4a6b-9bea-a57e40d99742', 'x-compute-request-id': 'req-00f4992e-01ec-4a6b-9bea-a57e40d99742', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90'}
        Body: b'{"server": {"id": "42040872-3d0d-4e1a-9400-ccaf95c2de90", "name": "tempest-VolumesActionsTest-instance-128514013", "status": "BUILD", "tenant_id": "ff5203e0bb8e48de8e636552d863417e", "user_id": "1459bdf747ad4c1ba27ba7c1768b978e", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:47Z", "updated": "2022-07-27T08:00:47Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:00:48,223 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90 0.100s
2022-07-27 11:00:48,224 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:48 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4675', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b268574a-d03d-49ff-bd0c-588f2b81183f', 'x-compute-request-id': 'req-b268574a-d03d-49ff-bd0c-588f2b81183f', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90'}
        Body: b'{"server": {"id": "42040872-3d0d-4e1a-9400-ccaf95c2de90", "name": "tempest-VolumesActionsTest-instance-128514013", "status": "ERROR", "tenant_id": "ff5203e0bb8e48de8e636552d863417e", "user_id": "1459bdf747ad4c1ba27ba7c1768b978e", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:47Z", "updated": "2022-07-27T08:00:48Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links"
    : [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:00:47Z", "message": "Build of instance 42040872-3d0d-4e1a-9400-ccaf95c2de90 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/
2022-07-27 11:00:48,236 11638 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:00:48,487 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90 0.250s
2022-07-27 11:00:48,487 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:48 GMT', 'server': 'Apache/2.4
    .41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-a27b3d8e-3ef5-41c4-9d61-d354a2f88e07', 'x-compute-request-id': 'req-a27b3d8e-3ef5-41c4-9d61-d354a2f88e07', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90'}
        Body: b''
2022-07-27 11:00:48,523 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90 0.035s
2022-07-27 11:00:48,524 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:48 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-9a95a1e9-5c0b-4381-bd7e-64a4e6d2a627', 'x-compute-request-id': 'req-9a95a1e9-5c0b-4381-bd7e-64a4e6d2a627', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 42040872-3d0d-4e1a-9400-ccaf95c2de90 could not be found."}}'

{0} tempest.api.volume.test_volume_absolute_limits.AbsoluteLimitsTests.test_get_volume_absolute_limits [0.094837s] ... ok
{2} tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_volume_reset_status [2.860927s] ... ok
{1} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_get_volume_attachment [2.310804s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 81, in test_get_volume_attachment
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 3a216a4d-47b2-4984-830d-f4bbef01e6f9 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:00:50Z', 'message': 'Build of instance 3a216a4d-47b2-4984-830d-f4bbef01e6f9 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 3a216a4d-47b2-4984-830d-f4bbef01e6f9 aborted: Failure prepping block device.\n'}. Server boot request ID: req-2860b9a8-b09b-4431-bb58-069ca4e30e50.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:00:49,121 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 201 POST http://controller:5000/v3/auth/tokens 0.582s
2022-07-27 11:00:49,122 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:48 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4865baab-272d-4fab-81bf-9bd33f8a22c9', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "1459bdf747ad4c1ba27ba7c1768b978e", "name": "tempest-VolumesActionsTest-1828341456-project", "password_expires_at": null}, "audit_ids": ["oUtGiXLfRg6W2J-QErA1lw"], "expires_at": "2022-07-28T08:00:49.000000Z", "issued_at": "2022-07-27T08:00:49.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "ff5203e0bb8e48de8e636552d863417e", "name": "tempest-VolumesActionsTest-1828341456"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ff5203e0bb8e48
    de8e636552d863417e", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:00:49,132 11638 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_get_volume_attachment) Found network None available for tenant
2022-07-27 11:00:49,357 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.224s
2022-07-27 11:00:49,357 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-810132807", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:49 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-2860b9a8-b09b-4431-bb58-069ca4e30e50', 'x-compute-request-id': 'req-2860b9a8-b09b-4431-bb58-069ca4e30e50', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "3a216a4d-47b2-4984-830d-f4bbef01e6f9", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "fCXHSZH68Bj4"}}'
2022-07-27 11:00:49,428 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9 0.066s
2022-07-27 11:00:49,429 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:49 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1321', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b068ba0e-107b-41b7-8a9b-0633e4f9a637', 'x-compute-request-id': 'req-b068ba0e-107b-41b7-8a9b-0633e4f9a637', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9'}
        Body: b'{"server": {"id": "3a216a4d-47b2-4984-830d-f4bbef01e6f9", "name": "tempest-VolumesActionsTest-instance-810132807", "status": "BUILD", "tenant_id": "ff5203e0bb8e48de8e636552d863417e", "user_id": "1459bdf747ad4c1ba27ba7c1768b978e", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:49Z", "updated": "2022-07-27T08:00:49Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}, {"rel": "bookmark", "href
    ": "http://[LB_IP_ADDRESS]:8774/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:00:50,551 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9 0.108s
2022-07-27 11:00:50,552 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:50 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4675', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-6face12a-47df-4628-a116-526376ecb14d', 'x-compute-request-id': 'req-6face12a-47df-4628-a116-526376ecb14d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9'}
        Body: b'{"server": {"id": "3a216a4d-47b2-4984-830d-f4bbef01e6f9", "name": "tempest-VolumesActionsTest-instance-810132807", "status": "ERROR", "tenant_id": "ff5203e0bb8e48de8e636552d863417e", "user_id": "1459bdf747ad4c1ba27ba7c1768b978e", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:49Z", "updated": "2022-07-27T08:00:50Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:00:50Z", "message": "Build of instance 3a216a4d-47b2-4984-830d-f4bbef01e6f9 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_se
    cret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/
2022-07-27 11:00:50,563 11638 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:00:50,807 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9 0.243s
2022-07-27 11:00:50,807 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:50 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-5ab9a569-ba51-437e-a3ca-03d0d431ba74', 'x-compute-request-id': 'req-5ab9a569-ba51-437e-a3ca-03d0d431ba74', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9'}
        Body: b''
2022-07-27 11:00:50,839 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9 0.030s
2022-07-27 11:00:50,839 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:50 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-c3e70bc0-f68f-4eef-99a9-b3eee25bf1fa', 'x-compute-request-id': 'req-c3e70bc0-f68f-4eef-99a9-b3eee25bf1fa', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 3a216a4d-47b2-4984-830d-f4bbef01e6f9 could not be found."}}'

{1} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_reserve_unreserve_volume [0.197026s] ... ok
{1} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_bootable [0.213345s] ... ok
{1} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_readonly_update [0.202138s] ... ok
{2} tempest.api.volume.test_availability_zone.AvailabilityZoneTestJSON.test_get_availability_zone_list [0.177058s] ... ok
{0} tempest.api.volume.test_volume_delete_cascade.VolumesDeleteCascade.test_volume_delete_cascade [8.373832s] ... ok
{2} tempest.api.volume.test_volume_transfers.VolumesTransfersTest.test_create_get_list_accept_volume_transfer [6.210535s] ... ok
{1} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_upload [14.871246s] ... ok
{2} tempest.api.volume.test_volume_transfers.VolumesTransfersTest.test_create_list_delete_volume_transfer [3.778857s] ... ok
{0} tempest.api.volume.test_volume_delete_cascade.VolumesDeleteCascade.test_volume_from_snapshot_cascade_delete [8.826176s] ... ok
{1} tempest.api.volume.test_volumes_clone_negative.VolumesCloneNegativeTest.test_create_from_volume_decreasing_size [2.693975s] ... ok
{0} tempest.api.volume.test_volume_metadata.VolumesMetadataTest.test_crud_volume_metadata [0.316034s] ... ok
{0} tempest.api.volume.test_volume_metadata.VolumesMetadataTest.test_update_show_volume_metadata_item [0.212191s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list [0.054045s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_by_name [0.045656s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_by_name [0.060213s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_pagination [0.260218s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_with_multiple_params [0.123405s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_pagination [0.218386s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_param_display_name_and_status [0.049137s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_display_name_and_status [0.061354s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_marker [0.060735s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_metadata [0.070923s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_details [0.064860s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_param_metadata [0.051937s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_availability_zone [0.095067s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_bootable [0.099173s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_status [0.116040s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_availability_zone [0.068291s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_bootable [0.061928s] ... ok
{0} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_status [0.066461s] ... ok
{1} tempest.api.volume.test_volumes_extend.VolumesExtendTest.test_volume_extend [14.693674s] ... ok
{2} tempest.api.volume.test_volumes_clone.VolumesCloneTest.test_create_from_bootable_volume [21.067151s] ... ok
{1} tempest.api.volume.test_volumes_extend.VolumesExtendTest.test_volume_extend_when_volume_has_snapshot [6.015244s] ... ok
{2} tempest.api.volume.test_volumes_clone.VolumesCloneTest.test_create_from_volume [5.979471s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_attach_volumes_with_nonexistent_volume_id [4.063115s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_negative.py", line 179, in test_attach_volumes_with_nonexistent_volume_id
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 7b11bf37-40c0-487d-818b-789e3788879a failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:01:42Z', 'message': 'Build of instance 7b11bf37-40c0-487d-818b-789e3788879a aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 7b11bf37-40c0-487d-818b-789e3788879a aborted: Failure prepping block device.\n'}. Server boot request ID: req-f6c49ab9-0e3d-46d4-8bcc-989034aebe23.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:01:39,716 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://controller:5000/v3/auth/tokens 0.503s
2022-07-27 11:01:39,716 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:39 GMT', 'server': 'Apache', 'content-length': '3890', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6074c78d-a77d-4982-9e8f-69e5060e4a8b', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "6365ec3ceb494248a491ca49a9448b11", "name": "tempest-VolumesNegativeTest-1842976733-project", "password_expires_at": null}, "audit_ids": ["yGpeyJQVSaCJUzbJ9TKRTA"], "expires_at": "2022-07-28T08:01:39.000000Z", "issued_at": "2022-07-27T08:01:39.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "17cb318975904912b227c2047b2f310e", "name": "tempest-VolumesNegativeTest-1842976733"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/17cb318975904912b227c2047b2f310e", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/17cb318975904912b227c2047b2f310e", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/17cb318975904912b227c2047b2f310e", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]
    :8774/v2/17cb318975904912b227c2047b2f310e", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:01:39,717 11637 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-07-27 11:01:39,821 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.102s
2022-07-27 11:01:39,821 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesNegativeTest-601227325-desc", "domain_id": "default", "name": "tempest-VolumesNegativeTest-601227325"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:39 GMT', 'server': 'Apache', 'content-length': '373', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-75d73b57-e15a-4a5d-b934-6089aad470f0', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "36563bc957814e3b8bc69bb873716944", "name": "tempest-VolumesNegativeTest-601227325", "domain_id": "default", "description": "tempest-VolumesNegativeTest-601227325-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944"}}}\n'
2022-07-27 11:01:40,390 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.568s
2022-07-27 11:01:40,391 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesNegativeTest-601227325-project-admin", "password": "C5%5x74TTkrXQNS", "domain_id": "default"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:39 GMT', 'server': 'Apache', 'content-length': '293', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-aedfe087-5d08-42f3-b036-854d8c9be8a9', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "e37fc3bcb7484c57be4bfc17759fe096", "name": "tempest-VolumesNegativeTest-601227325-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/e37fc3bcb7484c57be4bfc17759fe096"}}}\n'
2022-07-27 11:01:40,422 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.030s
2022-07-27 11:01:40,423 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-663926e6-956d-4b5f-860e-c0663e3ac3e1', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links":
     {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:40,471 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c 0.047s
2022-07-27 11:01:40,472 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-b01dba23-0ae6-45f3-b659-2c462495244b', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:40,552 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.079s
2022-07-27 11:01:40,553 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-848963bd-6407-4e4c-a248-6718dc21f3ff', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:40,591 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c 0.036s
2022-07-27 11:01:40,591 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022
     08:01:40 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-0723ae30-23bc-465c-85d0-248b6a9fa08e', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:40,677 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.085s
2022-07-27 11:01:40,678 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-fb452731-153e-423c-aacd-39935b24213c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:40,714 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c 0.035s
2022-07-27 11:01:40,715 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4cc665de-668b-4713-89c8-1b3dcc52fec6', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:40,795 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.079s
2022-07-27 11:01:40,795 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-47eef1fc-b6c5-4bf3-9ed6-b03e6f56882c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, 
    "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:40,831 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c 0.034s
2022-07-27 11:01:40,832 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-d14805cb-e652-4d14-9f8e-eb3f6b79b198', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:40,832 11637 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user e37fc3bcb7484c57be4bfc17759fe096 is created with scope project and roles: ['admin', 'admin']
2022-07-27 11:01:40,833 11637 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesNegativeTest-601227325-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': '36563bc957814e3b8bc69bb873716944', 'project_name': 'tempest-VolumesNegativeTest-601227325', 'tenant_id': '36563bc957814e3b8bc69bb873716944', 'tenant_name': 'tempest-VolumesNegativeTest-601227325', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'e37fc3bcb7484c57be4bfc17759fe096', 'system': None}, Network: None, Subnet: None, Router: None
2022-07-27 11:01:40,842 11637 INFO     [tempest.lib.common.fixed_network] (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id) Found network None available for tenant
2022-07-27 11:01:41,091 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.248s
2022-07-27 11:01:41,091 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesNegativeTest-instance-454577383", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-f6c49ab9-0e3d-46d4-8bcc-989034aebe23', 'x-compute-request-id': 'req-f6c49ab9-0e3d-46d4-8bcc-989034aebe23', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "7b11bf37-40c0-487d-818b-789e3788879a", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a"}, {"rel": "bookmark", "href": "http://192.1
    68.16.202:8774/servers/7b11bf37-40c0-487d-818b-789e3788879a"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "UMDwrR84uZ8G"}}'
2022-07-27 11:01:41,168 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a 0.071s
2022-07-27 11:01:41,168 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-52264821-3476-4ac0-bb83-ff775c9ee0d1', 'x-compute-request-id': 'req-52264821-3476-4ac0-bb83-ff775c9ee0d1', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a'}
        Body: b'{"server": {"id": "7b11bf37-40c0-487d-818b-789e3788879a", "name": "tempest-VolumesNegativeTest-instance-454577383", "status": "BUILD", "tenant_id": "17cb318975904912b227c2047b2f310e", "user_id": "6365ec3ceb494248a491ca49a9448b11", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:41Z", "updated": "2022-07-27T08:01:41Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/7b11bf37-40c0-487d-818b-789e3788879a"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:01:42,279 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a 0.095s
2022-07-27 11:01:42,279 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4676', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-69ae60f9-2b06-4f20-83c3-bd15bb4dd123', 'x-compute-request-id': 'req-69ae60f9-2b06-4f20-83c3-bd15bb4dd123', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a'}
        Body: b'{"server": {"id": "7b11bf37-40c0-487d-818b-789e3788879a", "name": "tempest-VolumesNegativeTest-instance-454577383", "status": "ERROR", "tenant_id": "17cb318975904912b227c2047b2f310e", "user_id": "6365ec3ceb494248a491ca49a9448b11", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://192.168.16
    .202:8774/flavors/0"}]}, "created": "2022-07-27T08:01:41Z", "updated": "2022-07-27T08:01:42Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/7b11bf37-40c0-487d-818b-789e3788879a"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:01:42Z", "message": "Build of instance 7b11bf37-40c0-487d-818b-789e3788879a aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute
2022-07-27 11:01:42,290 11637 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:01:43,231 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a 0.941s
2022-07-27 11:01:43,232 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', '
    Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-ef47a8a4-3169-4596-a6b4-03940933bd8f', 'x-compute-request-id': 'req-ef47a8a4-3169-4596-a6b4-03940933bd8f', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a'}
        Body: b''
2022-07-27 11:01:43,267 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a 0.033s
2022-07-27 11:01:43,267 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-1aa7d383-a52e-4966-9c53-3f2b20624d56', 'x-compute-request-id': 'req-1aa7d383-a52e-4966-9c53-3f2b20624d56', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 7b11bf37-40c0-487d-818b-789e3788879a could not be found."}}'

{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_from_deactivated_image [0.469260s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_from_image_with_decreasing_size [0.358073s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_invalid_size [0.015139s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_snapshot_id [0.025407s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_source_volid [0.028078s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_volume_type [0.025580s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_negative [0.015653s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_zero [0.014513s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_without_passing_size [0.014993s] ... ok
{1} tempest.api.volume.test_volumes_get.VolumesSummaryTest.test_show_volume_summary [0.139396s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_delete_invalid_volume_id [0.029141s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_delete_volume_without_passing_volume_id [0.013594s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_detach_volumes_with_invalid_volume_id [0.027840s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_get_invalid_volume_id [0.028058s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_get_volume_without_passing_volume_id [0.012555s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_detail_with_invalid_status [0.052633s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_detail_with_nonexistent_name [0.054747s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_with_invalid_status [0.041586s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_with_nonexistent_name [0.044843s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_reserve_volume_with_negative_volume_status [0.126483s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_reserve_volume_with_nonexistent_volume_id [0.027412s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_unreserve_volume_with_nonexistent_volume_id [0.028686s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_empty_volume_id [0.012737s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_invalid_volume_id [0.026757s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_nonexistent_volume_id [0.027647s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_delete_nonexistent_volume_id [0.026983s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_None_size [0.015762s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_non_number_size [0.015351s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_nonexistent_volume_id [0.025903s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_size_smaller_than_original_size [0.015867s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_without_passing_volume_id [0.040515s] ... ok
{0} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_get_nonexistent_volume_id [0.027211s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_delete_with_volume_in_use [4.190559s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_snapshots.py", line 48, in test_snapshot_create_delete_with_volume_in_use
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 13ec6bd9-2046-4b19-a356-2b71d13765a3 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:01:52Z', 'message': 'Build of instance 13ec6bd9-2046-4b19-a356-2b71d13765a3 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 13ec6bd9-2046-4b19-a356-2b71d13765a3 aborted: Failure prepping block device.\n'}. Server boot request ID: req-40ea3975-117e-489c-8bed-1a908fbdf446.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:01:50,341 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://controller:5000/v3/auth/tokens 0.564s
2022-07-27 11:01:50,342 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:49 GMT', 'server': 'Apache', 'content-length': '3896', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-1d722955-474b-4a80-9c41-bebe35a0c2e9', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "c21c8c6163c14424a2f84337fdfc76f2", "name": "tempest-VolumesSnapshotTestJSON-162829006-project", "password_expires_at": null}, "audit_ids": ["ItUFvoI4RpSX3g7hxuo7bg"], "expires_at": "2022-07-28T08:01:50.000000Z", "issued_at": "2022-07-27T08:01:50.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "733e24d451be4fe89fcce0f9265f7041", "name": "tempest-VolumesSnapshotTestJSON-162829006"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://192.
    168.16.202:8774/v2/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:01:50,343 11638 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-07-27 11:01:50,457 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.113s
2022-07-27 11:01:50,458 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesSnapshotTestJSON-745334794-desc", "domain_id": "default", "name": "tempest-VolumesSnapshotTestJSON-745334794"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:50 GMT', 'server': 'Apache', 'content-length': '381', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-37f78620-760f-492e-8ebf-4684fcd4d955', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "289a460703c643b9b0104ef874480315", "name": "tempest-VolumesSnapshotTestJSON-745334794", "domain_id": "default", "description": "tempest-VolumesSnapshotTestJSON-745334794-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315"}}}\n'
2022-07-27 11:01:51,036 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.577s
2022-07-27 11:01:51,037 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesSnapshotTestJSON-745334794-project-admin", "password": "K5%IbAWoSGL&uV3", "domain_id": "default"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:50 GMT', 'server': 'Apache', 'content-length': '297', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6b537aca-a7f2-489d-b9bd-4f536227c342', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "f7354fe8a6c3425284c895b2c887e6cf", "name": "tempest-VolumesSnapshotTestJSON-745334794-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/f7354fe8a6c3425284c895b2c887e6cf"}}}\n'
2022-07-27 11:01:51,071 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.033s
2022-07-27 11:01:51,071 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-c0d46c3b-a1e0-4d27-bf4a-e6dc60485fc2', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null
    , "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:51,123 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.051s
2022-07-27 11:01:51,124 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-10255660-1069-462d-b7d8-7a18abe69c72', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:51,210 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.085s
2022-07-27 11:01:51,211 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-34e59d16-64f9-41ce-bdfc-a19270d8d643', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:51,249 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.037s
2022-07-27 11:01:51,249 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Bod
    y: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-7dc722c5-0906-48b8-bb93-ddc04e8d1cc2', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:51,332 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.081s
2022-07-27 11:01:51,332 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-3551f902-918e-4ecf-9334-552462f409e1', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:51,369 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.035s
2022-07-27 11:01:51,369 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6cc13ed4-5776-420a-bf95-950754defece', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:51,449 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.079s
2022-07-27 11:01:51,450 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-61a30848-d15d-44dc-a3fc-6531ad658889', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96
    215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:51,489 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.038s
2022-07-27 11:01:51,490 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-af852d0b-fadd-43b1-97ba-5bb90da26497', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:51,490 11638 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user f7354fe8a6c3425284c895b2c887e6cf is created with scope project and roles: ['admin', 'admin']
2022-07-27 11:01:51,491 11638 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesSnapshotTestJSON-745334794-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': '289a460703c643b9b0104ef874480315', 'project_name': 'tempest-VolumesSnapshotTestJSON-745334794', 'tenant_id': '289a460703c643b9b0104ef874480315', 'tenant_name': 'tempest-VolumesSnapshotTestJSON-745334794', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'f7354fe8a6c3425284c895b2c887e6cf', 'system': None}, Network: None, Subnet: None, Router: None
2022-07-27 11:01:51,501 11638 INFO     [tempest.lib.common.fixed_network] (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use) Found network None available for tenant
2022-07-27 11:01:51,756 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.254s
2022-07-27 11:01:51,757 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesSnapshotTestJSON-instance-321796337", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-40ea3975-117e-489c-8bed-1a908fbdf446', 'x-compute-request-id': 'req-40ea3975-117e-489c-8bed-1a908fbdf446', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "13ec6bd9-2046-4b19-a356-2b71d13765a3", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8
    774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "owP76ER5Bbs5"}}'
2022-07-27 11:01:51,831 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3 0.069s
2022-07-27 11:01:51,831 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1326', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-3a8e4477-4c94-426e-ab4c-39160a36adb4', 'x-compute-request-id': 'req-3a8e4477-4c94-426e-ab4c-39160a36adb4', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3'}
        Body: b'{"server": {"id": "13ec6bd9-2046-4b19-a356-2b71d13765a3", "name": "tempest-VolumesSnapshotTestJSON-instance-321796337", "status": "BUILD", "tenant_id": "733e24d451be4fe89fcce0f9265f7041", "user_id": "c21c8c6163c14424a2f84337fdfc76f2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:51Z", "updated": "2022-07-27T08:01:51Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:01:52,949 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3 0.103s
2022-07-27 11:01:52,950 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4680', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-6ed8edda-8f26-4a86-9777-3bf573670275', 'x-compute-request-id': 'req-6ed8edda-8f26-4a86-9777-3bf573670275', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3'}
        Body: b'{"server": {"id": "13ec6bd9-2046-4b19-a356-2b71d13765a3", "name": "tempest-VolumesSnapshotTestJSON-instance-321796337", "status": "ERROR", "tenant_id": "733e24d451be4fe89fcce0f9265f7041", "user_id": "c21c8c6163c14424a2f84337fdfc76f2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e
    9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:51Z", "updated": "2022-07-27T08:01:52Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:01:52Z", "message": "Build of instance 13ec6bd9-2046-4b19-a356-2b71d13765a3 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/com
2022-07-27 11:01:52,961 11638 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:01:53,923 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3 0.961s
2022-07-27 11:0
    1:53,923 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-209a1272-eca8-4d02-9c38-ec791d2dccdb', 'x-compute-request-id': 'req-209a1272-eca8-4d02-9c38-ec791d2dccdb', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3'}
        Body: b''
2022-07-27 11:01:53,960 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3 0.036s
2022-07-27 11:01:53,961 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:53 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-293fb147-5731-4160-97e7-21b99992e2f2', 'x-compute-request-id': 'req-293fb147-5731-4160-97e7-21b99992e2f2', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 13ec6bd9-2046-4b19-a356-2b71d13765a3 could not be found."}}'

{2} tempest.api.volume.test_volumes_extend.VolumesExtendAttachedTest.test_extend_attached_volume [4.933087s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_extend.py", line 187, in test_extend_attached_volume
    self._test_extend_attached_volume(volume)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_extend.py", line 117, in _test_extend_attached_volume
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 6d3ef06b-aa8c-437e-8712-2175b9e1c182 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:01:53Z', 'message': 'Build of instance 6d3ef06b-aa8c-437e-8712-2175b9e1c182 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 6d3ef06b-aa8c-437e-8712-2175b9e1c182 aborted: Failure prepping block device.\n'}. Server boot request ID: req-07fbebee-8e65-4cdf-854b-b2267c461b8a.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:01:49,854 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 202 POST http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes 0.397s
2022-07-27 11:01:49,855 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: {"volume": {"size": 1, "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:49 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '892', 'x-compute-request-id': 'req-4f885034-1efe-4b38-a32e-7af21e1fe01a', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-4f885034-1efe-4b38-a32e-7af21e1fe01a', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes'}
        Body: b'{"volume": {"id": "590e939d-8e90-429e-8fb9-bb445cb230f5", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-07-27T08:01:49.795620", "updated_at": null, "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}], "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null}}'
2022-07-27 11:01:49,905 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5 0.040s
2022-07-27 11:01:49,906 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:49 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1071', 'x-compute-request-id': 'req-6ebea609-e2bc-4976-ab74-c0201e5e9c3b', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-6ebea609-e2bc-4976-ab74-c0201e5e9c3b', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5'}
        Body: b'{"volume": {"id": "590e939d-8e90-429e-8fb9-bb445cb230f5", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-07-27T08:01:49.000000", "updated_at": null, "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}], "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": null, "os-vol-tenant-attr:tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:nam
    e_id": null}}'
2022-07-27 11:01:50,958 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5 0.040s
2022-07-27 11:01:50,959 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:50 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1129', 'x-compute-request-id': 'req-af4807ae-2128-4f58-9cfd-6601640b5264', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-af4807ae-2128-4f58-9cfd-6601640b5264', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5'}
        Body: b'{"volume": {"id": "590e939d-8e90-429e-8fb9-bb445cb230f5", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-07-27T08:01:49.000000", "updated_at": "2022-07-27T08:01:49.000000", "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}], "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": "rack03-server59@LIGHTOSsetykm#setykm", "os-vol-tenant-attr:tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null}}'
2022-07-27 11:01:52,026 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5 0.054s
2022-07-27 11:01:52,027 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1130', 'x-compute-request-id': 'req-fb8a3ceb-9045-42cf-85e1-f308b8c737d6', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-fb8a3ceb-9045-42cf-85e1-f308b8c737d6', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5'}
        Body: b'{"volume": {"id": "590e939d-8e90-429e-8fb9-bb445cb230f5", "status": "available", "size": 1, "availability_zone": "nova", "created_at": "2022-07-27T08:01:49.000000", "updated_at": "2022-07-27T08:01:51.000000", "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}], "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "mu
    ltiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": "rack03-server59@LIGHTOSsetykm#setykm", "os-vol-tenant-attr:tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null}}'
2022-07-27 11:01:52,038 11639 INFO     [tempest.common.waiters] volume 590e939d-8e90-429e-8fb9-bb445cb230f5 reached available after waiting for 3.038889 seconds
2022-07-27 11:01:52,613 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 201 POST http://controller:5000/v3/auth/tokens 0.570s
2022-07-27 11:01:52,614 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache', 'content-length': '3902', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-a13bdadf-8ad7-47e7-beb1-e7dc70e56698', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "name": "tempest-VolumesExtendAttachedTest-1172255721-project", "password_expires_at": null}, "audit_ids": ["9PcRQRKqTpWhzF4GBWM8Nw"], "expires_at": "2022-07-28T08:01:52.000000Z", "issued_at": "2022-07-27T08:01:52.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "05b96c8d9b5a4a599423aebc04d84ba4", "name": "tempest-VolumesExtendAttachedTest-1172255721"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:
    8776/v3/05b96c8d9b5a4a599423aebc04d84ba4", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/05b96c8d9b5a4a599423aebc04d84ba4", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/05b96c8d9b5a4a599423aebc04d84ba4", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:01:52,623 11639 INFO     [tempest.lib.common.fixed_network] (VolumesExtendAttachedTest:test_extend_attached_volume) Found network None available for tenant
2022-07-27 11:01:52,870 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.246s
2022-07-27 11:01:52,871 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesExtendAttachedTest-instance-1578200582", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-07fbebee-8e65-4cdf-854b-b2267c461b8a', 'x-compute-request-id': 'req-07fbebee-8e65-4cdf-854b-b2267c461b8a', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "6d3ef06b-aa8c-437e-8712-2175b9e1c182", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "c2QMLG5St6H7"}}'
2022-07-27 11:01:52,968 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182 0.092s
2022-07-27 11:01:52,968 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1329', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-2c2bbb83-0f2c-4bfc-a1ce-e335be7849f9', 'x-compute-request-id': 'req-2c2bbb83-0f2c-4bfc-a1ce-e335be7849f9', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182'}
        Body: b'{"server": {"id": "6d3ef06b-aa8c-437e-8712-2175b9e1c182", "name": "tempest-VolumesExtendAttachedTest-instance-1578200582", "status": "BUILD", "tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "metadata": {}, "hostId": 
    "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:52Z", "updated": "2022-07-27T08:01:52Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:01:54,092 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182 0.109s
2022-07-27 11:01:54,092 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:53 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4683', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-034ff99b-4480-4598-8bf8-2e6891eb1363', 'x-compute-request-id': 'req-034ff99b-4480-4598-8bf8-2e6891eb1363', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182'}
        Body: b'{"server": {"id": "6d3ef06b-aa8c-437e-8712-2175b9e1c182", "name": "tempest-VolumesExtendAttachedTest-instance-1578200582", "status": "ERROR", "tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:52Z", "updated": "2022-07-27T08:01:53Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:01:53Z", "message": "Build of instance 6d3ef06b-aa8c-437e-8712-2175b9e1c182 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, i
    n get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/
2022-07-27 11:01:54,103 11639 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 2 second wait
2022-07-27 11:01:54,351 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182 0.246s
2022-07-27 11:01:54,351 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:54 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d1f25e4c-1663-4b45-898a-b66fb0620f19', 'x-compute-request-id': 'req-d1f25e4c-1663-4b45-898a-b66fb0620f19', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182'}
        Body: b''
2022-07-27 11:01:54,387 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182 0.034s
2022-07-27 11:01:54,387 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:54 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7c605f4d-f497-475b-be62-68945ce423e8', 'x-compute-request-id': 'req-7c605f4d-f497-475b-be62-68945ce423e8', 'connection': 'close', 'content-type': 'a
    pplication/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 6d3ef06b-aa8c-437e-8712-2175b9e1c182 could not be found."}}'

{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_get_list_update_delete [3.516551s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit [0.033833s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit_equals_infinite [0.066377s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit_equals_zero [0.025751s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_marker [0.075653s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_offset [0.031818s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_created_at_asc [0.038200s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_created_at_desc [0.034422s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_id_asc [0.033702s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_id_desc [0.032132s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_name_asc [0.033584s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_name_desc [0.036129s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshots_list_details_with_params [0.105496s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshots_list_with_params [0.107185s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_offline_delete_online [4.572825s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_snapshots.py", line 83, in test_snapshot_create_offline_delete_online
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 99c027a9-2971-4778-94d9-49b5c8e0a148 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:02:01Z', 'message': 'Build of instance 99c027a9-2971-4778-94d9-49b5c8e0a148 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 99c027a9-2971-4778-94d9-49b5c8e0a148 aborted: Failure prepping block device.\n'}. Server boot request ID: req-b1905f03-2330-4e70-97cf-755fa97d0583.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:01:57,623 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 202 POST http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots 0.139s
2022-07-27 11:01:57,624 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"snapshot": {"volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "name": "tempest-VolumesSnapshotTestJSON-Snapshot-2108704080"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:57 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '310', 'x-compute-request-id': 'req-b0c84eec-3143-495b-8079-79a744317eef', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-b0c84eec-3143-495b-8079-79a744317eef', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots'}
        Body: b'{"snapshot": {"id": "2ca998e2-c65a-436b-bb4a-9fd87add1dae", "created_at": "2022-07-27T08:01:57.572846", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Snapshot-2108704080", "description": null, "volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "status": "creating", "size": 1, "metadata": {}}}'
2022-07-27 11:01:57,655 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae 0.026s
2022-07-27 11:01:57,656 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:57 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '442', 'x-compute-request-id': 'req-86070e07-8a1d-402d-9159-4d5111d03a6c', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-86070e07-8a1d-402d-9159-4d5111d03a6c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae'}
        Body: b'{"snapshot": {"id": "2ca998e2-c65a-436b-bb4a-9fd87add1dae", "created_at": "2022-07-27T08:01:57.000000", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Snapshot-2108704080", "description": null, "volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "status": "creating", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "733e24d451be4fe89fcce0f9265f7041", "os-extended-snapshot-attributes:progress": "0%"}}'
2022-07-27 11:01:58,688 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae 0.026s
2022-07-27 11:01:58,689 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:58 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '442', 'x-compute-request-id': 'req-97ba0516-6d46-4c7e-a31d-3c1e15f97842', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-97ba0516-6d46-4c7e-a31d-3c1e15f97842', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae'}
        Body: b'{"snapshot": {"id": "2ca998e2-c65a-436b-bb4a-9fd87add1dae", "created_at": "2022-07-27T08:01:57.000000", "updated_at": null, "name": "tempest-VolumesSnapshotTe
    stJSON-Snapshot-2108704080", "description": null, "volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "status": "creating", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "733e24d451be4fe89fcce0f9265f7041", "os-extended-snapshot-attributes:progress": "0%"}}'
2022-07-27 11:01:59,724 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae 0.029s
2022-07-27 11:01:59,725 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:59 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '469', 'x-compute-request-id': 'req-a81ad784-8778-470b-be65-21544be3b39d', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-a81ad784-8778-470b-be65-21544be3b39d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae'}
        Body: b'{"snapshot": {"id": "2ca998e2-c65a-436b-bb4a-9fd87add1dae", "created_at": "2022-07-27T08:01:57.000000", "updated_at": "2022-07-27T08:01:58.000000", "name": "tempest-VolumesSnapshotTestJSON-Snapshot-2108704080", "description": null, "volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "status": "available", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "733e24d451be4fe89fcce0f9265f7041", "os-extended-snapshot-attributes:progress": "100%"}}'
2022-07-27 11:01:59,730 11638 INFO     [tempest.common.waiters] snapshot 2ca998e2-c65a-436b-bb4a-9fd87add1dae reached available after waiting for 2.730394 seconds
2022-07-27 11:02:00,305 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 201 POST http://controller:5000/v3/auth/tokens 0.567s
2022-07-27 11:02:00,306 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:59 GMT', 'server': 'Apache', 'content-length': '3896', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-11f7abe4-d247-4a56-a186-3a8c36c09874', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "c21c8c6163c14424a2f84337fdfc76f2", "name": "tempest-VolumesSnapshotTestJSON-162829006-project", "password_expires_at": null}, "audit_ids": ["TfP5paY_Se6ApYWfav-Stw"], "expires_at": "2022-07-28T08:02:00.000000Z", "issued_at": "2022-07-27T08:02:00.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "733e24d451be4fe89fcce0f9265f7041", "name": "tempest-VolumesSnapshotTestJSON-162829006"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59
    512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:02:00,315 11638 INFO     [tempest.lib.common.fixed_network] (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online) Found network None available for tenant
2022-07-27 11:02:00,576 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.259s
2022-07-27 11:02:00,576 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesSnapshotTestJSON-instance-504775029", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:00 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b1905f03-2330-4e70-97cf-755fa97d0583', 'x-compute-request-id': 'req-b1905f03-2330-4e70-97cf-755fa97d0583', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "99c027a9-2971-4778-94d9-49b5c8e0a148", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a
    148"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "4o34L5pQ6qHK"}}'
2022-07-27 11:02:00,649 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148 0.067s
2022-07-27 11:02:00,649 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:00 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1326', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-aa85bc4e-9335-4067-bc6e-c2c238c28305', 'x-compute-request-id': 'req-aa85bc4e-9335-4067-bc6e-c2c238c28305', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148'}
        Body: b'{"server": {"id": "99c027a9-2971-4778-94d9-49b5c8e0a148", "name": "tempest-VolumesSnapshotTestJSON-instance-504775029", "status": "BUILD", "tenant_id": "733e24d451be4fe89fcce0f9265f7041", "user_id": "c21c8c6163c14424a2f84337fdfc76f2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:02:00Z", "updated": "2022-07-27T08:02:00Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:02:01,757 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148 0.096s
2022-07-27 11:02:01,758 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:01 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4680', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-286f411d-73c8-4caa-b7da-777c6ec87b56', 'x-compute-request-id': 'req-286f411d-73c8-4caa-b7da-777c6ec87b56', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148'}
        Body: b'{"server": {"id": "99c027a9-2971-4778-94d9-49b5c8e0a148", "name": "tempest-VolumesSnapshotTestJSON-instance-504775029", "status": "ERROR", "tenant_id": "733e24d451be4fe89fcce0f9265f7041", "user_id": "c21c8c6163c14424a2f84337fdfc76f2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", 
    "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:02:00Z", "updated": "2022-07-27T08:02:01Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:02:01Z", "message": "Build of instance 99c027a9-2971-4778-94d9-49b5c8e0a148 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/com
2022-07-27 11:02:01,769 11638 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:02:02,014 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148 0.244s
2022-07-27 11:02:02,015 11638 DEBUG    [tempest.lib.common.rest_client] Reque
    st - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:01 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-6955e6e2-5064-4e0d-9b59-ab51ab35ce7d', 'x-compute-request-id': 'req-6955e6e2-5064-4e0d-9b59-ab51ab35ce7d', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148'}
        Body: b''
2022-07-27 11:02:02,054 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148 0.038s
2022-07-27 11:02:02,054 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:02 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-0402212f-9236-4d15-ae40-c6fa9d026150', 'x-compute-request-id': 'req-0402212f-9236-4d15-ae40-c6fa9d026150', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 99c027a9-2971-4778-94d9-49b5c8e0a148 could not be found."}}'

{2} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete [7.654552s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_volume_from_snapshot [8.350433s] ... ok
{2} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete_as_clone [10.953618s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_volume_from_snapshot_no_size [8.332373s] ... ok
{2} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete_from_image [20.342061s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_create_snapshot_with_nonexistent_volume_id [0.141436s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_create_snapshot_without_passing_volume_id [0.029545s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshot_invalid_param_limit [0.015275s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshots_invalid_param_marker [0.025690s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshots_invalid_param_sort [0.017137s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_volume_from_snapshot_decreasing_size [4.836916s] ... ok

==============================
Failed 8 tests - output below:
==============================

tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_list_get_volume_attachments_multiattach[id-8d5853f7-56e7-4988-9b0c-48cea3c7049a]
----------------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/api/compute/volumes/test_attach_volume.py", line 406, in test_list_get_volume_attachments_multiattach
    servers, volume, attachments = self._create_and_multiattach()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/compute/volumes/test_attach_volume.py", line 389, in _create_and_multiattach
    'ACTIVE')

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 63f9c707-7b4c-4438-9d52-7a9bf4a1b223 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T07:58:36Z', 'message': 'Build of instance 63f9c707-7b4c-4438-9d52-7a9bf4a1b223 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 63f9c707-7b4c-4438-9d52-7a9bf4a1b223 aborted: Failure prepping block device.\n'}.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 10:58:35,263 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 201 POST http://controller:5000/v3/auth/tokens 0.578s
2022-07-27 10:58:35,263 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:34 GMT', 'server': 'Apache', 'content-length': '3904', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-c7bcdfc1-92a8-4705-937e-c6df97631359', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "e1cc31f6eb7b4c7db332544e032a731a", "name": "tempest-AttachVolumeMultiAttachTest-179970713-project", "password_expires_at": null}, "audit_ids": ["UU2gmGd1TNWcBSezMbdXUw"], "expires_at": "2022-07-28T07:58:35.000000Z", "issued_at": "2022-07-27T07:58:35.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "27e2edc683cb475e8cdd939cfa6d9ba7", "name": "tempest-AttachVolumeMultiAttachTest-179970713"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "h
    ttp://[LB_IP_ADDRESS]:8774/v2/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 10:58:35,272 11637 INFO     [tempest.lib.common.fixed_network] (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach) Found network None available for tenant
2022-07-27 10:58:35,419 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.145s
2022-07-27 10:58:35,420 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "multiattach-server-0", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0", "networks": "none"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:35 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7242d342-7e89-4954-9636-383f7db8298c', 'x-compute-request-id': 'req-7242d342-7e89-4954-9636-383f7db8298c', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "63f9c707-7b4c-4438-9d52-7a9bf4a1b223", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "Agx2fLvTQGfi"}}'
2022-07-27 10:58:35,980 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 201 POST http://controller:5000/v3/auth/tokens 0.549s
2022-07-27 10:58:35,981 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:35 GMT', 'server': 'Apache', 'content-length': '3904', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-158651db-279b-4748-8fc3-0c626d038f19', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "e1cc31f6eb7b4c7db332544e032a731a", "name": "tempest-AttachVolumeMultiAttachTest-179970713-project", "password_expires_at": null}, "audit_ids": ["nXtf47vQReeIDT5IqChhUQ"], "expires_at": "2022-07-28T07:58:35.000000Z", "issued_at": "2022-07-27T07:58:35.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "27e2edc683cb475e8cdd939cfa6d9ba7", "name": "tempest-AttachVolumeMultiAttachTest-179970713"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region
    ": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/27e2edc683cb475e8cdd939cfa6d9ba7", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 10:58:35,991 11637 INFO     [tempest.lib.common.fixed_network] (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach) Found network None available for tenant
2022-07-27 10:58:36,125 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.132s
2022-07-27 10:58:36,126 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "multiattach-server-1", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0", "networks": "none"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:35 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/ff48a141-d3e8-4510-900f-e2e2311bb9f5', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-
    API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-be8e9ba2-0dd2-4fdb-b7dc-0e8ebc056ec0', 'x-compute-request-id': 'req-be8e9ba2-0dd2-4fdb-b7dc-0e8ebc056ec0', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "ff48a141-d3e8-4510-900f-e2e2311bb9f5", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/ff48a141-d3e8-4510-900f-e2e2311bb9f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/ff48a141-d3e8-4510-900f-e2e2311bb9f5"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "Zv2EskCBLYsK"}}'
2022-07-27 10:58:36,228 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223 0.098s
2022-07-27 10:58:36,229 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 07:58:36 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1760', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-1dab75c3-30a0-408d-b7e1-a48c80618908', 'x-compute-request-id': 'req-1dab75c3-30a0-408d-b7e1-a48c80618908', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223'}
        Body: b'{"server": {"id": "63f9c707-7b4c-4438-9d52-7a9bf4a1b223", "name": "multiattach-server-0", "status": "BUILD", "tenant_id": "27e2edc683cb475e8cdd939cfa6d9ba7", "user_id": "e1cc31f6eb7b4c7db332544e032a731a", "metadata": {}, "hostId": "b5e3eb1f7d8bdd92948a352c262ccb537e00c6a055c611e52a038708", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"vcpus": 2, "ram": 1024, "disk": 1, "ephemeral": 0, "swap": 0, "original_name": "m1.nano", "extra_specs": {}}, "created": "2022-07-27T07:58:35Z", "updated": "2022-07-27T07:58:36Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "nova", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": "rack05-server76", "OS-EXT-SRV-ATTR:instance_name": "instance-0000036a", "OS-EXT-SRV-ATTR:hypervisor_hostname": "rack05-server76", "OS-EXT-SRV-ATTR:reservation_id": "r-fq1dfwmv", "OS-EXT-SRV-ATTR:launch_index": 0, "OS-EXT-SRV-ATTR:hostname": "multiattach-server-0", "OS-EXT-SRV-ATTR:kernel_id": "", "OS-EXT-SRV-ATTR:ramdisk_id": "", "OS-EXT-SRV-ATTR:root_device_name": null, "OS-EXT-SRV-ATTR:user_data": null, "OS-EXT-STS:task_state": null, "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": [], "host_status": "UP", "locked": false, "description": null, "tags": []}}'
2022-07-27 10:58:37,341 11637 INFO     [tempest.lib.common.rest_client] Request (AttachVolumeMultiAttachTest:test_list_get_volume_attachments_multiattach): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223 0.097s
2022-07-27 10:58:37,342 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-OpenStack-Nova-API-Version': '2.60', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'d
    ate': 'Wed, 27 Jul 2022 07:58:37 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '5023', 'openstack-api-version': 'compute 2.60', 'x-openstack-nova-api-version': '2.60', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-e32f3950-ff29-4d18-b384-bbfe4b234c74', 'x-compute-request-id': 'req-e32f3950-ff29-4d18-b384-bbfe4b234c74', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223'}
        Body: b'{"server": {"id": "63f9c707-7b4c-4438-9d52-7a9bf4a1b223", "name": "multiattach-server-0", "status": "ERROR", "tenant_id": "27e2edc683cb475e8cdd939cfa6d9ba7", "user_id": "e1cc31f6eb7b4c7db332544e032a731a", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"vcpus": 2, "ram": 1024, "disk": 1, "ephemeral": 0, "swap": 0, "original_name": "m1.nano", "extra_specs": {}}, "created": "2022-07-27T07:58:35Z", "updated": "2022-07-27T07:58:36Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/63f9c707-7b4c-4438-9d52-7a9bf4a1b223"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T07:58:36Z", "message": "Build of instance 63f9c707-7b4c-4438-9d52-7a9bf4a1b223 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-package
    s/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manage
2022-07-27 10:58:37,355 11637 INFO     [tempest.common.waiters] State transition "BUILD/None" ==> "ERROR/None" after 1 second wait


tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest.test_force_detach_volume[compute,id-d38285d9-929d-478f-96a5-00e66a115b81]
------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/admin/test_volumes_actions.py", line 83, in test_force_detach_volume
    server_id = self.create_server()['id']

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:00:30Z', 'message': 'Build of instance d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 aborted: Failure prepping block device.\n'}. Server boot request ID: req-19cf0b1e-fdac-40bb-a2e6-2bee98ac6e51.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:00:28,631 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 201 POST http://controller:5000/v3/auth/tokens 0.575s
2022-07-27 11:00:28,632 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:28 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-27b64ab0-fb89-4682-97ab-f4cf413fca76', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "53b4efad68b64143af32dc33a51d72db", "name": "tempest-VolumesActionsTest-1541222890-project", "password_expires_at": null}, "audit_ids": ["iL0n78ddTIWK8GALSroP1Q"], "expires_at": "2022-07-28T08:00:28.000000Z", "issued_at": "2022-07-27T08:00:28.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "d762d4a562ef4a01a93c95b632e29029", "name": "tempest-VolumesActionsTest-1541222890"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/d762d4a562ef4a01a93c95b632e29029", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/d762d4a562ef4a01a93c95b632e29029", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/d762d4a562ef4a01a93c95b632e29029", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/d762d4a562ef4a01
    a93c95b632e29029", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:00:28,641 11639 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_force_detach_volume) Found network None available for tenant
2022-07-27 11:00:29,043 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.401s
2022-07-27 11:00:29,044 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-1432426022", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:28 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-19cf0b1e-fdac-40bb-a2e6-2bee98ac6e51', 'x-compute-request-id': 'req-19cf0b1e-fdac-40bb-a2e6-2bee98ac6e51', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "d2d3b078-c6ad-44b6-a904-c0c7bc4155b9", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "5yBQTre7jFCA"}}'
2022-07-27 11:00:29,120 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.071s
2022-07-27 11:00:29,121 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:29 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-1d1daf24-6a10-4353-aaf2-794a9325d451', 'x-compute-request-id': 'req-1d1daf24-6a10-4353-aaf2-794a9325d451', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9'}
        Body: b'{"server": {"id": "d2d3b078-c6ad-44b6-a904-c0c7bc4155b9", "name": "tempest-VolumesActionsTest-instance-1432426022", "status": "BUILD", "tenant_id": "d762d4a562ef4a01a93c95b632e29029", "user_id": "53b4efad68b64143af32dc33a51d72db", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:29Z", "updated": "2022-07-27T08:00:29Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}, {"rel": "bookmark", "href": "ht
    tp://[LB_IP_ADDRESS]:8774/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:00:30,217 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.082s
2022-07-27 11:00:30,218 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:30 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1425', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-a0e0fc94-74e7-44a4-9f06-0668ec39bb5d', 'x-compute-request-id': 'req-a0e0fc94-74e7-44a4-9f06-0668ec39bb5d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9'}
        Body: b'{"server": {"id": "d2d3b078-c6ad-44b6-a904-c0c7bc4155b9", "name": "tempest-VolumesActionsTest-instance-1432426022", "status": "BUILD", "tenant_id": "d762d4a562ef4a01a93c95b632e29029", "user_id": "53b4efad68b64143af32dc33a51d72db", "metadata": {}, "hostId": "d1945427ffb5769a3ebbd8127357f6dfd257ac6a222c6c3ddbfc4a68", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:29Z", "updated": "2022-07-27T08:00:30Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "nova", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": "rack05-server76", "OS-EXT-SRV-ATTR:instance_name": "instance-0000036d", "OS-EXT-SRV-ATTR:hypervisor_hostname": "rack05-server76", "OS-EXT-STS:task_state": "networking", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:00:30,230 11639 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "BUILD/networking" after 1 second wait
2022-07-27 11:00:31,334 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.102s
2022-07-27 11:00:31,334 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:31 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4676', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-55f7fcee-6e30-4e80-808f-985df09e5ae7', 'x-compute-request-id': 'req-55f7fcee-6e30-4e80-808f-985df09e5ae7', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad
    -44b6-a904-c0c7bc4155b9'}
        Body: b'{"server": {"id": "d2d3b078-c6ad-44b6-a904-c0c7bc4155b9", "name": "tempest-VolumesActionsTest-instance-1432426022", "status": "ERROR", "tenant_id": "d762d4a562ef4a01a93c95b632e29029", "user_id": "53b4efad68b64143af32dc33a51d72db", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:29Z", "updated": "2022-07-27T08:00:30Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:00:30Z", "message": "Build of instance d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/
    lib/python3.8/site-packages/nova/compute
2022-07-27 11:00:31,346 11639 INFO     [tempest.common.waiters] State transition "BUILD/networking" ==> "ERROR/None" after 2 second wait
2022-07-27 11:00:31,604 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.257s
2022-07-27 11:00:31,604 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:31 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-fe07d246-01d6-4443-9f8d-a0662ff0d16c', 'x-compute-request-id': 'req-fe07d246-01d6-4443-9f8d-a0662ff0d16c', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9'}
        Body: b''
2022-07-27 11:00:31,638 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_force_detach_volume): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 0.032s
2022-07-27 11:00:31,639 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:31 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-44cf7261-e3f4-4b02-9131-29b4eb3c369c', 'x-compute-request-id': 'req-44cf7261-e3f4-4b02-9131-29b4eb3c369c', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/d2d3b078-c6ad-44b6-a904-c0c7bc4155b9'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance d2d3b078-c6ad-44b6-a904-c0c7bc4155b9 could not be found."}}'


tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_attach_detach_volume_to_instance[compute,id-fff42874-7db5-4487-a8e1-ddda5fb5288d,smoke]
-------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 45, in test_attach_detach_volume_to_instance
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 42040872-3d0d-4e1a-9400-ccaf95c2de90 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:00:47Z', 'message': 'Build of instance 42040872-3d0d-4e1a-9400-ccaf95c2de90 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 42040872-3d0d-4e1a-9400-ccaf95c2de90 aborted: Failure prepping block device.\n'}. Server boot request ID: req-17429e1c-e522-4ff5-934d-3780349521bc.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:00:45,634 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://controller:5000/v3/auth/tokens 0.572s
2022-07-27 11:00:45,635 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:45 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4f03bb91-02b7-427c-a050-67be1e3d1bb5', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "1459bdf747ad4c1ba27ba7c1768b978e", "name": "tempest-VolumesActionsTest-1828341456-project", "password_expires_at": null}, "audit_ids": ["UN5XealsT8GLu9T2aa-hbw"], "expires_at": "2022-07-28T08:00:45.000000Z", "issued_at": "2022-07-27T08:00:45.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "ff5203e0bb8e48de8e636552d863417e", "name": "tempest-VolumesActionsTest-1828341456"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ff5
    203e0bb8e48de8e636552d863417e", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:00:45,636 11638 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-07-27 11:00:45,732 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.095s
2022-07-27 11:00:45,732 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesActionsTest-1254144275-desc", "domain_id": "default", "name": "tempest-VolumesActionsTest-1254144275"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:45 GMT', 'server': 'Apache', 'content-length': '373', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-3b18743e-347b-4ee6-9db9-a5287adbbcfe', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "bf81edb9d10f44a0afc9396d5594bed9", "name": "tempest-VolumesActionsTest-1254144275", "domain_id": "default", "description": "tempest-VolumesActionsTest-1254144275-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9"}}}\n'
2022-07-27 11:00:46,308 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.574s
2022-07-27 11:00:46,309 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesActionsTest-1254144275-project-admin", "password": "Y5%QjHzTQ40&1pX", "domain_id": "default"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:45 GMT', 'server': 'Apache', 'content-length': '293', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-693a7e51-4adc-4d32-93e3-5ad59a46d2b3', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "fa34089593f34f45bbcf8060012be85b", "name": "tempest-VolumesActionsTest-1254144275-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/fa34089593f34f45bbcf8060012be85b"}}}\n'
2022-07-27 11:00:46,347 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.037s
2022-07-27 11:00:46,348 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-871aa396-3414-4fea-856f-002793e2061c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/
    roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:00:46,405 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c 0.055s
2022-07-27 11:00:46,405 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-8e0dad5e-afc7-4eab-b2c3-0d8c1b590b42', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:00:46,487 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.080s
2022-07-27 11:00:46,487 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-13d85dad-b807-42d2-877f-a5c39cc0774d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:00:46,526 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c 0.037s
2022-07-27 11:00:46,526 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack
    -request-id': 'req-36548bf2-ac88-4df8-9ca8-f75f38a2492a', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:00:46,621 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.093s
2022-07-27 11:00:46,621 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-d5ef52b2-1493-4298-baba-5c5321735d49', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:00:46,658 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c 0.036s
2022-07-27 11:00:46,659 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-0e0a47b0-e92f-41d7-ad89-d2336816984e', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:00:46,744 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.084s
2022-07-27 11:00:46,745 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-48348274-2f44-4c47-8678-d5a2d9388dd0', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3
    /roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:00:46,780 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c 0.034s
2022-07-27 11:00:46,780 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-e0c2e058-ac36-4c6b-9491-60357998fe2f', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/bf81edb9d10f44a0afc9396d5594bed9/users/fa34089593f34f45bbcf8060012be85b/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:00:46,781 11638 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user fa34089593f34f45bbcf8060012be85b is created with scope project and roles: ['admin', 'admin']
2022-07-27 11:00:46,781 11638 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesActionsTest-1254144275-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': 'bf81edb9d10f44a0afc9396d5594bed9', 'project_name': 'tempest-VolumesActionsTest-1254144275', 'tenant_id': 'bf81edb9d10f44a0afc9396d5594bed9', 'tenant_name': 'tempest-VolumesActionsTest-1254144275', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'fa34089593f34f45bbcf8060012be85b', 'system': None}, Network: None, Subnet: None, Router: None
2022-07-27 11:00:46,791 11638 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_attach_detach_volume_to_instance) Found network None available for tenant
2022-07-27 11:00:47,036 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.244s
2022-07-27 11:00:47,037 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-128514013", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:46 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-17429e1c-e522-4ff5-934d-3780349521bc', 'x-compute-request-id': 'req-17429e1c-e522-4ff5-934d-3780349521bc', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "42040872-3d0d-4e1a-9400-ccaf95c2de90", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"
    }], "adminPass": "PiQWEz7iJ2co"}}'
2022-07-27 11:00:47,111 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90 0.069s
2022-07-27 11:00:47,111 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:47 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1321', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-00f4992e-01ec-4a6b-9bea-a57e40d99742', 'x-compute-request-id': 'req-00f4992e-01ec-4a6b-9bea-a57e40d99742', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90'}
        Body: b'{"server": {"id": "42040872-3d0d-4e1a-9400-ccaf95c2de90", "name": "tempest-VolumesActionsTest-instance-128514013", "status": "BUILD", "tenant_id": "ff5203e0bb8e48de8e636552d863417e", "user_id": "1459bdf747ad4c1ba27ba7c1768b978e", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:47Z", "updated": "2022-07-27T08:00:47Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:00:48,223 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90 0.100s
2022-07-27 11:00:48,224 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:48 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4675', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b268574a-d03d-49ff-bd0c-588f2b81183f', 'x-compute-request-id': 'req-b268574a-d03d-49ff-bd0c-588f2b81183f', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90'}
        Body: b'{"server": {"id": "42040872-3d0d-4e1a-9400-ccaf95c2de90", "name": "tempest-VolumesActionsTest-instance-128514013", "status": "ERROR", "tenant_id": "ff5203e0bb8e48de8e636552d863417e", "user_id": "1459bdf747ad4c1ba27ba7c1768b978e", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:47Z", "updated": "2022-07-27T08:00:48Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links"
    : [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:00:47Z", "message": "Build of instance 42040872-3d0d-4e1a-9400-ccaf95c2de90 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/
2022-07-27 11:00:48,236 11638 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:00:48,487 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90 0.250s
2022-07-27 11:00:48,487 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:48 GMT', 'server': 'Apache/2.4
    .41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-a27b3d8e-3ef5-41c4-9d61-d354a2f88e07', 'x-compute-request-id': 'req-a27b3d8e-3ef5-41c4-9d61-d354a2f88e07', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90'}
        Body: b''
2022-07-27 11:00:48,523 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90 0.035s
2022-07-27 11:00:48,524 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:48 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-9a95a1e9-5c0b-4381-bd7e-64a4e6d2a627', 'x-compute-request-id': 'req-9a95a1e9-5c0b-4381-bd7e-64a4e6d2a627', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/42040872-3d0d-4e1a-9400-ccaf95c2de90'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 42040872-3d0d-4e1a-9400-ccaf95c2de90 could not be found."}}'


tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_get_volume_attachment[compute,id-9516a2c8-9135-488c-8dd6-5677a7e5f371]
--------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 81, in test_get_volume_attachment
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 3a216a4d-47b2-4984-830d-f4bbef01e6f9 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:00:50Z', 'message': 'Build of instance 3a216a4d-47b2-4984-830d-f4bbef01e6f9 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 3a216a4d-47b2-4984-830d-f4bbef01e6f9 aborted: Failure prepping block device.\n'}. Server boot request ID: req-2860b9a8-b09b-4431-bb58-069ca4e30e50.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:00:49,121 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 201 POST http://controller:5000/v3/auth/tokens 0.582s
2022-07-27 11:00:49,122 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:48 GMT', 'server': 'Apache', 'content-length': '3888', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4865baab-272d-4fab-81bf-9bd33f8a22c9', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "1459bdf747ad4c1ba27ba7c1768b978e", "name": "tempest-VolumesActionsTest-1828341456-project", "password_expires_at": null}, "audit_ids": ["oUtGiXLfRg6W2J-QErA1lw"], "expires_at": "2022-07-28T08:00:49.000000Z", "issued_at": "2022-07-27T08:00:49.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "ff5203e0bb8e48de8e636552d863417e", "name": "tempest-VolumesActionsTest-1828341456"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ff5203e0bb8e48de8e636552d863417e", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ff5203e0bb8e48
    de8e636552d863417e", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:00:49,132 11638 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_get_volume_attachment) Found network None available for tenant
2022-07-27 11:00:49,357 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.224s
2022-07-27 11:00:49,357 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-810132807", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:49 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-2860b9a8-b09b-4431-bb58-069ca4e30e50', 'x-compute-request-id': 'req-2860b9a8-b09b-4431-bb58-069ca4e30e50', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "3a216a4d-47b2-4984-830d-f4bbef01e6f9", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "fCXHSZH68Bj4"}}'
2022-07-27 11:00:49,428 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9 0.066s
2022-07-27 11:00:49,429 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:49 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1321', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b068ba0e-107b-41b7-8a9b-0633e4f9a637', 'x-compute-request-id': 'req-b068ba0e-107b-41b7-8a9b-0633e4f9a637', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9'}
        Body: b'{"server": {"id": "3a216a4d-47b2-4984-830d-f4bbef01e6f9", "name": "tempest-VolumesActionsTest-instance-810132807", "status": "BUILD", "tenant_id": "ff5203e0bb8e48de8e636552d863417e", "user_id": "1459bdf747ad4c1ba27ba7c1768b978e", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:49Z", "updated": "2022-07-27T08:00:49Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}, {"rel": "bookmark", "href
    ": "http://[LB_IP_ADDRESS]:8774/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:00:50,551 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9 0.108s
2022-07-27 11:00:50,552 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:50 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4675', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-6face12a-47df-4628-a116-526376ecb14d', 'x-compute-request-id': 'req-6face12a-47df-4628-a116-526376ecb14d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9'}
        Body: b'{"server": {"id": "3a216a4d-47b2-4984-830d-f4bbef01e6f9", "name": "tempest-VolumesActionsTest-instance-810132807", "status": "ERROR", "tenant_id": "ff5203e0bb8e48de8e636552d863417e", "user_id": "1459bdf747ad4c1ba27ba7c1768b978e", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:00:49Z", "updated": "2022-07-27T08:00:50Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:00:50Z", "message": "Build of instance 3a216a4d-47b2-4984-830d-f4bbef01e6f9 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_se
    cret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/
2022-07-27 11:00:50,563 11638 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:00:50,807 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9 0.243s
2022-07-27 11:00:50,807 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:50 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-5ab9a569-ba51-437e-a3ca-03d0d431ba74', 'x-compute-request-id': 'req-5ab9a569-ba51-437e-a3ca-03d0d431ba74', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9'}
        Body: b''
2022-07-27 11:00:50,839 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9 0.030s
2022-07-27 11:00:50,839 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:00:50 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-c3e70bc0-f68f-4eef-99a9-b3eee25bf1fa', 'x-compute-request-id': 'req-c3e70bc0-f68f-4eef-99a9-b3eee25bf1fa', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/3a216a4d-47b2-4984-830d-f4bbef01e6f9'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 3a216a4d-47b2-4984-830d-f4bbef01e6f9 could not be found."}}'


tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_attach_volumes_with_nonexistent_volume_id[compute,id-f5e56b0a-5d02-43c1-a2a7-c9b792c2e3f6,negative]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_negative.py", line 179, in test_attach_volumes_with_nonexistent_volume_id
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 7b11bf37-40c0-487d-818b-789e3788879a failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:01:42Z', 'message': 'Build of instance 7b11bf37-40c0-487d-818b-789e3788879a aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 7b11bf37-40c0-487d-818b-789e3788879a aborted: Failure prepping block device.\n'}. Server boot request ID: req-f6c49ab9-0e3d-46d4-8bcc-989034aebe23.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:01:39,716 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://controller:5000/v3/auth/tokens 0.503s
2022-07-27 11:01:39,716 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:39 GMT', 'server': 'Apache', 'content-length': '3890', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6074c78d-a77d-4982-9e8f-69e5060e4a8b', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "6365ec3ceb494248a491ca49a9448b11", "name": "tempest-VolumesNegativeTest-1842976733-project", "password_expires_at": null}, "audit_ids": ["yGpeyJQVSaCJUzbJ9TKRTA"], "expires_at": "2022-07-28T08:01:39.000000Z", "issued_at": "2022-07-27T08:01:39.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "17cb318975904912b227c2047b2f310e", "name": "tempest-VolumesNegativeTest-1842976733"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/17cb318975904912b227c2047b2f310e", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/17cb318975904912b227c2047b2f310e", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/17cb318975904912b227c2047b2f310e", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]
    :8774/v2/17cb318975904912b227c2047b2f310e", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:01:39,717 11637 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-07-27 11:01:39,821 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.102s
2022-07-27 11:01:39,821 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesNegativeTest-601227325-desc", "domain_id": "default", "name": "tempest-VolumesNegativeTest-601227325"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:39 GMT', 'server': 'Apache', 'content-length': '373', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-75d73b57-e15a-4a5d-b934-6089aad470f0', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "36563bc957814e3b8bc69bb873716944", "name": "tempest-VolumesNegativeTest-601227325", "domain_id": "default", "description": "tempest-VolumesNegativeTest-601227325-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944"}}}\n'
2022-07-27 11:01:40,390 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.568s
2022-07-27 11:01:40,391 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesNegativeTest-601227325-project-admin", "password": "C5%5x74TTkrXQNS", "domain_id": "default"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:39 GMT', 'server': 'Apache', 'content-length': '293', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-aedfe087-5d08-42f3-b036-854d8c9be8a9', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "e37fc3bcb7484c57be4bfc17759fe096", "name": "tempest-VolumesNegativeTest-601227325-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/e37fc3bcb7484c57be4bfc17759fe096"}}}\n'
2022-07-27 11:01:40,422 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.030s
2022-07-27 11:01:40,423 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-663926e6-956d-4b5f-860e-c0663e3ac3e1', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links":
     {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:40,471 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c 0.047s
2022-07-27 11:01:40,472 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-b01dba23-0ae6-45f3-b659-2c462495244b', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:40,552 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.079s
2022-07-27 11:01:40,553 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-848963bd-6407-4e4c-a248-6718dc21f3ff', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:40,591 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c 0.036s
2022-07-27 11:01:40,591 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022
     08:01:40 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-0723ae30-23bc-465c-85d0-248b6a9fa08e', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:40,677 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.085s
2022-07-27 11:01:40,678 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-fb452731-153e-423c-aacd-39935b24213c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:40,714 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c 0.035s
2022-07-27 11:01:40,715 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-4cc665de-668b-4713-89c8-1b3dcc52fec6', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:40,795 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.079s
2022-07-27 11:01:40,795 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-47eef1fc-b6c5-4bf3-9ed6-b03e6f56882c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, 
    "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:40,831 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c 0.034s
2022-07-27 11:01:40,832 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-d14805cb-e652-4d14-9f8e-eb3f6b79b198', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/36563bc957814e3b8bc69bb873716944/users/e37fc3bcb7484c57be4bfc17759fe096/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:40,832 11637 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user e37fc3bcb7484c57be4bfc17759fe096 is created with scope project and roles: ['admin', 'admin']
2022-07-27 11:01:40,833 11637 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesNegativeTest-601227325-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': '36563bc957814e3b8bc69bb873716944', 'project_name': 'tempest-VolumesNegativeTest-601227325', 'tenant_id': '36563bc957814e3b8bc69bb873716944', 'tenant_name': 'tempest-VolumesNegativeTest-601227325', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'e37fc3bcb7484c57be4bfc17759fe096', 'system': None}, Network: None, Subnet: None, Router: None
2022-07-27 11:01:40,842 11637 INFO     [tempest.lib.common.fixed_network] (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id) Found network None available for tenant
2022-07-27 11:01:41,091 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.248s
2022-07-27 11:01:41,091 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesNegativeTest-instance-454577383", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:40 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-f6c49ab9-0e3d-46d4-8bcc-989034aebe23', 'x-compute-request-id': 'req-f6c49ab9-0e3d-46d4-8bcc-989034aebe23', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "7b11bf37-40c0-487d-818b-789e3788879a", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a"}, {"rel": "bookmark", "href": "http://192.1
    68.16.202:8774/servers/7b11bf37-40c0-487d-818b-789e3788879a"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "UMDwrR84uZ8G"}}'
2022-07-27 11:01:41,168 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a 0.071s
2022-07-27 11:01:41,168 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:41 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-52264821-3476-4ac0-bb83-ff775c9ee0d1', 'x-compute-request-id': 'req-52264821-3476-4ac0-bb83-ff775c9ee0d1', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a'}
        Body: b'{"server": {"id": "7b11bf37-40c0-487d-818b-789e3788879a", "name": "tempest-VolumesNegativeTest-instance-454577383", "status": "BUILD", "tenant_id": "17cb318975904912b227c2047b2f310e", "user_id": "6365ec3ceb494248a491ca49a9448b11", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:41Z", "updated": "2022-07-27T08:01:41Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/7b11bf37-40c0-487d-818b-789e3788879a"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:01:42,279 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a 0.095s
2022-07-27 11:01:42,279 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4676', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-69ae60f9-2b06-4f20-83c3-bd15bb4dd123', 'x-compute-request-id': 'req-69ae60f9-2b06-4f20-83c3-bd15bb4dd123', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a'}
        Body: b'{"server": {"id": "7b11bf37-40c0-487d-818b-789e3788879a", "name": "tempest-VolumesNegativeTest-instance-454577383", "status": "ERROR", "tenant_id": "17cb318975904912b227c2047b2f310e", "user_id": "6365ec3ceb494248a491ca49a9448b11", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://192.168.16
    .202:8774/flavors/0"}]}, "created": "2022-07-27T08:01:41Z", "updated": "2022-07-27T08:01:42Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/7b11bf37-40c0-487d-818b-789e3788879a"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:01:42Z", "message": "Build of instance 7b11bf37-40c0-487d-818b-789e3788879a aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute
2022-07-27 11:01:42,290 11637 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:01:43,231 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a 0.941s
2022-07-27 11:01:43,232 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', '
    Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-ef47a8a4-3169-4596-a6b4-03940933bd8f', 'x-compute-request-id': 'req-ef47a8a4-3169-4596-a6b4-03940933bd8f', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a'}
        Body: b''
2022-07-27 11:01:43,267 11637 INFO     [tempest.lib.common.rest_client] Request (VolumesNegativeTest:test_attach_volumes_with_nonexistent_volume_id): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a 0.033s
2022-07-27 11:01:43,267 11637 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-1aa7d383-a52e-4966-9c53-3f2b20624d56', 'x-compute-request-id': 'req-1aa7d383-a52e-4966-9c53-3f2b20624d56', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/7b11bf37-40c0-487d-818b-789e3788879a'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 7b11bf37-40c0-487d-818b-789e3788879a could not be found."}}'


tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_delete_with_volume_in_use[compute,id-8567b54c-4455-446d-a1cf-651ddeaa3ff2]
-----------------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_snapshots.py", line 48, in test_snapshot_create_delete_with_volume_in_use
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 13ec6bd9-2046-4b19-a356-2b71d13765a3 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:01:52Z', 'message': 'Build of instance 13ec6bd9-2046-4b19-a356-2b71d13765a3 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 13ec6bd9-2046-4b19-a356-2b71d13765a3 aborted: Failure prepping block device.\n'}. Server boot request ID: req-40ea3975-117e-489c-8bed-1a908fbdf446.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:01:50,341 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://controller:5000/v3/auth/tokens 0.564s
2022-07-27 11:01:50,342 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:49 GMT', 'server': 'Apache', 'content-length': '3896', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-1d722955-474b-4a80-9c41-bebe35a0c2e9', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "c21c8c6163c14424a2f84337fdfc76f2", "name": "tempest-VolumesSnapshotTestJSON-162829006-project", "password_expires_at": null}, "audit_ids": ["ItUFvoI4RpSX3g7hxuo7bg"], "expires_at": "2022-07-28T08:01:50.000000Z", "issued_at": "2022-07-27T08:01:50.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "733e24d451be4fe89fcce0f9265f7041", "name": "tempest-VolumesSnapshotTestJSON-162829006"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://192.
    168.16.202:8774/v2/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:01:50,343 11638 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-07-27 11:01:50,457 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.113s
2022-07-27 11:01:50,458 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesSnapshotTestJSON-745334794-desc", "domain_id": "default", "name": "tempest-VolumesSnapshotTestJSON-745334794"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:50 GMT', 'server': 'Apache', 'content-length': '381', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-37f78620-760f-492e-8ebf-4684fcd4d955', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "289a460703c643b9b0104ef874480315", "name": "tempest-VolumesSnapshotTestJSON-745334794", "domain_id": "default", "description": "tempest-VolumesSnapshotTestJSON-745334794-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315"}}}\n'
2022-07-27 11:01:51,036 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.577s
2022-07-27 11:01:51,037 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesSnapshotTestJSON-745334794-project-admin", "password": "K5%IbAWoSGL&uV3", "domain_id": "default"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:50 GMT', 'server': 'Apache', 'content-length': '297', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6b537aca-a7f2-489d-b9bd-4f536227c342', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "f7354fe8a6c3425284c895b2c887e6cf", "name": "tempest-VolumesSnapshotTestJSON-745334794-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/f7354fe8a6c3425284c895b2c887e6cf"}}}\n'
2022-07-27 11:01:51,071 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.033s
2022-07-27 11:01:51,071 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-c0d46c3b-a1e0-4d27-bf4a-e6dc60485fc2', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null
    , "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:51,123 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.051s
2022-07-27 11:01:51,124 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-10255660-1069-462d-b7d8-7a18abe69c72', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:51,210 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.085s
2022-07-27 11:01:51,211 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-34e59d16-64f9-41ce-bdfc-a19270d8d643', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:51,249 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.037s
2022-07-27 11:01:51,249 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Bod
    y: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-7dc722c5-0906-48b8-bb93-ddc04e8d1cc2', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:51,332 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.081s
2022-07-27 11:01:51,332 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-3551f902-918e-4ecf-9334-552462f409e1', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:51,369 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.035s
2022-07-27 11:01:51,369 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6cc13ed4-5776-420a-bf95-950754defece', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:51,449 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.079s
2022-07-27 11:01:51,450 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-61a30848-d15d-44dc-a3fc-6531ad658889', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96
    215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-07-27 11:01:51,489 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c 0.038s
2022-07-27 11:01:51,490 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-af852d0b-fadd-43b1-97ba-5bb90da26497', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/289a460703c643b9b0104ef874480315/users/f7354fe8a6c3425284c895b2c887e6cf/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-07-27 11:01:51,490 11638 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user f7354fe8a6c3425284c895b2c887e6cf is created with scope project and roles: ['admin', 'admin']
2022-07-27 11:01:51,491 11638 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesSnapshotTestJSON-745334794-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': '289a460703c643b9b0104ef874480315', 'project_name': 'tempest-VolumesSnapshotTestJSON-745334794', 'tenant_id': '289a460703c643b9b0104ef874480315', 'tenant_name': 'tempest-VolumesSnapshotTestJSON-745334794', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': 'f7354fe8a6c3425284c895b2c887e6cf', 'system': None}, Network: None, Subnet: None, Router: None
2022-07-27 11:01:51,501 11638 INFO     [tempest.lib.common.fixed_network] (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use) Found network None available for tenant
2022-07-27 11:01:51,756 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.254s
2022-07-27 11:01:51,757 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesSnapshotTestJSON-instance-321796337", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-40ea3975-117e-489c-8bed-1a908fbdf446', 'x-compute-request-id': 'req-40ea3975-117e-489c-8bed-1a908fbdf446', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "13ec6bd9-2046-4b19-a356-2b71d13765a3", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8
    774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "owP76ER5Bbs5"}}'
2022-07-27 11:01:51,831 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3 0.069s
2022-07-27 11:01:51,831 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1326', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-3a8e4477-4c94-426e-ab4c-39160a36adb4', 'x-compute-request-id': 'req-3a8e4477-4c94-426e-ab4c-39160a36adb4', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3'}
        Body: b'{"server": {"id": "13ec6bd9-2046-4b19-a356-2b71d13765a3", "name": "tempest-VolumesSnapshotTestJSON-instance-321796337", "status": "BUILD", "tenant_id": "733e24d451be4fe89fcce0f9265f7041", "user_id": "c21c8c6163c14424a2f84337fdfc76f2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:51Z", "updated": "2022-07-27T08:01:51Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:01:52,949 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3 0.103s
2022-07-27 11:01:52,950 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4680', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-6ed8edda-8f26-4a86-9777-3bf573670275', 'x-compute-request-id': 'req-6ed8edda-8f26-4a86-9777-3bf573670275', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3'}
        Body: b'{"server": {"id": "13ec6bd9-2046-4b19-a356-2b71d13765a3", "name": "tempest-VolumesSnapshotTestJSON-instance-321796337", "status": "ERROR", "tenant_id": "733e24d451be4fe89fcce0f9265f7041", "user_id": "c21c8c6163c14424a2f84337fdfc76f2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e
    9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:51Z", "updated": "2022-07-27T08:01:52Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:01:52Z", "message": "Build of instance 13ec6bd9-2046-4b19-a356-2b71d13765a3 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/com
2022-07-27 11:01:52,961 11638 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:01:53,923 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3 0.961s
2022-07-27 11:0
    1:53,923 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-209a1272-eca8-4d02-9c38-ec791d2dccdb', 'x-compute-request-id': 'req-209a1272-eca8-4d02-9c38-ec791d2dccdb', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3'}
        Body: b''
2022-07-27 11:01:53,960 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_delete_with_volume_in_use): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3 0.036s
2022-07-27 11:01:53,961 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:53 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-293fb147-5731-4160-97e7-21b99992e2f2', 'x-compute-request-id': 'req-293fb147-5731-4160-97e7-21b99992e2f2', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/13ec6bd9-2046-4b19-a356-2b71d13765a3'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 13ec6bd9-2046-4b19-a356-2b71d13765a3 could not be found."}}'


tempest.api.volume.test_volumes_extend.VolumesExtendAttachedTest.test_extend_attached_volume[compute,id-301f5a30-1c6f-4ea0-be1a-91fd28d44354]
---------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_extend.py", line 187, in test_extend_attached_volume
    self._test_extend_attached_volume(volume)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_extend.py", line 117, in _test_extend_attached_volume
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 6d3ef06b-aa8c-437e-8712-2175b9e1c182 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:01:53Z', 'message': 'Build of instance 6d3ef06b-aa8c-437e-8712-2175b9e1c182 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 6d3ef06b-aa8c-437e-8712-2175b9e1c182 aborted: Failure prepping block device.\n'}. Server boot request ID: req-07fbebee-8e65-4cdf-854b-b2267c461b8a.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:01:49,854 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 202 POST http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes 0.397s
2022-07-27 11:01:49,855 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: {"volume": {"size": 1, "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:49 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '892', 'x-compute-request-id': 'req-4f885034-1efe-4b38-a32e-7af21e1fe01a', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-4f885034-1efe-4b38-a32e-7af21e1fe01a', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes'}
        Body: b'{"volume": {"id": "590e939d-8e90-429e-8fb9-bb445cb230f5", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-07-27T08:01:49.795620", "updated_at": null, "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}], "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null}}'
2022-07-27 11:01:49,905 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5 0.040s
2022-07-27 11:01:49,906 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:49 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1071', 'x-compute-request-id': 'req-6ebea609-e2bc-4976-ab74-c0201e5e9c3b', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-6ebea609-e2bc-4976-ab74-c0201e5e9c3b', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5'}
        Body: b'{"volume": {"id": "590e939d-8e90-429e-8fb9-bb445cb230f5", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-07-27T08:01:49.000000", "updated_at": null, "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}], "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": null, "os-vol-tenant-attr:tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:nam
    e_id": null}}'
2022-07-27 11:01:50,958 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5 0.040s
2022-07-27 11:01:50,959 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:50 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1129', 'x-compute-request-id': 'req-af4807ae-2128-4f58-9cfd-6601640b5264', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-af4807ae-2128-4f58-9cfd-6601640b5264', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5'}
        Body: b'{"volume": {"id": "590e939d-8e90-429e-8fb9-bb445cb230f5", "status": "creating", "size": 1, "availability_zone": "nova", "created_at": "2022-07-27T08:01:49.000000", "updated_at": "2022-07-27T08:01:49.000000", "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}], "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "multiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": "rack03-server59@LIGHTOSsetykm#setykm", "os-vol-tenant-attr:tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null}}'
2022-07-27 11:01:52,026 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5 0.054s
2022-07-27 11:01:52,027 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.42', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:51 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1130', 'x-compute-request-id': 'req-fb8a3ceb-9045-42cf-85e1-f308b8c737d6', 'openstack-api-version': 'volume 3.42', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-fb8a3ceb-9045-42cf-85e1-f308b8c737d6', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5'}
        Body: b'{"volume": {"id": "590e939d-8e90-429e-8fb9-bb445cb230f5", "status": "available", "size": 1, "availability_zone": "nova", "created_at": "2022-07-27T08:01:49.000000", "updated_at": "2022-07-27T08:01:51.000000", "name": "tempest-VolumesExtendAttachedTest-Volume-1217672902", "description": null, "volume_type": "__DEFAULT__", "snapshot_id": null, "source_volid": null, "metadata": {}, "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8776/05b96c8d9b5a4a599423aebc04d84ba4/volumes/590e939d-8e90-429e-8fb9-bb445cb230f5"}], "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "bootable": "false", "encrypted": false, "replication_status": null, "consistencygroup_id": null, "mu
    ltiattach": false, "attachments": [], "migration_status": null, "group_id": null, "provider_id": null, "os-vol-host-attr:host": "rack03-server59@LIGHTOSsetykm#setykm", "os-vol-tenant-attr:tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "os-vol-mig-status-attr:migstat": null, "os-vol-mig-status-attr:name_id": null}}'
2022-07-27 11:01:52,038 11639 INFO     [tempest.common.waiters] volume 590e939d-8e90-429e-8fb9-bb445cb230f5 reached available after waiting for 3.038889 seconds
2022-07-27 11:01:52,613 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 201 POST http://controller:5000/v3/auth/tokens 0.570s
2022-07-27 11:01:52,614 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache', 'content-length': '3902', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-a13bdadf-8ad7-47e7-beb1-e7dc70e56698', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "name": "tempest-VolumesExtendAttachedTest-1172255721-project", "password_expires_at": null}, "audit_ids": ["9PcRQRKqTpWhzF4GBWM8Nw"], "expires_at": "2022-07-28T08:01:52.000000Z", "issued_at": "2022-07-27T08:01:52.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "05b96c8d9b5a4a599423aebc04d84ba4", "name": "tempest-VolumesExtendAttachedTest-1172255721"}, "is_domain": false, "roles": [{"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/05b96c8d9b5a4a599423aebc04d84ba4", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:
    8776/v3/05b96c8d9b5a4a599423aebc04d84ba4", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/05b96c8d9b5a4a599423aebc04d84ba4", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/05b96c8d9b5a4a599423aebc04d84ba4", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:01:52,623 11639 INFO     [tempest.lib.common.fixed_network] (VolumesExtendAttachedTest:test_extend_attached_volume) Found network None available for tenant
2022-07-27 11:01:52,870 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.246s
2022-07-27 11:01:52,871 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesExtendAttachedTest-instance-1578200582", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-07fbebee-8e65-4cdf-854b-b2267c461b8a', 'x-compute-request-id': 'req-07fbebee-8e65-4cdf-854b-b2267c461b8a', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "6d3ef06b-aa8c-437e-8712-2175b9e1c182", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "c2QMLG5St6H7"}}'
2022-07-27 11:01:52,968 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182 0.092s
2022-07-27 11:01:52,968 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:52 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1329', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-2c2bbb83-0f2c-4bfc-a1ce-e335be7849f9', 'x-compute-request-id': 'req-2c2bbb83-0f2c-4bfc-a1ce-e335be7849f9', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182'}
        Body: b'{"server": {"id": "6d3ef06b-aa8c-437e-8712-2175b9e1c182", "name": "tempest-VolumesExtendAttachedTest-instance-1578200582", "status": "BUILD", "tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "metadata": {}, "hostId": 
    "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:52Z", "updated": "2022-07-27T08:01:52Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:01:54,092 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182 0.109s
2022-07-27 11:01:54,092 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:53 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4683', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-034ff99b-4480-4598-8bf8-2e6891eb1363', 'x-compute-request-id': 'req-034ff99b-4480-4598-8bf8-2e6891eb1363', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182'}
        Body: b'{"server": {"id": "6d3ef06b-aa8c-437e-8712-2175b9e1c182", "name": "tempest-VolumesExtendAttachedTest-instance-1578200582", "status": "ERROR", "tenant_id": "05b96c8d9b5a4a599423aebc04d84ba4", "user_id": "1c80277eead64e2ebdf16c0e7cb9ab0a", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:01:52Z", "updated": "2022-07-27T08:01:53Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:01:53Z", "message": "Build of instance 6d3ef06b-aa8c-437e-8712-2175b9e1c182 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, i
    n get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/
2022-07-27 11:01:54,103 11639 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 2 second wait
2022-07-27 11:01:54,351 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182 0.246s
2022-07-27 11:01:54,351 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:54 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d1f25e4c-1663-4b45-898a-b66fb0620f19', 'x-compute-request-id': 'req-d1f25e4c-1663-4b45-898a-b66fb0620f19', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182'}
        Body: b''
2022-07-27 11:01:54,387 11639 INFO     [tempest.lib.common.rest_client] Request (VolumesExtendAttachedTest:test_extend_attached_volume): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182 0.034s
2022-07-27 11:01:54,387 11639 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:54 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7c605f4d-f497-475b-be62-68945ce423e8', 'x-compute-request-id': 'req-7c605f4d-f497-475b-be62-68945ce423e8', 'connection': 'close', 'content-type': 'a
    pplication/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/6d3ef06b-aa8c-437e-8712-2175b9e1c182'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 6d3ef06b-aa8c-437e-8712-2175b9e1c182 could not be found."}}'


tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_offline_delete_online[compute,id-5210a1de-85a0-11e6-bb21-641c676a5d61]
-------------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_snapshots.py", line 83, in test_snapshot_create_offline_delete_online
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server 99c027a9-2971-4778-94d9-49b5c8e0a148 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-07-27T08:02:01Z', 'message': 'Build of instance 99c027a9-2971-4778-94d9-49b5c8e0a148 aborted: Failure prepping block device.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2703, in _build_resources\n    self._default_block_device_names(instance, image_meta,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2040, in _default_block_device_names\n    self._default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 1959, in _default_device_names_for_instance\n    self.driver.default_device_names_for_instance(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py", line 12046, in default_device_names_for_instance\n    block_device_info = driver.get_block_device_info(instance,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py", line 60, in get_block_device_info\n    \'image\': virt_block_device.convert_local_images(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 860, in _convert_block_devices\n    devices.append(device_type(bdm))\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 122, in __init__\n    self._transform()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py", line 270, in _transform\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py", line 67, in getter\n    self.obj_load_attr(name)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py", line 340, in obj_load_attr\n    raise exception.ObjectActionError(\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2317, in _do_build_and_run_instance\n    self._build_and_run_instance(context, instance, image,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2526, in _build_and_run_instance\n    compute_utils.notify_about_instance_create(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 227, in __exit__\n    self.force_reraise()\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py", line 200, in force_reraise\n    raise self.value\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2477, in _build_and_run_instance\n    with self._build_resources(context, instance,\n  File "/usr/lib/python3.8/contextlib.py", line 113, in __enter__\n    return next(self.gen)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py", line 2729, in _build_resources\n    raise exception.BuildAbortException(instance_uuid=instance.uuid,\nnova.exception.BuildAbortException: Build of instance 99c027a9-2971-4778-94d9-49b5c8e0a148 aborted: Failure prepping block device.\n'}. Server boot request ID: req-b1905f03-2330-4e70-97cf-755fa97d0583.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-07-27 11:01:57,623 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 202 POST http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots 0.139s
2022-07-27 11:01:57,624 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"snapshot": {"volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "name": "tempest-VolumesSnapshotTestJSON-Snapshot-2108704080"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:57 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '310', 'x-compute-request-id': 'req-b0c84eec-3143-495b-8079-79a744317eef', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-b0c84eec-3143-495b-8079-79a744317eef', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots'}
        Body: b'{"snapshot": {"id": "2ca998e2-c65a-436b-bb4a-9fd87add1dae", "created_at": "2022-07-27T08:01:57.572846", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Snapshot-2108704080", "description": null, "volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "status": "creating", "size": 1, "metadata": {}}}'
2022-07-27 11:01:57,655 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae 0.026s
2022-07-27 11:01:57,656 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:57 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '442', 'x-compute-request-id': 'req-86070e07-8a1d-402d-9159-4d5111d03a6c', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-86070e07-8a1d-402d-9159-4d5111d03a6c', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae'}
        Body: b'{"snapshot": {"id": "2ca998e2-c65a-436b-bb4a-9fd87add1dae", "created_at": "2022-07-27T08:01:57.000000", "updated_at": null, "name": "tempest-VolumesSnapshotTestJSON-Snapshot-2108704080", "description": null, "volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "status": "creating", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "733e24d451be4fe89fcce0f9265f7041", "os-extended-snapshot-attributes:progress": "0%"}}'
2022-07-27 11:01:58,688 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae 0.026s
2022-07-27 11:01:58,689 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:58 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '442', 'x-compute-request-id': 'req-97ba0516-6d46-4c7e-a31d-3c1e15f97842', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-97ba0516-6d46-4c7e-a31d-3c1e15f97842', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae'}
        Body: b'{"snapshot": {"id": "2ca998e2-c65a-436b-bb4a-9fd87add1dae", "created_at": "2022-07-27T08:01:57.000000", "updated_at": null, "name": "tempest-VolumesSnapshotTe
    stJSON-Snapshot-2108704080", "description": null, "volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "status": "creating", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "733e24d451be4fe89fcce0f9265f7041", "os-extended-snapshot-attributes:progress": "0%"}}'
2022-07-27 11:01:59,724 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae 0.029s
2022-07-27 11:01:59,725 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:59 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '469', 'x-compute-request-id': 'req-a81ad784-8778-470b-be65-21544be3b39d', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-a81ad784-8778-470b-be65-21544be3b39d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041/snapshots/2ca998e2-c65a-436b-bb4a-9fd87add1dae'}
        Body: b'{"snapshot": {"id": "2ca998e2-c65a-436b-bb4a-9fd87add1dae", "created_at": "2022-07-27T08:01:57.000000", "updated_at": "2022-07-27T08:01:58.000000", "name": "tempest-VolumesSnapshotTestJSON-Snapshot-2108704080", "description": null, "volume_id": "f82e3b52-cc05-4a4e-b9c0-5cbdb96be06a", "status": "available", "size": 1, "metadata": {}, "os-extended-snapshot-attributes:project_id": "733e24d451be4fe89fcce0f9265f7041", "os-extended-snapshot-attributes:progress": "100%"}}'
2022-07-27 11:01:59,730 11638 INFO     [tempest.common.waiters] snapshot 2ca998e2-c65a-436b-bb4a-9fd87add1dae reached available after waiting for 2.730394 seconds
2022-07-27 11:02:00,305 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 201 POST http://controller:5000/v3/auth/tokens 0.567s
2022-07-27 11:02:00,306 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:01:59 GMT', 'server': 'Apache', 'content-length': '3896', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-11f7abe4-d247-4a56-a186-3a8c36c09874', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "c21c8c6163c14424a2f84337fdfc76f2", "name": "tempest-VolumesSnapshotTestJSON-162829006-project", "password_expires_at": null}, "audit_ids": ["TfP5paY_Se6ApYWfav-Stw"], "expires_at": "2022-07-28T08:02:00.000000Z", "issued_at": "2022-07-27T08:02:00.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "733e24d451be4fe89fcce0f9265f7041", "name": "tempest-VolumesSnapshotTestJSON-162829006"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59
    512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/733e24d451be4fe89fcce0f9265f7041", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-07-27 11:02:00,315 11638 INFO     [tempest.lib.common.fixed_network] (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online) Found network None available for tenant
2022-07-27 11:02:00,576 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.259s
2022-07-27 11:02:00,576 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesSnapshotTestJSON-instance-504775029", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:00 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b1905f03-2330-4e70-97cf-755fa97d0583', 'x-compute-request-id': 'req-b1905f03-2330-4e70-97cf-755fa97d0583', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "99c027a9-2971-4778-94d9-49b5c8e0a148", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a
    148"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "4o34L5pQ6qHK"}}'
2022-07-27 11:02:00,649 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148 0.067s
2022-07-27 11:02:00,649 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:00 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1326', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-aa85bc4e-9335-4067-bc6e-c2c238c28305', 'x-compute-request-id': 'req-aa85bc4e-9335-4067-bc6e-c2c238c28305', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148'}
        Body: b'{"server": {"id": "99c027a9-2971-4778-94d9-49b5c8e0a148", "name": "tempest-VolumesSnapshotTestJSON-instance-504775029", "status": "BUILD", "tenant_id": "733e24d451be4fe89fcce0f9265f7041", "user_id": "c21c8c6163c14424a2f84337fdfc76f2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:02:00Z", "updated": "2022-07-27T08:02:00Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-07-27 11:02:01,757 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148 0.096s
2022-07-27 11:02:01,758 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:01 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '4680', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-286f411d-73c8-4caa-b7da-777c6ec87b56', 'x-compute-request-id': 'req-286f411d-73c8-4caa-b7da-777c6ec87b56', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148'}
        Body: b'{"server": {"id": "99c027a9-2971-4778-94d9-49b5c8e0a148", "name": "tempest-VolumesSnapshotTestJSON-instance-504775029", "status": "ERROR", "tenant_id": "733e24d451be4fe89fcce0f9265f7041", "user_id": "c21c8c6163c14424a2f84337fdfc76f2", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", 
    "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-07-27T08:02:00Z", "updated": "2022-07-27T08:02:01Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/99c027a9-2971-4778-94d9-49b5c8e0a148"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-07-27T08:02:01Z", "message": "Build of instance 99c027a9-2971-4778-94d9-49b5c8e0a148 aborted: Failure prepping block device.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2703, in _build_resources\\n    self._default_block_device_names(instance, image_meta,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2040, in _default_block_device_names\\n    self._default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 1959, in _default_device_names_for_instance\\n    self.driver.default_device_names_for_instance(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/libvirt/driver.py\\", line 12046, in default_device_names_for_instance\\n    block_device_info = driver.get_block_device_info(instance,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/driver.py\\", line 60, in get_block_device_info\\n    \'image\': virt_block_device.convert_local_images(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 860, in _convert_block_devices\\n    devices.append(device_type(bdm))\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 122, in __init__\\n    self._transform()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/virt/block_device.py\\", line 270, in _transform\\n    \'encryption_secret_uuid\': self._bdm_obj.encryption_secret_uuid,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_versionedobjects/base.py\\", line 67, in getter\\n    self.obj_load_attr(name)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/objects/block_device.py\\", line 340, in obj_load_attr\\n    raise exception.ObjectActionError(\\nnova.exception.ObjectActionError: Object action obj_load_attr failed because: attribute encryption_secret_uuid not lazy-loadable\\n\\nDuring handling of the above exception, another exception occurred:\\n\\nTraceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2317, in _do_build_and_run_instance\\n    self._build_and_run_instance(context, instance, image,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2526, in _build_and_run_instance\\n    compute_utils.notify_about_instance_create(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 227, in __exit__\\n    self.force_reraise()\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_utils/excutils.py\\", line 200, in force_reraise\\n    raise self.value\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/compute/manager.py\\", line 2477, in _build_and_run_instance\\n    with self._build_resources(context, instance,\\n  File \\"/usr/lib/python3.8/contextlib.py\\", line 113, in __enter__\\n    return next(self.gen)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/com
2022-07-27 11:02:01,769 11638 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-07-27 11:02:02,014 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148 0.244s
2022-07-27 11:02:02,015 11638 DEBUG    [tempest.lib.common.rest_client] Reque
    st - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:01 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-6955e6e2-5064-4e0d-9b59-ab51ab35ce7d', 'x-compute-request-id': 'req-6955e6e2-5064-4e0d-9b59-ab51ab35ce7d', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148'}
        Body: b''
2022-07-27 11:02:02,054 11638 INFO     [tempest.lib.common.rest_client] Request (VolumesSnapshotTestJSON:test_snapshot_create_offline_delete_online): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148 0.038s
2022-07-27 11:02:02,054 11638 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Wed, 27 Jul 2022 08:02:02 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-0402212f-9236-4d15-ae40-c6fa9d026150', 'x-compute-request-id': 'req-0402212f-9236-4d15-ae40-c6fa9d026150', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/99c027a9-2971-4778-94d9-49b5c8e0a148'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance 99c027a9-2971-4778-94d9-49b5c8e0a148 could not be found."}}'



======
Totals
======
Ran: 219 tests in 276.6722 sec.
 - Passed: 205
 - Skipped: 6
 - Expected Fail: 0
 - Unexpected Success: 0
 - Failed: 8
Sum of execute time for each test: 404.5078 sec.

==============
Worker Balance
==============
 - Worker 0 (92 tests) => 0:03:49.075914
 - Worker 1 (50 tests) => 0:04:06.750974
 - Worker 2 (77 tests) => 0:04:36.672194
