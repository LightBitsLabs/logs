{1} setUpClass (tempest.api.volume.admin.test_snapshot_manage.SnapshotManageAdminTest) ... SKIPPED: Manage snapshot tests are disabled
{2} tempest.api.compute.volumes.test_volume_snapshots.VolumesSnapshotsTestJSON.test_volume_snapshot_create_get_list_delete [6.047027s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_invalid_size [0.116850s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_zero [0.019085s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_create_volume_without_passing_size [0.016332s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_delete_invalid_volume_id [0.048534s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_delete_volume_without_passing_volume_id [0.012509s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_get_volume_without_passing_volume_id [0.011691s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_volume_delete_nonexistent_volume_id [0.047682s] ... ok
{2} tempest.api.compute.volumes.test_volumes_negative.VolumesNegativeTest.test_volume_get_nonexistent_volume_id [0.048794s] ... ok
{2} tempest.api.volume.admin.test_backends_capabilities.BackendsCapabilitiesAdminTestsJSON.test_compare_volume_stats_values [0.082861s] ... ok
{2} tempest.api.volume.admin.test_backends_capabilities.BackendsCapabilitiesAdminTestsJSON.test_get_capabilities_backend [0.046943s] ... ok
{1} tempest.api.volume.test_volumes_extend.VolumesExtendAttachedTest.test_extend_attached_volume [19.278559s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_boot_from_multiattach_volume [24.421023s] ... ok
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_create_group_from_group_snapshot [11.760662s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_attach_volumes_with_nonexistent_volume_id [6.664514s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_from_deactivated_image [0.524253s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_from_image_with_decreasing_size [0.355733s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_invalid_size [0.016718s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_snapshot_id [0.030258s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_source_volid [0.028476s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_nonexistent_volume_type [0.029853s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_negative [0.015860s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_with_size_zero [0.015759s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_create_volume_without_passing_size [0.014490s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_delete_invalid_volume_id [0.027578s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_delete_volume_without_passing_volume_id [0.012896s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_detach_volumes_with_invalid_volume_id [0.028258s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_get_invalid_volume_id [0.025286s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_get_volume_without_passing_volume_id [0.011613s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_detail_with_invalid_status [0.063176s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_detail_with_nonexistent_name [0.063730s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_with_invalid_status [0.054726s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_list_volumes_with_nonexistent_name [0.056591s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_reserve_volume_with_negative_volume_status [0.133706s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_reserve_volume_with_nonexistent_volume_id [0.031592s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_unreserve_volume_with_nonexistent_volume_id [0.026872s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_empty_volume_id [0.012537s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_invalid_volume_id [0.031650s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_update_volume_with_nonexistent_volume_id [0.026887s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_delete_nonexistent_volume_id [0.027321s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_None_size [0.016352s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_non_number_size [0.015725s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_nonexistent_volume_id [0.030291s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_with_size_smaller_than_original_size [0.016277s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_extend_without_passing_volume_id [0.031137s] ... ok
{1} tempest.api.volume.test_volumes_negative.VolumesNegativeTest.test_volume_get_nonexistent_volume_id [0.028662s] ... ok
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_delete_group_snapshots_following_updated_volumes [17.286023s] ... ok
{2} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsTest.test_group_snapshot_create_show_list_delete [7.884689s] ... ok
{2} tempest.api.volume.admin.test_group_types.GroupTypesTest.test_group_type_create_list_update_show_delete [0.359309s] ... ok
{2} tempest.api.volume.admin.test_group_types.GroupTypesTest.test_group_type_list_by_optional_params [0.310404s] ... ok
{2} tempest.api.volume.admin.test_groups.GroupsTest.test_group_create_show_list_delete [8.265431s] ... ok
{2} tempest.api.volume.admin.test_groups.GroupsTest.test_group_update [10.253442s] ... ok
{2} tempest.api.volume.admin.test_groups.GroupsV320Test.test_reset_group_status [3.079114s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_list_get_volume_attachments_multiattach [78.395225s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_resize_server_with_multiattached_volume ... SKIPPED: Resize not available.
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_reset_snapshot_status [0.289987s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_creating [3.566623s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_deleting [3.577146s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_error [3.526427s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_delete_with_volume_in_use [72.427606s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_snapshot_force_delete_when_snapshot_is_error_deleting [3.558960s] ... ok
{2} tempest.api.volume.admin.test_snapshots_actions.SnapshotsActionsTest.test_update_snapshot_status [0.229684s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_get_list_update_delete [3.545217s] ... ok
{2} tempest.api.volume.admin.test_user_messages.UserMessagesTest.test_delete_message [1.867544s] ... ok
{0} tempest.api.compute.volumes.test_attach_volume.AttachVolumeMultiAttachTest.test_snapshot_volume_backed_multiattach [26.481574s] ... ok
{2} tempest.api.volume.admin.test_user_messages.UserMessagesTest.test_list_show_messages [1.613530s] ... ok
{2} tempest.api.volume.admin.test_volume_hosts.VolumeHostsAdminTestsJSON.test_list_hosts [0.146401s] ... ok
{2} tempest.api.volume.admin.test_volume_hosts.VolumeHostsAdminTestsJSON.test_show_host [0.326032s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_snapshot_create_offline_delete_online [20.586952s] ... ok
{2} tempest.api.volume.admin.test_volume_pools.VolumePoolsAdminTestsJSON.test_get_pools_without_details [0.202016s] ... ok
{0} tempest.api.compute.volumes.test_volumes_get.VolumesGetTestJSON.test_volume_create_get_delete [2.890726s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_volume_from_snapshot [7.364592s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_delete_quota [0.686024s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_list_default_quotas [0.107505s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_list_quotas [0.115905s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_quota_usage [3.053842s] ... ok
{0} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list [0.089930s] ... ok
{0} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_param_limit [0.090606s] ... ok
{0} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_param_offset_and_limit [0.171191s] ... ok
{0} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_detail_param_limit [0.088249s] ... ok
{0} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_detail_param_offset_and_limit [0.186219s] ... ok
{0} tempest.api.compute.volumes.test_volumes_list.VolumesTestJSON.test_volume_list_with_details [0.087325s] ... ok
{1} tempest.api.volume.test_volumes_snapshots.VolumesSnapshotTestJSON.test_volume_from_snapshot_no_size [7.374103s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_quota_usage_after_volume_transfer [3.909056s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_show_quota_usage [0.131660s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas.VolumeQuotasAdminTestJSON.test_update_all_quota_resources_for_tenant [0.543570s] ... ok
{0} tempest.api.volume.admin.test_encrypted_volumes_extend.EncryptedVolumesExtendAttachedTest.test_extend_attached_encrypted_volume_luksv1 ... SKIPPED: Attached encrypted volume extend is disabled.
{2} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_quota_volume_gigabytes [0.399604s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_quota_volumes [0.402065s] ... ok
{2} tempest.api.volume.admin.test_volume_quotas_negative.VolumeQuotasNegativeTestJSON.test_volume_extend_gigabytes_quota_deviation [0.332371s] ... ok
{2} setUpClass (tempest.api.volume.admin.test_volume_retype.VolumeRetypeWithMigrationTest) ... SKIPPED: Cinder multi-backend feature disabled
{2} setUpClass (tempest.api.volume.admin.test_volume_types.VolumeTypesTest) [0.000000s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 445, in _make_request
    six.raise_from(e, None)

      File "<string>", line 3, in raise_from

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 440, in _make_request
    httplib_response = conn.getresponse()

      File "/usr/lib64/python3.6/http/client.py", line 1346, in getresponse
    response.begin()

      File "/usr/lib64/python3.6/http/client.py", line 307, in begin
    version, status, reason = self._read_status()

      File "/usr/lib64/python3.6/http/client.py", line 268, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")

      File "/usr/lib64/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)

    socket.timeout: timed out

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 168, in setUpClass
    raise value.with_traceback(trace)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 153, in setUpClass
    cls.setup_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 53, in setup_credentials
    super(BaseVolumeTest, cls).setup_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 373, in setup_credentials
    credential_type=credentials_type)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 701, in get_client_manager
    cred_provider = cls._get_credentials_provider()

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 678, in _get_credentials_provider
    force_tenant_isolation=force_tenant_isolation)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 141, in get_credentials_provider
    **get_dynamic_provider_params(identity_version))

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 73, in get_dynamic_provider_params
    fill_in=True, identity_version=identity_version)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 258, in get_configured_admin_credentials
    identity_version=identity_version, **params)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 303, in get_credentials
    **params)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 653, in get_credentials
    creds = auth_provider.fill_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 122, in fill_credentials
    auth_data = self.get_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 148, in get_auth
    self.set_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 157, in set_auth
    self.cache = self._get_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 312, in _get_auth
    token, auth_data = auth_func(**auth_params)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 190, in get_token
    body = self.auth(**kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 143, in auth
    resp, body = self.post(self.auth_url, body=body)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 299, in post
    return self.request('POST', url, extra_headers, headers, body, chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 167, in request
    log_req_body='<omitted>')

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 608, in raw_request
    body=body, chunked=chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/http.py", line 111, in request
    *args, **new_kwargs)

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 79, in request
    method, url, fields=fields, headers=headers, **urlopen_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 170, in request_encode_body
    return self.urlopen(method, url, **extra_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/poolmanager.py", line 375, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 756, in urlopen
    method, url, error=e, _pool=self, _stacktrace=sys.exc_info()[2]

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/retry.py", line 532, in increment
    raise six.reraise(type(error), error, _stacktrace)

      File "/usr/local/lib/python3.6/site-packages/urllib3/packages/six.py", line 770, in reraise
    raise value

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 706, in urlopen
    chunked=chunked,

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 447, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 337, in _raise_timeout
    self, url, "Read timed out. (read timeout=%s)" % timeout_value

    urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='controller', port=5000): Read timed out. (read timeout=60)

{2} setUpClass (tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest) [0.000000s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 175, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py", line 96, in create_connection
    raise err

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py", line 86, in create_connection
    sock.connect(sa)

    OSError: [Errno 113] No route to host

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 706, in urlopen
    chunked=chunked,

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 394, in _make_request
    conn.request(method, url, **httplib_request_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 239, in request
    super(HTTPConnection, self).request(method, url, body=body, headers=headers)

      File "/usr/lib64/python3.6/http/client.py", line 1254, in request
    self._send_request(method, url, body, headers, encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1300, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1249, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1036, in _send_output
    self.send(msg)

      File "/usr/lib64/python3.6/http/client.py", line 974, in send
    self.connect()

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 205, in connect
    conn = self._new_conn()

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 187, in _new_conn
    self, "Failed to establish a new connection: %s" % e

    urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f1e6388af60>: Failed to establish a new connection: [Errno 113] No route to host

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 168, in setUpClass
    raise value.with_traceback(trace)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 153, in setUpClass
    cls.setup_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 53, in setup_credentials
    super(BaseVolumeTest, cls).setup_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 373, in setup_credentials
    credential_type=credentials_type)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 701, in get_client_manager
    cred_provider = cls._get_credentials_provider()

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 678, in _get_credentials_provider
    force_tenant_isolation=force_tenant_isolation)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 141, in get_credentials_provider
    **get_dynamic_provider_params(identity_version))

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 73, in get_dynamic_provider_params
    fill_in=True, identity_version=identity_version)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 258, in get_configured_admin_credentials
    identity_version=identity_version, **params)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 303, in get_credentials
    **params)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 653, in get_credentials
    creds = auth_provider.fill_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 122, in fill_credentials
    auth_data = self.get_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 148, in get_auth
    self.set_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 157, in set_auth
    self.cache = self._get_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 312, in _get_auth
    token, auth_data = auth_func(**auth_params)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 190, in get_token
    body = self.auth(**kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 143, in auth
    resp, body = self.post(self.auth_url, body=body)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 299, in post
    return self.request('POST', url, extra_headers, headers, body, chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 167, in request
    log_req_body='<omitted>')

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 608, in raw_request
    body=body, chunked=chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/http.py", line 111, in request
    *args, **new_kwargs)

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 79, in request
    method, url, fields=fields, headers=headers, **urlopen_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 170, in request_encode_body
    return self.urlopen(method, url, **extra_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/poolmanager.py", line 375, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      [Previous line repeated 7 more times]

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 756, in urlopen
    method, url, error=e, _pool=self, _stacktrace=sys.exc_info()[2]

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/retry.py", line 574, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))

    urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='controller', port=5000): Max retries exceeded with url: /v3/auth/tokens (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f1e6388af60>: Failed to establish a new connection: [Errno 113] No route to host',))

{0} tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsV319Test.test_reset_group_snapshot_status [119.213480s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 175, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py", line 96, in create_connection
    raise err

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py", line 86, in create_connection
    sock.connect(sa)

    OSError: [Errno 113] No route to host

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 706, in urlopen
    chunked=chunked,

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 394, in _make_request
    conn.request(method, url, **httplib_request_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 239, in request
    super(HTTPConnection, self).request(method, url, body=body, headers=headers)

      File "/usr/lib64/python3.6/http/client.py", line 1254, in request
    self._send_request(method, url, body, headers, encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1300, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1249, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1036, in _send_output
    self.send(msg)

      File "/usr/lib64/python3.6/http/client.py", line 974, in send
    self.connect()

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 205, in connect
    conn = self._new_conn()

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 187, in _new_conn
    self, "Failed to establish a new connection: %s" % e

    urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fbb3c0c3b00>: Failed to establish a new connection: [Errno 113] No route to host

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/admin/test_group_snapshots.py", line 269, in test_reset_group_snapshot_status
    volume_types=[volume_type['id']])

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 226, in create_group
    self.groups_client, group['id'], 'available')

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 302, in wait_for_volume_resource_status
    resource_status = show_resource(resource_id)[

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/volume/v3/groups_client.py", line 66, in show_group
    resp, body = self.get(url)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 314, in get
    return self.request('GET', url, extra_headers, headers)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/volume/base_client.py", line 40, in request
    method, url, extra_headers, headers, body, chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 688, in request
    body=body, chunked=chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 568, in _request
    chunked=chunked

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 608, in raw_request
    body=body, chunked=chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/http.py", line 111, in request
    *args, **new_kwargs)

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 75, in request
    method, url, fields=fields, headers=headers, **urlopen_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 96, in request_encode_url
    return self.urlopen(method, url, **extra_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/poolmanager.py", line 375, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      [Previous line repeated 7 more times]

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 756, in urlopen
    method, url, error=e, _pool=self, _stacktrace=sys.exc_info()[2]

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/retry.py", line 574, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))

    urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='[LB_IP_ADDRESS]', port=8776): Max retries exceeded with url: /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3b00>: Failed to establish a new connection: [Errno 113] No route to host',))


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 17:27:44,522 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:test_reset_group_snapshot_status): 200 POST http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/types 0.251s
2022-08-02 17:27:44,523 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"volume_type": {"name": "tempest-GroupSnapshotsV319Test-volume-type-746872840"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:27:44 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '227', 'x-compute-request-id': 'req-f275d275-fc7f-4b54-aa2c-b1c1c06d7b4d', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-f275d275-fc7f-4b54-aa2c-b1c1c06d7b4d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/types'}
        Body: b'{"volume_type": {"id": "7017cc88-face-4b55-b2a5-632f1e7d9c66", "name": "tempest-GroupSnapshotsV319Test-volume-type-746872840", "is_public": true, "extra_specs": {}, "description": null, "os-volume-type-access:is_public": true}}'
2022-08-02 17:27:44,563 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:test_reset_group_snapshot_status): 202 POST http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/group_types 0.035s
2022-08-02 17:27:44,564 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: {"group_type": {"name": "tempest-GroupSnapshotsV319Test-group-type-965067588"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:27:44 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '184', 'x-compute-request-id': 'req-60aa47b8-adb0-43b0-9653-3bbe5eda3716', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-60aa47b8-adb0-43b0-9653-3bbe5eda3716', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/group_types'}
        Body: b'{"group_type": {"id": "8cdbc647-60c7-4a66-bacc-567aa8cb6165", "name": "tempest-GroupSnapshotsV319Test-group-type-965067588", "description": null, "is_public": true, "group_specs": {}}}'
2022-08-02 17:27:44,921 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:test_reset_group_snapshot_status): 202 POST http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups 0.353s
2022-08-02 17:27:44,921 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: {"group": {"group_type": "8cdbc647-60c7-4a66-bacc-567aa8cb6165", "volume_types": ["7017cc88-face-4b55-b2a5-632f1e7d9c66"], "name": "tempest-GroupSnapshotsV319Test-Group-1024054724"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:27:44 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '116', 'x-compute-request-id': 'req-53d79313-bd3d-42e6-b099-18f18421c8f2', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-53d79313-bd3d-42e6-b099-18f18421c8f2', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups'}
        Body: b'{"group": {"id": "2282ec81-0225-4ec2-b1ea-04642fb54c3d", "name": "tempest-GroupSnapshotsV319Test-Group-1024054724"}}'
2022-08-02 17:27:44,957 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:test_reset_group_snapshot_status): 200 GET http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d 0.032s
2022-08-02 17:27:44,957
     13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:27:44 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '396', 'x-compute-request-id': 'req-9f826e4c-8019-4ca0-a5dd-424275f67b25', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-9f826e4c-8019-4ca0-a5dd-424275f67b25', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d'}
        Body: b'{"group": {"id": "2282ec81-0225-4ec2-b1ea-04642fb54c3d", "status": "creating", "availability_zone": "nova", "created_at": "2022-08-02T14:27:44.000000", "name": "tempest-GroupSnapshotsV319Test-Group-1024054724", "description": null, "group_type": "8cdbc647-60c7-4a66-bacc-567aa8cb6165", "volume_types": ["7017cc88-face-4b55-b2a5-632f1e7d9c66"], "group_snapshot_id": null, "source_group_id": null}}'
2022-08-02 17:28:46,026 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=9, connect=None, read=None, redirect=5, status=None)) after connection broken by 'ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3630>, 'Connection to [LB_IP_ADDRESS] timed out. (connect timeout=60)')': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:28:47,956 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=8, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3710>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:28:51,028 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=7, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3b38>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:28:54,100 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=6, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3c18>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:28:57,172 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=5, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c32b0>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:00,244 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=4, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0540f0>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:03,316 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=3, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c054208>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:06,388 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=2, connect=Non
    e, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0542e8>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:09,460 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=1, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c054400>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:12,532 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=0, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c054518>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:18,676 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=9, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c197cc0>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:21,748 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=8, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0544e0>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:24,820 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=7, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3550>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:27,892 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=6, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd0208>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:30,964 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=5, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd0358>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:34,036 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=4, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd0198>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:37,108 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=3, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd02e8>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:40,180 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=2, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd0400>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/de
    tail
2022-08-02 17:29:42,284 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 200 GET http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/volumes/detail 26.671s
2022-08-02 17:29:42,285 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '15', 'x-compute-request-id': 'req-17d0c5fd-2476-4ce7-ae51-44f3cd4fde9f', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-17d0c5fd-2476-4ce7-ae51-44f3cd4fde9f', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/volumes/detail'}
        Body: b'{"volumes": []}'
2022-08-02 17:29:42,362 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 202 POST http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d/action 0.064s
2022-08-02 17:29:42,362 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: {"delete": {"delete-volumes": true}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '0', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-177d0e18-b2ad-4045-92ae-7a2e70e7f741', 'connection': 'close', 'content-type': 'text/html; charset=UTF-8', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d/action'}
        Body: b''
2022-08-02 17:29:42,405 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 200 GET http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d 0.041s
2022-08-02 17:29:42,406 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '396', 'x-compute-request-id': 'req-09ca511b-7441-455d-b16f-5b8a86deed34', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-09ca511b-7441-455d-b16f-5b8a86deed34', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d'}
        Body: b'{"group": {"id": "2282ec81-0225-4ec2-b1ea-04642fb54c3d", "status": "deleting", "availability_zone": "nova", "created_at": "2022-08-02T14:27:44.000000", "name": "tempest-GroupSnapshotsV319Test-Group-1024054724", "description": null, "group_type": "8cdbc647-60c7-4a66-bacc-567aa8cb6165", "volume_types": ["7017cc88-face-4b55-b2a5-632f1e7d9c66"], "group_snapshot_id": null, "source_group_id": null}}'
2022-08-02 17:29:43,436 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 404 GET http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d 0.023s
2022-08-02 17:29:43,437 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-leng
    th': '108', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-compute-request-id': 'req-ed8133f8-147c-4ab4-b05c-e40bd9839d77', 'x-openstack-request-id': 'req-ed8133f8-147c-4ab4-b05c-e40bd9839d77', 'connection': 'close', 'content-type': 'application/json', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Group 2282ec81-0225-4ec2-b1ea-04642fb54c3d could not be found."}}'
2022-08-02 17:29:43,482 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 202 DELETE http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/group_types/8cdbc647-60c7-4a66-bacc-567aa8cb6165 0.043s
2022-08-02 17:29:43,482 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '0', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-88080f25-61f6-4d50-b8e4-c3256a6b9aba', 'connection': 'close', 'content-type': 'text/html; charset=UTF-8', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/group_types/8cdbc647-60c7-4a66-bacc-567aa8cb6165'}
        Body: b''

{2} tempest.api.volume.test_availability_zone.AvailabilityZoneTestJSON.test_get_availability_zone_list [0.198359s] ... ok
{0} tempest.api.volume.admin.test_group_type_specs.GroupTypeSpecsTest.test_group_type_specs_create_show_update_list_delete [0.598013s] ... ok
{2} setUpClass (tempest.api.volume.test_image_metadata.VolumesImageMetadata) [0.000000s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 168, in setUpClass
    raise value.with_traceback(trace)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 161, in setUpClass
    cls.resource_setup()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_image_metadata.py", line 40, in resource_setup
    cls.volume = cls.create_volume(imageRef=CONF.compute.image_ref)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 131, in create_volume
    volume['id'], wait_until)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 306, in wait_for_volume_resource_status
    resource_name=resource_name, resource_id=resource_id)

    tempest.exceptions.VolumeResourceBuildErrorException: volume e3a09e06-90c2-4c1f-aabe-331dfb44dce9 failed to build and is in ERROR status

{2} tempest.api.volume.test_snapshot_metadata.SnapshotMetadataTestJSON.test_crud_snapshot_metadata [0.313669s] ... ok
{2} tempest.api.volume.test_snapshot_metadata.SnapshotMetadataTestJSON.test_update_show_snapshot_metadata_item [0.291131s] ... ok
{0} tempest.api.volume.admin.test_groups.GroupsV314Test.test_create_group_from_group [9.727178s] ... ok
{0} setUpClass (tempest.api.volume.admin.test_multi_backend.VolumeMultiBackendTest) ... SKIPPED: Cinder multi-backend feature disabled
{2} tempest.api.volume.test_volume_metadata.VolumesMetadataTest.test_crud_volume_metadata [0.314289s] ... ok
{2} tempest.api.volume.test_volume_metadata.VolumesMetadataTest.test_update_show_volume_metadata_item [0.213230s] ... ok
{0} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_associate_disassociate_qos [0.433468s] ... ok
{0} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_back_end_consumer [0.128765s] ... ok
{0} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_both_consumer [0.141753s] ... ok
{0} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_create_delete_qos_with_front_end_consumer [0.131588s] ... ok
{0} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_get_qos [0.027477s] ... ok
{0} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_list_qos [0.029110s] ... ok
{0} tempest.api.volume.admin.test_qos.QosSpecsTestJSON.test_set_unset_qos_key [0.163287s] ... ok
{0} setUpClass (tempest.api.volume.admin.test_volume_manage.VolumeManageAdminTest) ... SKIPPED: Manage volume tests are disabled
{0} tempest.api.volume.admin.test_volume_quota_classes.VolumeQuotaClassesTest.test_show_default_quota [0.231191s] ... ok
{0} tempest.api.volume.admin.test_volume_quota_classes.VolumeQuotaClassesTest.test_update_default_quota [1.450743s] ... ok
{2} tempest.api.volume.test_volume_transfers.VolumesTransfersTest.test_create_get_list_accept_volume_transfer [4.122217s] ... ok
{2} tempest.api.volume.test_volume_transfers.VolumesTransfersTest.test_create_list_delete_volume_transfer [4.042365s] ... ok
{0} tempest.api.volume.admin.test_volume_retype.VolumeRetypeWithoutMigrationTest.test_available_volume_retype [4.719927s] ... ok
{2} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_attach_detach_volume_to_instance [5.095978s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 45, in test_attach_detach_volume_to_instance
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server aceb4a28-4bde-4cd9-902f-149913e1bd19 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T14:30:31Z', 'message': 'No valid host was found. There are not enough hosts available.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py", line 1548, in schedule_and_build_instances\n    host_lists = self._schedule_instances(context, request_specs[0],\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py", line 908, in _schedule_instances\n    host_lists = self.query_client.select_destinations(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/client/query.py", line 41, in select_destinations\n    return self.scheduler_rpcapi.select_destinations(context, spec_obj,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/rpcapi.py", line 160, in select_destinations\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/client.py", line 189, in call\n    result = self.transport._send(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/transport.py", line 123, in _send\n    return self._driver.send(target, ctxt, message,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py", line 689, in send\n    return self._send(target, ctxt, message, wait_for_reply, timeout,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py", line 681, in _send\n    raise result\nnova.exception_Remote.NoValidHost_Remote: No valid host was found. There are not enough hosts available.\nTraceback (most recent call last):\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/server.py", line 241, in inner\n    return func(*args, **kwargs)\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 223, in select_destinations\n    selections = self._select_destinations(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 250, in _select_destinations\n    selections = self._schedule(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 416, in _schedule\n    self._ensure_sufficient_hosts(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 455, in _ensure_sufficient_hosts\n    raise exception.NoValidHost(reason=reason)\n\nnova.exception.NoValidHost: No valid host was found. There are not enough hosts available.\n\n'}. Server boot request ID: req-0c53966d-7690-482a-b28d-58768f9b57ce.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 17:30:28,459 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://controller:5000/v3/auth/tokens 0.505s
2022-08-02 17:30:28,460 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:27 GMT', 'server': 'Apache', 'content-length': '3886', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6eee9325-212b-4701-b116-46edef452a95', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "2e87805015674464a5a9c4848f519d24", "name": "tempest-VolumesActionsTest-214620015-project", "password_expires_at": null}, "audit_ids": ["ksBgSF6DRnOcag7UJP5kjw"], "expires_at": "2022-08-03T14:30:28.000000Z", "issued_at": "2022-08-02T14:30:28.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "ce8cc2eaca0f48648733ea361b4d4475", "name": "tempest-VolumesActionsTest-214620015"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ce8cc
    2eaca0f48648733ea361b4d4475", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 17:30:28,460 13618 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-08-02 17:30:28,566 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.104s
2022-08-02 17:30:28,566 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesActionsTest-1392397911-desc", "domain_id": "default", "name": "tempest-VolumesActionsTest-1392397911"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:28 GMT', 'server': 'Apache', 'content-length': '373', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-55b1386c-8b2c-42d8-b585-4c611d8a1f73', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "801f06321bbe4d7c891950001755fd9c", "name": "tempest-VolumesActionsTest-1392397911", "domain_id": "default", "description": "tempest-VolumesActionsTest-1392397911-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c"}}}\n'
2022-08-02 17:30:29,149 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.582s
2022-08-02 17:30:29,150 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesActionsTest-1392397911-project-admin", "password": "W5+%s=VRIRiCBsh", "domain_id": "default"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:28 GMT', 'server': 'Apache', 'content-length': '293', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-83fe1498-f7a8-46da-97d7-4112d46d761b', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "185c37e624474ad590eaf91ded4cb528", "name": "tempest-VolumesActionsTest-1392397911-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/185c37e624474ad590eaf91ded4cb528"}}}\n'
2022-08-02 17:30:29,185 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.034s
2022-08-02 17:30:29,185 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-13319494-b6b9-44d3-8df5-06cd1da74246', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/ro
    les/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 17:30:29,299 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c 0.112s
2022-08-02 17:30:29,299 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-92e05a2b-9757-4c71-a1fa-725a8b12849b', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 17:30:29,393 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.093s
2022-08-02 17:30:29,394 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-dfecb5e3-5f78-4aff-b7ef-9c85f7be1330', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 17:30:29,448 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c 0.052s
2022-08-02 17:30:29,448 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-r
    equest-id': 'req-d26f45df-37ab-469e-a2cb-8fd8958e9338', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 17:30:29,538 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.089s
2022-08-02 17:30:29,539 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-78ac8c18-79c5-4584-80e4-dc90be848f10', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 17:30:29,574 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c 0.034s
2022-08-02 17:30:29,575 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-f1af675a-6893-476e-a20b-2eebbc3db83d', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 17:30:29,665 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.089s
2022-08-02 17:30:29,666 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-27fd8628-8ab1-480a-9566-522dfe7bc93e', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/r
    oles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 17:30:29,748 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c 0.081s
2022-08-02 17:30:29,748 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-11e68a8c-9789-46fb-aecd-b7be41ce6d6b', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 17:30:29,749 13618 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user 185c37e624474ad590eaf91ded4cb528 is created with scope project and roles: ['admin', 'admin']
2022-08-02 17:30:29,749 13618 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesActionsTest-1392397911-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': '801f06321bbe4d7c891950001755fd9c', 'project_name': 'tempest-VolumesActionsTest-1392397911', 'tenant_id': '801f06321bbe4d7c891950001755fd9c', 'tenant_name': 'tempest-VolumesActionsTest-1392397911', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': '185c37e624474ad590eaf91ded4cb528', 'system': None}, Network: None, Subnet: None, Router: None
2022-08-02 17:30:29,758 13618 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_attach_detach_volume_to_instance) Found network None available for tenant
2022-08-02 17:30:30,834 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 1.075s
2022-08-02 17:30:30,835 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-1207811047", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-0c53966d-7690-482a-b28d-58768f9b57ce', 'x-compute-request-id': 'req-0c53966d-7690-482a-b28d-58768f9b57ce', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "aceb4a28-4bde-4cd9-902f-149913e1bd19", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}
    ], "adminPass": "puM6kd54kcLy"}}'
2022-08-02 17:30:31,101 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19 0.261s
2022-08-02 17:30:31,102 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:30 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-ca7f9c20-af6a-48da-b3bc-abc6abc93fcb', 'x-compute-request-id': 'req-ca7f9c20-af6a-48da-b3bc-abc6abc93fcb', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19'}
        Body: b'{"server": {"id": "aceb4a28-4bde-4cd9-902f-149913e1bd19", "name": "tempest-VolumesActionsTest-instance-1207811047", "status": "BUILD", "tenant_id": "ce8cc2eaca0f48648733ea361b4d4475", "user_id": "2e87805015674464a5a9c4848f519d24", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T14:30:30Z", "updated": "2022-08-02T14:30:30Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 17:30:32,485 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19 0.369s
2022-08-02 17:30:32,486 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '3916', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-a3611d31-1827-48e0-a919-94539669981e', 'x-compute-request-id': 'req-a3611d31-1827-48e0-a919-94539669981e', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19'}
        Body: b'{"server": {"id": "aceb4a28-4bde-4cd9-902f-149913e1bd19", "name": "tempest-VolumesActionsTest-instance-1207811047", "status": "ERROR", "tenant_id": "ce8cc2eaca0f48648733ea361b4d4475", "user_id": "2e87805015674464a5a9c4848f519d24", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T14:30:30Z", "updated": "2022-08-02T14:30:31Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links
    ": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T14:30:31Z", "message": "No valid host was found. There are not enough hosts available.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py\\", line 1548, in schedule_and_build_instances\\n    host_lists = self._schedule_instances(context, request_specs[0],\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py\\", line 908, in _schedule_instances\\n    host_lists = self.query_client.select_destinations(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/client/query.py\\", line 41, in select_destinations\\n    return self.scheduler_rpcapi.select_destinations(context, spec_obj,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/rpcapi.py\\", line 160, in select_destinations\\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/client.py\\", line 189, in call\\n    result = self.transport._send(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/transport.py\\", line 123, in _send\\n    return self._driver.send(target, ctxt, message,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py\\", line 689, in send\\n    return self._send(target, ctxt, message, wait_for_reply, timeout,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py\\", line 681, in _send\\n    raise result\\nnova.exception_Remote.NoValidHost_Remote: No valid host was found. There are not enough hosts available.\\nTraceback (most recent call last):\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/server.py\\", line 241, in inner\\n    return func(*args, **kwargs)\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 223, in select_destinations\\n    selections = self._select_destinations(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 250, in _select_destinations\\n    selections = self._schedule(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 416, in _schedule\\n    self._ensure_sufficient_hosts(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 455, in _ensure_sufficient_hosts\\n    raise exception.NoValidHost(reason=reason)\\n\\nnova.exception.NoValidHost: No valid host was found. There are not enough hosts available.\\n\\n"}, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "instance-00000001", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": null, "OS-EXT-STS:vm_state": "error", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 17:30:32,496 13618 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 17:30:32,974 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19 0.477s
2022-08-02 17:30:32,974 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack
    -API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-33b8315b-d88b-4b9f-8052-5f26e5321a78', 'x-compute-request-id': 'req-33b8315b-d88b-4b9f-8052-5f26e5321a78', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19'}
        Body: b''
2022-08-02 17:30:33,040 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19 0.065s
2022-08-02 17:30:33,041 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-a285125b-67b1-45fc-bdff-1ce53a24b4fd', 'x-compute-request-id': 'req-a285125b-67b1-45fc-bdff-1ce53a24b4fd', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance aceb4a28-4bde-4cd9-902f-149913e1bd19 could not be found."}}'

{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_host_name [0.029397s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_service_and_host_name [0.029918s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_service_binary_name [0.026461s] ... ok
{2} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_get_volume_attachment [2.298437s] ... FAILED

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 81, in test_get_volume_attachment
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server f781ee2c-1017-497b-8bc3-5af45ad39b6b failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T14:30:34Z', 'message': 'No valid host was found. There are not enough hosts available.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py", line 1548, in schedule_and_build_instances\n    host_lists = self._schedule_instances(context, request_specs[0],\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py", line 908, in _schedule_instances\n    host_lists = self.query_client.select_destinations(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/client/query.py", line 41, in select_destinations\n    return self.scheduler_rpcapi.select_destinations(context, spec_obj,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/rpcapi.py", line 160, in select_destinations\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/client.py", line 189, in call\n    result = self.transport._send(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/transport.py", line 123, in _send\n    return self._driver.send(target, ctxt, message,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py", line 689, in send\n    return self._send(target, ctxt, message, wait_for_reply, timeout,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py", line 681, in _send\n    raise result\nnova.exception_Remote.NoValidHost_Remote: No valid host was found. There are not enough hosts available.\nTraceback (most recent call last):\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/server.py", line 241, in inner\n    return func(*args, **kwargs)\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 223, in select_destinations\n    selections = self._select_destinations(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 250, in _select_destinations\n    selections = self._schedule(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 416, in _schedule\n    self._ensure_sufficient_hosts(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 455, in _ensure_sufficient_hosts\n    raise exception.NoValidHost(reason=reason)\n\nnova.exception.NoValidHost: No valid host was found. There are not enough hosts available.\n\n'}. Server boot request ID: req-d72930f1-33c5-4c50-bacf-53e5490cd20e.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 17:30:33,618 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 201 POST http://controller:5000/v3/auth/tokens 0.563s
2022-08-02 17:30:33,618 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:33 GMT', 'server': 'Apache', 'content-length': '3886', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6a758ecd-c3f4-4a5b-8fcb-e53324dff45d', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "2e87805015674464a5a9c4848f519d24", "name": "tempest-VolumesActionsTest-214620015-project", "password_expires_at": null}, "audit_ids": ["py0OiegKRFK7AGfBN8sDdA"], "expires_at": "2022-08-03T14:30:33.000000Z", "issued_at": "2022-08-02T14:30:33.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "ce8cc2eaca0f48648733ea361b4d4475", "name": "tempest-VolumesActionsTest-214620015"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ce8cc2eaca0f4864
    8733ea361b4d4475", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 17:30:33,629 13618 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_get_volume_attachment) Found network None available for tenant
2022-08-02 17:30:33,853 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.223s
2022-08-02 17:30:33,854 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-1968122786", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:33 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d72930f1-33c5-4c50-bacf-53e5490cd20e', 'x-compute-request-id': 'req-d72930f1-33c5-4c50-bacf-53e5490cd20e', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "f781ee2c-1017-497b-8bc3-5af45ad39b6b", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "rmrxRobVP9Mn"}}'
2022-08-02 17:30:33,940 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b 0.081s
2022-08-02 17:30:33,941 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:33 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b8f76061-9a67-4908-a84b-40d8e59e5f30', 'x-compute-request-id': 'req-b8f76061-9a67-4908-a84b-40d8e59e5f30', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b'}
        Body: b'{"server": {"id": "f781ee2c-1017-497b-8bc3-5af45ad39b6b", "name": "tempest-VolumesActionsTest-instance-1968122786", "status": "BUILD", "tenant_id": "ce8cc2eaca0f48648733ea361b4d4475", "user_id": "2e87805015674464a5a9c4848f519d24", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T14:30:33Z", "updated": "2022-08-02T14:30:33Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}, {"rel": "bookmark", "href
    ": "http://[LB_IP_ADDRESS]:8774/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 17:30:35,047 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b 0.093s
2022-08-02 17:30:35,048 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:34 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '3916', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-235dab19-e034-4f4e-83aa-b9b6235b4161', 'x-compute-request-id': 'req-235dab19-e034-4f4e-83aa-b9b6235b4161', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b'}
        Body: b'{"server": {"id": "f781ee2c-1017-497b-8bc3-5af45ad39b6b", "name": "tempest-VolumesActionsTest-instance-1968122786", "status": "ERROR", "tenant_id": "ce8cc2eaca0f48648733ea361b4d4475", "user_id": "2e87805015674464a5a9c4848f519d24", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T14:30:33Z", "updated": "2022-08-02T14:30:34Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T14:30:34Z", "message": "No valid host was found. There are not enough hosts available.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py\\", line 1548, in schedule_and_build_instances\\n    host_lists = self._schedule_instances(context, request_specs[0],\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py\\", line 908, in _schedule_instances\\n    host_lists = self.query_client.select_destinations(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/client/query.py\\", line 41, in select_destinations\\n    return self.scheduler_rpcapi.select_destinations(context, spec_obj,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/rpcapi.py\\", line 160, in select_destinations\\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/client.py\\", line 189, in call\\n    result = self.transport._send(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/transport.py\\", line 123, in _send\\n    return self._driver.send(target, ctxt, message,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py\\", line 689, in send\\n    return self._send(target, ctxt, message, wait_for_reply, timeout,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py\\", line 681, in _send\\n    raise result\\nnova.exception_Remote.NoValidHo
    st_Remote: No valid host was found. There are not enough hosts available.\\nTraceback (most recent call last):\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/server.py\\", line 241, in inner\\n    return func(*args, **kwargs)\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 223, in select_destinations\\n    selections = self._select_destinations(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 250, in _select_destinations\\n    selections = self._schedule(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 416, in _schedule\\n    self._ensure_sufficient_hosts(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 455, in _ensure_sufficient_hosts\\n    raise exception.NoValidHost(reason=reason)\\n\\nnova.exception.NoValidHost: No valid host was found. There are not enough hosts available.\\n\\n"}, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "instance-00000002", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": null, "OS-EXT-STS:vm_state": "error", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 17:30:35,059 13618 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 2 second wait
2022-08-02 17:30:35,308 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b 0.248s
2022-08-02 17:30:35,308 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:35 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7518c720-af51-4508-a211-75ff1332f810', 'x-compute-request-id': 'req-7518c720-af51-4508-a211-75ff1332f810', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b'}
        Body: b''
2022-08-02 17:30:35,343 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b 0.033s
2022-08-02 17:30:35,343 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:35 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7deaf436-fadb-4ff1-b2df-5dd477c2a94f', 'x-compute-request-id': 'req-7deaf436-fadb-4ff1-b2df-5dd477c2a94f', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance f781ee2c-1017-497b-8bc3-5af45ad39b6b could not be found."}}'

{2} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_reserve_unreserve_volume [0.198580s] ... ok
{2} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_bootable [0.186696s] ... ok
{2} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_readonly_update [0.200398s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_get_service_by_volume_host_name [2.806149s] ... ok
{0} tempest.api.volume.admin.test_volume_services.VolumesServicesTestJSON.test_list_services [0.028065s] ... ok
{0} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_disable_log_reason_with_no_reason [0.018040s] ... ok
{0} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_disable_service_with_invalid_binary [0.027890s] ... ok
{0} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_enable_service_with_invalid_host [0.025545s] ... ok
{0} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_freeze_host_with_invalid_host [0.027345s] ... ok
{0} tempest.api.volume.admin.test_volume_services_negative.VolumeServicesNegativeTest.test_thaw_host_with_invalid_host [0.025739s] ... ok
{2} tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_volume_upload [14.939404s] ... ok
{0} tempest.api.volume.admin.test_volume_snapshot_quotas_negative.VolumeSnapshotQuotasNegativeTestJSON.test_quota_volume_gigabytes_snapshots [0.518137s] ... ok
{0} tempest.api.volume.admin.test_volume_snapshot_quotas_negative.VolumeSnapshotQuotasNegativeTestJSON.test_quota_volume_snapshots [0.108199s] ... ok
{2} tempest.api.volume.test_volumes_clone_negative.VolumesCloneNegativeTest.test_create_from_volume_decreasing_size [2.709528s] ... ok
{0} tempest.api.volume.admin.test_volume_type_access.VolumeTypesAccessTest.test_volume_type_access_list [0.310176s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_spec_create_get_delete [0.207253s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_specs_list [0.108504s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs.VolumeTypesExtraSpecsTest.test_volume_type_extra_specs_update [0.289416s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_invalid_body [0.017665s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_none_body [0.016747s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_create_nonexistent_type_id [0.061660s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_delete_nonexistent_volume_type_id [0.023170s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_get_nonexistent_extra_spec_name [0.029310s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_get_nonexistent_volume_type_id [0.026720s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_list_nonexistent_volume_type_id [0.023499s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_multiple_extra_spec [0.017726s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_no_body [0.017963s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_none_extra_spec_id [0.057721s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_nonexistent_extra_spec_id [0.059286s] ... ok
{0} tempest.api.volume.admin.test_volume_types_extra_specs_negative.ExtraSpecsNegativeTest.test_update_nonexistent_type_id [0.059728s] ... ok
{2} tempest.api.volume.test_volumes_extend.VolumesExtendTest.test_volume_extend [13.686383s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_volume_type_encryption_nonexistent_type_id [0.202154s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_with_empty_name [0.015230s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_create_with_repeated_name [0.066143s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_delete_nonexistent_type_id [0.021469s] ... ok
{0} tempest.api.volume.admin.test_volume_types_negative.VolumeTypesNegativeTest.test_get_nonexistent_type_id [0.020456s] ... ok
{2} tempest.api.volume.test_volumes_extend.VolumesExtendTest.test_volume_extend_when_volume_has_snapshot [6.094091s] ... ok
{2} tempest.api.volume.test_volumes_get.VolumesSummaryTest.test_show_volume_summary [0.193491s] ... ok
{0} tempest.api.volume.admin.test_volumes_list.VolumesListAdminTestJSON.test_volume_list_param_tenant [1.791561s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list [0.058305s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_by_name [0.056298s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_by_name [0.077434s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_pagination [0.332241s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_details_with_multiple_params [0.206619s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_pagination [0.259707s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_param_display_name_and_status [0.090864s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_display_name_and_status [0.101728s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_marker [0.102319s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_detail_param_metadata [0.086177s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_details [0.074801s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volume_list_with_param_metadata [0.094449s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_availability_zone [0.178503s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_bootable [0.186722s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_by_status [0.117724s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_availability_zone [0.073707s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_bootable [0.071735s] ... ok
{2} tempest.api.volume.test_volumes_list.VolumesListTestJSON.test_volumes_list_details_by_status [0.119496s] ... ok
{0} tempest.api.volume.test_extensions.ExtensionsTestJSON.test_list_extensions [0.135135s] ... ok
{0} tempest.api.volume.test_versions.VersionsTest.test_list_versions [0.012423s] ... ok
{0} tempest.api.volume.test_versions.VersionsTest.test_show_version [0.239380s] ... ok
{0} tempest.api.volume.test_volume_absolute_limits.AbsoluteLimitsTests.test_get_volume_absolute_limits [0.130101s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit [0.040840s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit_equals_infinite [0.076098s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_limit_equals_zero [0.025074s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_marker [0.093578s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_offset [0.046842s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_created_at_asc [0.046971s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_created_at_desc [0.031963s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_id_asc [0.048928s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_id_desc [0.046842s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_name_asc [0.049605s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshot_list_param_sort_name_desc [0.047750s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshots_list_details_with_params [0.136769s] ... ok
{2} tempest.api.volume.test_volumes_snapshots_list.VolumesSnapshotListTestJSON.test_snapshots_list_with_params [0.143531s] ... ok
{0} tempest.api.volume.test_volume_delete_cascade.VolumesDeleteCascade.test_volume_delete_cascade [8.448175s] ... ok
{0} tempest.api.volume.test_volume_delete_cascade.VolumesDeleteCascade.test_volume_from_snapshot_cascade_delete [8.545337s] ... ok
{0} tempest.api.volume.test_volume_transfers.VolumesTransfersV355Test.test_create_get_list_accept_volume_transfer [5.138768s] ... ok
{0} tempest.api.volume.test_volume_transfers.VolumesTransfersV355Test.test_create_list_delete_volume_transfer [3.858692s] ... ok
{0} tempest.api.volume.test_volumes_clone.VolumesCloneTest.test_create_from_bootable_volume [22.283744s] ... ok
{0} tempest.api.volume.test_volumes_clone.VolumesCloneTest.test_create_from_volume [6.041971s] ... ok
{0} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete [7.736067s] ... ok
{0} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete_as_clone [10.987419s] ... ok
{0} tempest.api.volume.test_volumes_get.VolumesGetTest.test_volume_create_get_update_delete_from_image [19.366734s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_create_snapshot_with_nonexistent_volume_id [0.166591s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_create_snapshot_without_passing_volume_id [0.064187s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshot_invalid_param_limit [0.016505s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshots_invalid_param_marker [0.028862s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_list_snapshots_invalid_param_sort [0.018997s] ... ok
{0} tempest.api.volume.test_volumes_snapshots_negative.VolumesSnapshotNegativeTestJSON.test_volume_from_snapshot_decreasing_size [5.131016s] ... ok

==============================
Failed 6 tests - output below:
==============================

setUpClass (tempest.api.volume.admin.test_volume_types.VolumeTypesTest)
-----------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 445, in _make_request
    six.raise_from(e, None)

      File "<string>", line 3, in raise_from

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 440, in _make_request
    httplib_response = conn.getresponse()

      File "/usr/lib64/python3.6/http/client.py", line 1346, in getresponse
    response.begin()

      File "/usr/lib64/python3.6/http/client.py", line 307, in begin
    version, status, reason = self._read_status()

      File "/usr/lib64/python3.6/http/client.py", line 268, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")

      File "/usr/lib64/python3.6/socket.py", line 586, in readinto
    return self._sock.recv_into(b)

    socket.timeout: timed out

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 168, in setUpClass
    raise value.with_traceback(trace)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 153, in setUpClass
    cls.setup_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 53, in setup_credentials
    super(BaseVolumeTest, cls).setup_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 373, in setup_credentials
    credential_type=credentials_type)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 701, in get_client_manager
    cred_provider = cls._get_credentials_provider()

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 678, in _get_credentials_provider
    force_tenant_isolation=force_tenant_isolation)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 141, in get_credentials_provider
    **get_dynamic_provider_params(identity_version))

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 73, in get_dynamic_provider_params
    fill_in=True, identity_version=identity_version)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 258, in get_configured_admin_credentials
    identity_version=identity_version, **params)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 303, in get_credentials
    **params)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 653, in get_credentials
    creds = auth_provider.fill_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 122, in fill_credentials
    auth_data = self.get_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 148, in get_auth
    self.set_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 157, in set_auth
    self.cache = self._get_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 312, in _get_auth
    token, auth_data = auth_func(**auth_params)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 190, in get_token
    body = self.auth(**kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 143, in auth
    resp, body = self.post(self.auth_url, body=body)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 299, in post
    return self.request('POST', url, extra_headers, headers, body, chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 167, in request
    log_req_body='<omitted>')

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 608, in raw_request
    body=body, chunked=chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/http.py", line 111, in request
    *args, **new_kwargs)

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 79, in request
    method, url, fields=fields, headers=headers, **urlopen_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 170, in request_encode_body
    return self.urlopen(method, url, **extra_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/poolmanager.py", line 375, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 756, in urlopen
    method, url, error=e, _pool=self, _stacktrace=sys.exc_info()[2]

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/retry.py", line 532, in increment
    raise six.reraise(type(error), error, _stacktrace)

      File "/usr/local/lib/python3.6/site-packages/urllib3/packages/six.py", line 770, in reraise
    raise value

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 706, in urlopen
    chunked=chunked,

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 447, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 337, in _raise_timeout
    self, url, "Read timed out. (read timeout=%s)" % timeout_value

    urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='controller', port=5000): Read timed out. (read timeout=60)


setUpClass (tempest.api.volume.admin.test_volumes_actions.VolumesActionsTest)
-----------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 175, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py", line 96, in create_connection
    raise err

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py", line 86, in create_connection
    sock.connect(sa)

    OSError: [Errno 113] No route to host

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 706, in urlopen
    chunked=chunked,

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 394, in _make_request
    conn.request(method, url, **httplib_request_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 239, in request
    super(HTTPConnection, self).request(method, url, body=body, headers=headers)

      File "/usr/lib64/python3.6/http/client.py", line 1254, in request
    self._send_request(method, url, body, headers, encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1300, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1249, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1036, in _send_output
    self.send(msg)

      File "/usr/lib64/python3.6/http/client.py", line 974, in send
    self.connect()

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 205, in connect
    conn = self._new_conn()

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 187, in _new_conn
    self, "Failed to establish a new connection: %s" % e

    urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f1e6388af60>: Failed to establish a new connection: [Errno 113] No route to host

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 168, in setUpClass
    raise value.with_traceback(trace)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 153, in setUpClass
    cls.setup_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 53, in setup_credentials
    super(BaseVolumeTest, cls).setup_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 373, in setup_credentials
    credential_type=credentials_type)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 701, in get_client_manager
    cred_provider = cls._get_credentials_provider()

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 678, in _get_credentials_provider
    force_tenant_isolation=force_tenant_isolation)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 141, in get_credentials_provider
    **get_dynamic_provider_params(identity_version))

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 73, in get_dynamic_provider_params
    fill_in=True, identity_version=identity_version)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 258, in get_configured_admin_credentials
    identity_version=identity_version, **params)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/credentials_factory.py", line 303, in get_credentials
    **params)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 653, in get_credentials
    creds = auth_provider.fill_credentials()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 122, in fill_credentials
    auth_data = self.get_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 148, in get_auth
    self.set_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 157, in set_auth
    self.cache = self._get_auth()

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/auth.py", line 312, in _get_auth
    token, auth_data = auth_func(**auth_params)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 190, in get_token
    body = self.auth(**kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 143, in auth
    resp, body = self.post(self.auth_url, body=body)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 299, in post
    return self.request('POST', url, extra_headers, headers, body, chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/identity/v3/token_client.py", line 167, in request
    log_req_body='<omitted>')

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 608, in raw_request
    body=body, chunked=chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/http.py", line 111, in request
    *args, **new_kwargs)

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 79, in request
    method, url, fields=fields, headers=headers, **urlopen_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 170, in request_encode_body
    return self.urlopen(method, url, **extra_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/poolmanager.py", line 375, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      [Previous line repeated 7 more times]

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 756, in urlopen
    method, url, error=e, _pool=self, _stacktrace=sys.exc_info()[2]

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/retry.py", line 574, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))

    urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='controller', port=5000): Max retries exceeded with url: /v3/auth/tokens (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f1e6388af60>: Failed to establish a new connection: [Errno 113] No route to host',))


tempest.api.volume.admin.test_group_snapshots.GroupSnapshotsV319Test.test_reset_group_snapshot_status[id-3b42c9b9-c984-4444-816e-ca2e1ed30b40]
----------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 175, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py", line 96, in create_connection
    raise err

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/connection.py", line 86, in create_connection
    sock.connect(sa)

    OSError: [Errno 113] No route to host

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 706, in urlopen
    chunked=chunked,

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 394, in _make_request
    conn.request(method, url, **httplib_request_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 239, in request
    super(HTTPConnection, self).request(method, url, body=body, headers=headers)

      File "/usr/lib64/python3.6/http/client.py", line 1254, in request
    self._send_request(method, url, body, headers, encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1300, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1249, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)

      File "/usr/lib64/python3.6/http/client.py", line 1036, in _send_output
    self.send(msg)

      File "/usr/lib64/python3.6/http/client.py", line 974, in send
    self.connect()

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 205, in connect
    conn = self._new_conn()

      File "/usr/local/lib/python3.6/site-packages/urllib3/connection.py", line 187, in _new_conn
    self, "Failed to establish a new connection: %s" % e

    urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fbb3c0c3b00>: Failed to establish a new connection: [Errno 113] No route to host

    
During handling of the above exception, another exception occurred:


    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/admin/test_group_snapshots.py", line 269, in test_reset_group_snapshot_status
    volume_types=[volume_type['id']])

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 226, in create_group
    self.groups_client, group['id'], 'available')

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 302, in wait_for_volume_resource_status
    resource_status = show_resource(resource_id)[

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/volume/v3/groups_client.py", line 66, in show_group
    resp, body = self.get(url)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 314, in get
    return self.request('GET', url, extra_headers, headers)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/services/volume/base_client.py", line 40, in request
    method, url, extra_headers, headers, body, chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 688, in request
    body=body, chunked=chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 568, in _request
    chunked=chunked

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/rest_client.py", line 608, in raw_request
    body=body, chunked=chunked)

      File "/usr/local/lib/python3.6/site-packages/tempest/lib/common/http.py", line 111, in request
    *args, **new_kwargs)

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 75, in request
    method, url, fields=fields, headers=headers, **urlopen_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/request.py", line 96, in request_encode_url
    return self.urlopen(method, url, **extra_kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/poolmanager.py", line 375, in urlopen
    response = conn.urlopen(method, u.request_uri, **kw)

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 796, in urlopen
    **response_kw

      [Previous line repeated 7 more times]

      File "/usr/local/lib/python3.6/site-packages/urllib3/connectionpool.py", line 756, in urlopen
    method, url, error=e, _pool=self, _stacktrace=sys.exc_info()[2]

      File "/usr/local/lib/python3.6/site-packages/urllib3/util/retry.py", line 574, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))

    urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='[LB_IP_ADDRESS]', port=8776): Max retries exceeded with url: /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3b00>: Failed to establish a new connection: [Errno 113] No route to host',))


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 17:27:44,522 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:test_reset_group_snapshot_status): 200 POST http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/types 0.251s
2022-08-02 17:27:44,523 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"volume_type": {"name": "tempest-GroupSnapshotsV319Test-volume-type-746872840"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:27:44 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '227', 'x-compute-request-id': 'req-f275d275-fc7f-4b54-aa2c-b1c1c06d7b4d', 'openstack-api-version': 'volume 3.0', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-f275d275-fc7f-4b54-aa2c-b1c1c06d7b4d', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/types'}
        Body: b'{"volume_type": {"id": "7017cc88-face-4b55-b2a5-632f1e7d9c66", "name": "tempest-GroupSnapshotsV319Test-volume-type-746872840", "is_public": true, "extra_specs": {}, "description": null, "os-volume-type-access:is_public": true}}'
2022-08-02 17:27:44,563 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:test_reset_group_snapshot_status): 202 POST http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/group_types 0.035s
2022-08-02 17:27:44,564 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: {"group_type": {"name": "tempest-GroupSnapshotsV319Test-group-type-965067588"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:27:44 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '184', 'x-compute-request-id': 'req-60aa47b8-adb0-43b0-9653-3bbe5eda3716', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-60aa47b8-adb0-43b0-9653-3bbe5eda3716', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/group_types'}
        Body: b'{"group_type": {"id": "8cdbc647-60c7-4a66-bacc-567aa8cb6165", "name": "tempest-GroupSnapshotsV319Test-group-type-965067588", "description": null, "is_public": true, "group_specs": {}}}'
2022-08-02 17:27:44,921 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:test_reset_group_snapshot_status): 202 POST http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups 0.353s
2022-08-02 17:27:44,921 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: {"group": {"group_type": "8cdbc647-60c7-4a66-bacc-567aa8cb6165", "volume_types": ["7017cc88-face-4b55-b2a5-632f1e7d9c66"], "name": "tempest-GroupSnapshotsV319Test-Group-1024054724"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:27:44 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '116', 'x-compute-request-id': 'req-53d79313-bd3d-42e6-b099-18f18421c8f2', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-53d79313-bd3d-42e6-b099-18f18421c8f2', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups'}
        Body: b'{"group": {"id": "2282ec81-0225-4ec2-b1ea-04642fb54c3d", "name": "tempest-GroupSnapshotsV319Test-Group-1024054724"}}'
2022-08-02 17:27:44,957 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:test_reset_group_snapshot_status): 200 GET http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d 0.032s
2022-08-02 17:27:44,957
     13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:27:44 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '396', 'x-compute-request-id': 'req-9f826e4c-8019-4ca0-a5dd-424275f67b25', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-9f826e4c-8019-4ca0-a5dd-424275f67b25', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d'}
        Body: b'{"group": {"id": "2282ec81-0225-4ec2-b1ea-04642fb54c3d", "status": "creating", "availability_zone": "nova", "created_at": "2022-08-02T14:27:44.000000", "name": "tempest-GroupSnapshotsV319Test-Group-1024054724", "description": null, "group_type": "8cdbc647-60c7-4a66-bacc-567aa8cb6165", "volume_types": ["7017cc88-face-4b55-b2a5-632f1e7d9c66"], "group_snapshot_id": null, "source_group_id": null}}'
2022-08-02 17:28:46,026 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=9, connect=None, read=None, redirect=5, status=None)) after connection broken by 'ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3630>, 'Connection to [LB_IP_ADDRESS] timed out. (connect timeout=60)')': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:28:47,956 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=8, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3710>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:28:51,028 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=7, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3b38>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:28:54,100 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=6, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3c18>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:28:57,172 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=5, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c32b0>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:00,244 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=4, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0540f0>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:03,316 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=3, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c054208>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:06,388 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=2, connect=Non
    e, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0542e8>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:09,460 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=1, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c054400>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:12,532 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=0, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c054518>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d
2022-08-02 17:29:18,676 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=9, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c197cc0>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:21,748 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=8, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0544e0>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:24,820 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=7, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3c0c3550>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:27,892 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=6, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd0208>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:30,964 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=5, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd0358>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:34,036 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=4, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd0198>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:37,108 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=3, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd02e8>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/detail
2022-08-02 17:29:40,180 13616 WARNING  [urllib3.connectionpool] Retrying (Retry(total=2, connect=None, read=None, redirect=5, status=None)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbb3bfd0400>: Failed to establish a new connection: [Errno 113] No route to host',)': /v3/626d81ce7cba43eda253d595d40deea4/volumes/de
    tail
2022-08-02 17:29:42,284 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 200 GET http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/volumes/detail 26.671s
2022-08-02 17:29:42,285 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '15', 'x-compute-request-id': 'req-17d0c5fd-2476-4ce7-ae51-44f3cd4fde9f', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-17d0c5fd-2476-4ce7-ae51-44f3cd4fde9f', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/volumes/detail'}
        Body: b'{"volumes": []}'
2022-08-02 17:29:42,362 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 202 POST http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d/action 0.064s
2022-08-02 17:29:42,362 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: {"delete": {"delete-volumes": true}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '0', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-177d0e18-b2ad-4045-92ae-7a2e70e7f741', 'connection': 'close', 'content-type': 'text/html; charset=UTF-8', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d/action'}
        Body: b''
2022-08-02 17:29:42,405 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 200 GET http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d 0.041s
2022-08-02 17:29:42,406 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:42 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '396', 'x-compute-request-id': 'req-09ca511b-7441-455d-b16f-5b8a86deed34', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-09ca511b-7441-455d-b16f-5b8a86deed34', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d'}
        Body: b'{"group": {"id": "2282ec81-0225-4ec2-b1ea-04642fb54c3d", "status": "deleting", "availability_zone": "nova", "created_at": "2022-08-02T14:27:44.000000", "name": "tempest-GroupSnapshotsV319Test-Group-1024054724", "description": null, "group_type": "8cdbc647-60c7-4a66-bacc-567aa8cb6165", "volume_types": ["7017cc88-face-4b55-b2a5-632f1e7d9c66"], "group_snapshot_id": null, "source_group_id": null}}'
2022-08-02 17:29:43,436 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 404 GET http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d 0.023s
2022-08-02 17:29:43,437 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-leng
    th': '108', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-compute-request-id': 'req-ed8133f8-147c-4ab4-b05c-e40bd9839d77', 'x-openstack-request-id': 'req-ed8133f8-147c-4ab4-b05c-e40bd9839d77', 'connection': 'close', 'content-type': 'application/json', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/626d81ce7cba43eda253d595d40deea4/groups/2282ec81-0225-4ec2-b1ea-04642fb54c3d'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Group 2282ec81-0225-4ec2-b1ea-04642fb54c3d could not be found."}}'
2022-08-02 17:29:43,482 13616 INFO     [tempest.lib.common.rest_client] Request (GroupSnapshotsV319Test:_run_cleanups): 202 DELETE http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/group_types/8cdbc647-60c7-4a66-bacc-567aa8cb6165 0.043s
2022-08-02 17:29:43,482 13616 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'Openstack-Api-Version': 'volume 3.19', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:29:43 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '0', 'openstack-api-version': 'volume 3.19', 'vary': 'OpenStack-API-Version', 'x-openstack-request-id': 'req-88080f25-61f6-4d50-b8e4-c3256a6b9aba', 'connection': 'close', 'content-type': 'text/html; charset=UTF-8', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8776/v3/ce8454b5e59c41bcb927b8b94bec96e7/group_types/8cdbc647-60c7-4a66-bacc-567aa8cb6165'}
        Body: b''


setUpClass (tempest.api.volume.test_image_metadata.VolumesImageMetadata)
------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 168, in setUpClass
    raise value.with_traceback(trace)

      File "/usr/local/lib/python3.6/site-packages/tempest/test.py", line 161, in setUpClass
    cls.resource_setup()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_image_metadata.py", line 40, in resource_setup
    cls.volume = cls.create_volume(imageRef=CONF.compute.image_ref)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 131, in create_volume
    volume['id'], wait_until)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 306, in wait_for_volume_resource_status
    resource_name=resource_name, resource_id=resource_id)

    tempest.exceptions.VolumeResourceBuildErrorException: volume e3a09e06-90c2-4c1f-aabe-331dfb44dce9 failed to build and is in ERROR status


tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_attach_detach_volume_to_instance[compute,id-fff42874-7db5-4487-a8e1-ddda5fb5288d,smoke]
-------------------------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 45, in test_attach_detach_volume_to_instance
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server aceb4a28-4bde-4cd9-902f-149913e1bd19 failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T14:30:31Z', 'message': 'No valid host was found. There are not enough hosts available.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py", line 1548, in schedule_and_build_instances\n    host_lists = self._schedule_instances(context, request_specs[0],\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py", line 908, in _schedule_instances\n    host_lists = self.query_client.select_destinations(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/client/query.py", line 41, in select_destinations\n    return self.scheduler_rpcapi.select_destinations(context, spec_obj,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/rpcapi.py", line 160, in select_destinations\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/client.py", line 189, in call\n    result = self.transport._send(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/transport.py", line 123, in _send\n    return self._driver.send(target, ctxt, message,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py", line 689, in send\n    return self._send(target, ctxt, message, wait_for_reply, timeout,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py", line 681, in _send\n    raise result\nnova.exception_Remote.NoValidHost_Remote: No valid host was found. There are not enough hosts available.\nTraceback (most recent call last):\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/server.py", line 241, in inner\n    return func(*args, **kwargs)\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 223, in select_destinations\n    selections = self._select_destinations(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 250, in _select_destinations\n    selections = self._schedule(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 416, in _schedule\n    self._ensure_sufficient_hosts(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 455, in _ensure_sufficient_hosts\n    raise exception.NoValidHost(reason=reason)\n\nnova.exception.NoValidHost: No valid host was found. There are not enough hosts available.\n\n'}. Server boot request ID: req-0c53966d-7690-482a-b28d-58768f9b57ce.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 17:30:28,459 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://controller:5000/v3/auth/tokens 0.505s
2022-08-02 17:30:28,460 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:27 GMT', 'server': 'Apache', 'content-length': '3886', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6eee9325-212b-4701-b116-46edef452a95', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "2e87805015674464a5a9c4848f519d24", "name": "tempest-VolumesActionsTest-214620015-project", "password_expires_at": null}, "audit_ids": ["ksBgSF6DRnOcag7UJP5kjw"], "expires_at": "2022-08-03T14:30:28.000000Z", "issued_at": "2022-08-02T14:30:28.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "ce8cc2eaca0f48648733ea361b4d4475", "name": "tempest-VolumesActionsTest-214620015"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ce8cc
    2eaca0f48648733ea361b4d4475", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 17:30:28,460 13618 DEBUG    [tempest.lib.common.dynamic_creds] Creating new dynamic creds for scope: None and credential_type: admin
2022-08-02 17:30:28,566 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/projects 0.104s
2022-08-02 17:30:28,566 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"project": {"description": "tempest-VolumesActionsTest-1392397911-desc", "domain_id": "default", "name": "tempest-VolumesActionsTest-1392397911"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:28 GMT', 'server': 'Apache', 'content-length': '373', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-55b1386c-8b2c-42d8-b585-4c611d8a1f73', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects'}
        Body: b'{"project": {"id": "801f06321bbe4d7c891950001755fd9c", "name": "tempest-VolumesActionsTest-1392397911", "domain_id": "default", "description": "tempest-VolumesActionsTest-1392397911-desc", "enabled": true, "parent_id": "default", "is_domain": false, "tags": [], "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c"}}}\n'
2022-08-02 17:30:29,149 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 201 POST http://[LB_IP_ADDRESS]:35357/v3/users 0.582s
2022-08-02 17:30:29,150 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"user": {"name": "tempest-VolumesActionsTest-1392397911-project-admin", "password": "W5+%s=VRIRiCBsh", "domain_id": "default"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:28 GMT', 'server': 'Apache', 'content-length': '293', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-83fe1498-f7a8-46da-97d7-4112d46d761b', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/users'}
        Body: b'{"user": {"id": "185c37e624474ad590eaf91ded4cb528", "name": "tempest-VolumesActionsTest-1392397911-project-admin", "domain_id": "default", "enabled": true, "password_expires_at": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/users/185c37e624474ad590eaf91ded4cb528"}}}\n'
2022-08-02 17:30:29,185 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.034s
2022-08-02 17:30:29,185 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-13319494-b6b9-44d3-8df5-06cd1da74246', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/ro
    les/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 17:30:29,299 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c 0.112s
2022-08-02 17:30:29,299 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-92e05a2b-9757-4c71-a1fa-725a8b12849b', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 17:30:29,393 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.093s
2022-08-02 17:30:29,394 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-dfecb5e3-5f78-4aff-b7ef-9c85f7be1330', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 17:30:29,448 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c 0.052s
2022-08-02 17:30:29,448 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-r
    equest-id': 'req-d26f45df-37ab-469e-a2cb-8fd8958e9338', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/domains/default/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 17:30:29,538 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.089s
2022-08-02 17:30:29,539 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-78ac8c18-79c5-4584-80e4-dc90be848f10', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 17:30:29,574 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c 0.034s
2022-08-02 17:30:29,575 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-f1af675a-6893-476e-a20b-2eebbc3db83d', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 17:30:29,665 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:35357/v3/roles 0.089s
2022-08-02 17:30:29,666 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'content-length': '991', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-27fd8628-8ab1-480a-9566-522dfe7bc93e', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/roles'}
        Body: b'{"roles": [{"id": "35861c0898b84fcb8026f2340915128e", "name": "_member_", "domain_id": null, "description": null, "options": {}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/35861c0898b84fcb8026f2340915128e"}}, {"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/r
    oles/96215fdb7dc64c66853ae340e4e1bbee"}}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/b92be1244ec44ced8f7b29792e37b29c"}}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member", "domain_id": null, "description": null, "options": {"immutable": true}, "links": {"self": "http://[LB_IP_ADDRESS]:35357/v3/roles/c10a32a4f8a54319a5967e1f1d6a3fb3"}}], "links": {"next": null, "self": "http://[LB_IP_ADDRESS]:35357/v3/roles", "previous": null}}\n'
2022-08-02 17:30:29,748 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 PUT http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c 0.081s
2022-08-02 17:30:29,748 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-11e68a8c-9789-46fb-aecd-b7be41ce6d6b', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:35357/v3/projects/801f06321bbe4d7c891950001755fd9c/users/185c37e624474ad590eaf91ded4cb528/roles/b92be1244ec44ced8f7b29792e37b29c'}
        Body: b''
2022-08-02 17:30:29,749 13618 INFO     [tempest.lib.common.dynamic_creds] Dynamic test user 185c37e624474ad590eaf91ded4cb528 is created with scope project and roles: ['admin', 'admin']
2022-08-02 17:30:29,749 13618 INFO     [tempest.lib.common.dynamic_creds] Acquired dynamic creds:
 credentials: Credentials: {'domain_id': 'default', 'domain_name': 'Default', 'username': 'tempest-VolumesActionsTest-1392397911-project-admin', 'project_domain_id': 'default', 'project_domain_name': 'Default', 'project_id': '801f06321bbe4d7c891950001755fd9c', 'project_name': 'tempest-VolumesActionsTest-1392397911', 'tenant_id': '801f06321bbe4d7c891950001755fd9c', 'tenant_name': 'tempest-VolumesActionsTest-1392397911', 'user_domain_id': 'default', 'user_domain_name': 'Default', 'user_id': '185c37e624474ad590eaf91ded4cb528', 'system': None}, Network: None, Subnet: None, Router: None
2022-08-02 17:30:29,758 13618 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_attach_detach_volume_to_instance) Found network None available for tenant
2022-08-02 17:30:30,834 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 1.075s
2022-08-02 17:30:30,835 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-1207811047", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:29 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-0c53966d-7690-482a-b28d-58768f9b57ce', 'x-compute-request-id': 'req-0c53966d-7690-482a-b28d-58768f9b57ce', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "aceb4a28-4bde-4cd9-902f-149913e1bd19", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}
    ], "adminPass": "puM6kd54kcLy"}}'
2022-08-02 17:30:31,101 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19 0.261s
2022-08-02 17:30:31,102 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:30 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-ca7f9c20-af6a-48da-b3bc-abc6abc93fcb', 'x-compute-request-id': 'req-ca7f9c20-af6a-48da-b3bc-abc6abc93fcb', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19'}
        Body: b'{"server": {"id": "aceb4a28-4bde-4cd9-902f-149913e1bd19", "name": "tempest-VolumesActionsTest-instance-1207811047", "status": "BUILD", "tenant_id": "ce8cc2eaca0f48648733ea361b4d4475", "user_id": "2e87805015674464a5a9c4848f519d24", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T14:30:30Z", "updated": "2022-08-02T14:30:30Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 17:30:32,485 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19 0.369s
2022-08-02 17:30:32,486 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '3916', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-a3611d31-1827-48e0-a919-94539669981e', 'x-compute-request-id': 'req-a3611d31-1827-48e0-a919-94539669981e', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19'}
        Body: b'{"server": {"id": "aceb4a28-4bde-4cd9-902f-149913e1bd19", "name": "tempest-VolumesActionsTest-instance-1207811047", "status": "ERROR", "tenant_id": "ce8cc2eaca0f48648733ea361b4d4475", "user_id": "2e87805015674464a5a9c4848f519d24", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T14:30:30Z", "updated": "2022-08-02T14:30:31Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links
    ": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T14:30:31Z", "message": "No valid host was found. There are not enough hosts available.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py\\", line 1548, in schedule_and_build_instances\\n    host_lists = self._schedule_instances(context, request_specs[0],\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py\\", line 908, in _schedule_instances\\n    host_lists = self.query_client.select_destinations(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/client/query.py\\", line 41, in select_destinations\\n    return self.scheduler_rpcapi.select_destinations(context, spec_obj,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/rpcapi.py\\", line 160, in select_destinations\\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/client.py\\", line 189, in call\\n    result = self.transport._send(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/transport.py\\", line 123, in _send\\n    return self._driver.send(target, ctxt, message,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py\\", line 689, in send\\n    return self._send(target, ctxt, message, wait_for_reply, timeout,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py\\", line 681, in _send\\n    raise result\\nnova.exception_Remote.NoValidHost_Remote: No valid host was found. There are not enough hosts available.\\nTraceback (most recent call last):\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/server.py\\", line 241, in inner\\n    return func(*args, **kwargs)\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 223, in select_destinations\\n    selections = self._select_destinations(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 250, in _select_destinations\\n    selections = self._schedule(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 416, in _schedule\\n    self._ensure_sufficient_hosts(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 455, in _ensure_sufficient_hosts\\n    raise exception.NoValidHost(reason=reason)\\n\\nnova.exception.NoValidHost: No valid host was found. There are not enough hosts available.\\n\\n"}, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "instance-00000001", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": null, "OS-EXT-STS:vm_state": "error", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 17:30:32,496 13618 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 1 second wait
2022-08-02 17:30:32,974 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19 0.477s
2022-08-02 17:30:32,974 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack
    -API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-33b8315b-d88b-4b9f-8052-5f26e5321a78', 'x-compute-request-id': 'req-33b8315b-d88b-4b9f-8052-5f26e5321a78', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19'}
        Body: b''
2022-08-02 17:30:33,040 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_attach_detach_volume_to_instance): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19 0.065s
2022-08-02 17:30:33,041 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:32 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-a285125b-67b1-45fc-bdff-1ce53a24b4fd', 'x-compute-request-id': 'req-a285125b-67b1-45fc-bdff-1ce53a24b4fd', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/aceb4a28-4bde-4cd9-902f-149913e1bd19'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance aceb4a28-4bde-4cd9-902f-149913e1bd19 could not be found."}}'


tempest.api.volume.test_volumes_actions.VolumesActionsTest.test_get_volume_attachment[compute,id-9516a2c8-9135-488c-8dd6-5677a7e5f371]
--------------------------------------------------------------------------------------------------------------------------------------

Captured traceback:
~~~~~~~~~~~~~~~~~~~
    Traceback (most recent call last):

      File "/usr/local/lib/python3.6/site-packages/tempest/common/utils/__init__.py", line 70, in wrapper
    return f(*func_args, **func_kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/test_volumes_actions.py", line 81, in test_get_volume_attachment
    server = self.create_server()

      File "/usr/local/lib/python3.6/site-packages/tempest/api/volume/base.py", line 208, in create_server
    **kwargs)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 354, in create_test_server
    server['id'])

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 227, in __exit__
    self.force_reraise()

      File "/usr/local/lib/python3.6/site-packages/oslo_utils/excutils.py", line 200, in force_reraise
    raise self.value

      File "/usr/local/lib/python3.6/site-packages/tempest/common/compute.py", line 321, in create_test_server
    request_id=request_id)

      File "/usr/local/lib/python3.6/site-packages/tempest/common/waiters.py", line 81, in wait_for_server_status
    raise exceptions.BuildErrorException(details, server_id=server_id)

    tempest.exceptions.BuildErrorException: Server f781ee2c-1017-497b-8bc3-5af45ad39b6b failed to build and is in ERROR status
Details: Fault: {'code': 500, 'created': '2022-08-02T14:30:34Z', 'message': 'No valid host was found. There are not enough hosts available.', 'details': 'Traceback (most recent call last):\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py", line 1548, in schedule_and_build_instances\n    host_lists = self._schedule_instances(context, request_specs[0],\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py", line 908, in _schedule_instances\n    host_lists = self.query_client.select_destinations(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/client/query.py", line 41, in select_destinations\n    return self.scheduler_rpcapi.select_destinations(context, spec_obj,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/rpcapi.py", line 160, in select_destinations\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/client.py", line 189, in call\n    result = self.transport._send(\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/transport.py", line 123, in _send\n    return self._driver.send(target, ctxt, message,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py", line 689, in send\n    return self._send(target, ctxt, message, wait_for_reply, timeout,\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py", line 681, in _send\n    raise result\nnova.exception_Remote.NoValidHost_Remote: No valid host was found. There are not enough hosts available.\nTraceback (most recent call last):\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/server.py", line 241, in inner\n    return func(*args, **kwargs)\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 223, in select_destinations\n    selections = self._select_destinations(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 250, in _select_destinations\n    selections = self._schedule(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 416, in _schedule\n    self._ensure_sufficient_hosts(\n\n  File "/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py", line 455, in _ensure_sufficient_hosts\n    raise exception.NoValidHost(reason=reason)\n\nnova.exception.NoValidHost: No valid host was found. There are not enough hosts available.\n\n'}. Server boot request ID: req-d72930f1-33c5-4c50-bacf-53e5490cd20e.


Captured pythonlogging:
~~~~~~~~~~~~~~~~~~~~~~~
    2022-08-02 17:30:33,618 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 201 POST http://controller:5000/v3/auth/tokens 0.563s
2022-08-02 17:30:33,618 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json'}
        Body: <omitted>
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:33 GMT', 'server': 'Apache', 'content-length': '3886', 'x-subject-token': '<omitted>', 'vary': 'X-Auth-Token', 'x-openstack-request-id': 'req-6a758ecd-c3f4-4a5b-8fcb-e53324dff45d', 'connection': 'close', 'content-type': 'application/json', 'status': '201', 'content-location': 'http://controller:5000/v3/auth/tokens'}
        Body: b'{"token": {"methods": ["password"], "user": {"domain": {"id": "default", "name": "Default"}, "id": "2e87805015674464a5a9c4848f519d24", "name": "tempest-VolumesActionsTest-214620015-project", "password_expires_at": null}, "audit_ids": ["py0OiegKRFK7AGfBN8sDdA"], "expires_at": "2022-08-03T14:30:33.000000Z", "issued_at": "2022-08-02T14:30:33.000000Z", "project": {"domain": {"id": "default", "name": "Default"}, "id": "ce8cc2eaca0f48648733ea361b4d4475", "name": "tempest-VolumesActionsTest-214620015"}, "is_domain": false, "roles": [{"id": "96215fdb7dc64c66853ae340e4e1bbee", "name": "reader"}, {"id": "b92be1244ec44ced8f7b29792e37b29c", "name": "admin"}, {"id": "c10a32a4f8a54319a5967e1f1d6a3fb3", "name": "member"}], "catalog": [{"endpoints": [{"id": "2573ec8637884f699bb8ed9b3e812834", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}, {"id": "f30c35c99c7a4d0cb93de2e449216df3", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2.1", "region": "RegionOne"}], "id": "2dfaaa6289594a59a21af64b82409748", "type": "compute", "name": "nova"}, {"endpoints": [{"id": "200e31520f8e4b43ba170ad8ad10c326", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}, {"id": "5ff572e0434e41b2874ef31f59512a50", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9696", "region": "RegionOne"}], "id": "41bd9392edc24a5a807357ca3d32f9df", "type": "network", "name": "neutron"}, {"endpoints": [{"id": "5ce526a93e754a86aca9dfa32488315a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}, {"id": "6bfef8334e624bf79a68e772baf935ab", "interface": "admin", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:35357", "region": "RegionOne"}, {"id": "82af88c346b64c188642b601ab6b3200", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:5000", "region": "RegionOne"}], "id": "51fd01d218634df0b6183bc005e9aa76", "type": "identity", "name": "keystone"}, {"endpoints": [{"id": "40070d3b68ae4835a7519d549bd4a04f", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}, {"id": "4f3f869be4df46a38e0ecfc74a22275a", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:9292", "region": "RegionOne"}], "id": "705ce7c2e88a4cd8af1f14bafd5146fa", "type": "image", "name": "glance"}, {"endpoints": [{"id": "670194eee39e4d79ac5ff73786bc25a9", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}, {"id": "b881710677da40d49cc457366924409f", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8776/v3/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}], "id": "7c70b3378d2143ceb9d484efac41814a", "type": "volumev3", "name": "cinderv3"}, {"endpoints": [{"id": "207eb9d98de340309d33a7322ccbe5ce", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ce8cc2eaca0f48648733ea361b4d4475", "region": "RegionOne"}, {"id": "4790b9735beb442cadf841a0b2340d89", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8774/v2/ce8cc2eaca0f4864
    8733ea361b4d4475", "region": "RegionOne"}], "id": "a72baa1e718a4231a650b0e0303ebdcb", "type": "compute_legacy", "name": "nova_legacy"}, {"endpoints": [{"id": "5436e7e2682f44799f85f3fac5a5f25a", "interface": "public", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}, {"id": "9bc3c58d06624fa0bb576d21d054b9fa", "interface": "internal", "region_id": "RegionOne", "url": "http://[LB_IP_ADDRESS]:8780", "region": "RegionOne"}], "id": "d7f3c26d17514c839c06f670de9a53c1", "type": "placement", "name": "placement"}]}}'
2022-08-02 17:30:33,629 13618 INFO     [tempest.lib.common.fixed_network] (VolumesActionsTest:test_get_volume_attachment) Found network None available for tenant
2022-08-02 17:30:33,853 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 202 POST http://[LB_IP_ADDRESS]:8774/v2.1/servers 0.223s
2022-08-02 17:30:33,854 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: {"server": {"name": "tempest-VolumesActionsTest-instance-1968122786", "imageRef": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "flavorRef": "0"}}
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:33 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '380', 'location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-d72930f1-33c5-4c50-bacf-53e5490cd20e', 'x-compute-request-id': 'req-d72930f1-33c5-4c50-bacf-53e5490cd20e', 'connection': 'close', 'content-type': 'application/json', 'status': '202', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers'}
        Body: b'{"server": {"id": "f781ee2c-1017-497b-8bc3-5af45ad39b6b", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}], "OS-DCF:diskConfig": "MANUAL", "security_groups": [{"name": "default"}], "adminPass": "rmrxRobVP9Mn"}}'
2022-08-02 17:30:33,940 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b 0.081s
2022-08-02 17:30:33,941 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:33 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '1322', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-b8f76061-9a67-4908-a84b-40d8e59e5f30', 'x-compute-request-id': 'req-b8f76061-9a67-4908-a84b-40d8e59e5f30', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b'}
        Body: b'{"server": {"id": "f781ee2c-1017-497b-8bc3-5af45ad39b6b", "name": "tempest-VolumesActionsTest-instance-1968122786", "status": "BUILD", "tenant_id": "ce8cc2eaca0f48648733ea361b4d4475", "user_id": "2e87805015674464a5a9c4848f519d24", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T14:30:33Z", "updated": "2022-08-02T14:30:33Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}, {"rel": "bookmark", "href
    ": "http://[LB_IP_ADDRESS]:8774/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}], "OS-DCF:diskConfig": "MANUAL", "progress": 0, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": "scheduling", "OS-EXT-STS:vm_state": "building", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 17:30:35,047 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 200 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b 0.093s
2022-08-02 17:30:35,048 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:34 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '3916', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-235dab19-e034-4f4e-83aa-b9b6235b4161', 'x-compute-request-id': 'req-235dab19-e034-4f4e-83aa-b9b6235b4161', 'connection': 'close', 'content-type': 'application/json', 'status': '200', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b'}
        Body: b'{"server": {"id": "f781ee2c-1017-497b-8bc3-5af45ad39b6b", "name": "tempest-VolumesActionsTest-instance-1968122786", "status": "ERROR", "tenant_id": "ce8cc2eaca0f48648733ea361b4d4475", "user_id": "2e87805015674464a5a9c4848f519d24", "metadata": {}, "hostId": "", "image": {"id": "47ba6e9c-0cd1-4e7c-bb96-2b780d326b22", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/images/47ba6e9c-0cd1-4e7c-bb96-2b780d326b22"}]}, "flavor": {"id": "0", "links": [{"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/flavors/0"}]}, "created": "2022-08-02T14:30:33Z", "updated": "2022-08-02T14:30:34Z", "addresses": {}, "accessIPv4": "", "accessIPv6": "", "links": [{"rel": "self", "href": "http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}, {"rel": "bookmark", "href": "http://[LB_IP_ADDRESS]:8774/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b"}], "OS-DCF:diskConfig": "MANUAL", "fault": {"code": 500, "created": "2022-08-02T14:30:34Z", "message": "No valid host was found. There are not enough hosts available.", "details": "Traceback (most recent call last):\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py\\", line 1548, in schedule_and_build_instances\\n    host_lists = self._schedule_instances(context, request_specs[0],\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/conductor/manager.py\\", line 908, in _schedule_instances\\n    host_lists = self.query_client.select_destinations(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/client/query.py\\", line 41, in select_destinations\\n    return self.scheduler_rpcapi.select_destinations(context, spec_obj,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/rpcapi.py\\", line 160, in select_destinations\\n    return cctxt.call(ctxt, \'select_destinations\', **msg_args)\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/client.py\\", line 189, in call\\n    result = self.transport._send(\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/transport.py\\", line 123, in _send\\n    return self._driver.send(target, ctxt, message,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py\\", line 689, in send\\n    return self._send(target, ctxt, message, wait_for_reply, timeout,\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/_drivers/amqpdriver.py\\", line 681, in _send\\n    raise result\\nnova.exception_Remote.NoValidHo
    st_Remote: No valid host was found. There are not enough hosts available.\\nTraceback (most recent call last):\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/oslo_messaging/rpc/server.py\\", line 241, in inner\\n    return func(*args, **kwargs)\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 223, in select_destinations\\n    selections = self._select_destinations(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 250, in _select_destinations\\n    selections = self._schedule(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 416, in _schedule\\n    self._ensure_sufficient_hosts(\\n\\n  File \\"/var/lib/kolla/venv/lib/python3.8/site-packages/nova/scheduler/manager.py\\", line 455, in _ensure_sufficient_hosts\\n    raise exception.NoValidHost(reason=reason)\\n\\nnova.exception.NoValidHost: No valid host was found. There are not enough hosts available.\\n\\n"}, "OS-EXT-AZ:availability_zone": "", "config_drive": "", "key_name": null, "OS-SRV-USG:launched_at": null, "OS-SRV-USG:terminated_at": null, "OS-EXT-SRV-ATTR:host": null, "OS-EXT-SRV-ATTR:instance_name": "instance-00000002", "OS-EXT-SRV-ATTR:hypervisor_hostname": null, "OS-EXT-STS:task_state": null, "OS-EXT-STS:vm_state": "error", "OS-EXT-STS:power_state": 0, "os-extended-volumes:volumes_attached": []}}'
2022-08-02 17:30:35,059 13618 INFO     [tempest.common.waiters] State transition "BUILD/scheduling" ==> "ERROR/None" after 2 second wait
2022-08-02 17:30:35,308 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 204 DELETE http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b 0.248s
2022-08-02 17:30:35,308 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:35 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7518c720-af51-4508-a211-75ff1332f810', 'x-compute-request-id': 'req-7518c720-af51-4508-a211-75ff1332f810', 'connection': 'close', 'status': '204', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b'}
        Body: b''
2022-08-02 17:30:35,343 13618 INFO     [tempest.lib.common.rest_client] Request (VolumesActionsTest:test_get_volume_attachment): 404 GET http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b 0.033s
2022-08-02 17:30:35,343 13618 DEBUG    [tempest.lib.common.rest_client] Request - Headers: {'Content-Type': 'application/json', 'Accept': 'application/json', 'X-Auth-Token': '<omitted>'}
        Body: None
    Response - Headers: {'date': 'Tue, 02 Aug 2022 14:30:35 GMT', 'server': 'Apache/2.4.41 (Ubuntu)', 'content-length': '111', 'openstack-api-version': 'compute 2.1', 'x-openstack-nova-api-version': '2.1', 'vary': 'OpenStack-API-Version,X-OpenStack-Nova-API-Version', 'x-openstack-request-id': 'req-7deaf436-fadb-4ff1-b2df-5dd477c2a94f', 'x-compute-request-id': 'req-7deaf436-fadb-4ff1-b2df-5dd477c2a94f', 'connection': 'close', 'content-type': 'application/json; charset=UTF-8', 'status': '404', 'content-location': 'http://[LB_IP_ADDRESS]:8774/v2.1/servers/f781ee2c-1017-497b-8bc3-5af45ad39b6b'}
        Body: b'{"itemNotFound": {"code": 404, "message": "Instance f781ee2c-1017-497b-8bc3-5af45ad39b6b could not be found."}}'



======
Totals
======
Ran: 211 tests in 541.1835 sec.
 - Passed: 199
 - Skipped: 6
 - Expected Fail: 0
 - Unexpected Success: 0
 - Failed: 6
Sum of execute time for each test: 666.9141 sec.

==============
Worker Balance
==============
 - Worker 0 (80 tests) => 0:08:58.738067
 - Worker 1 (39 tests) => 0:02:37.316534
 - Worker 2 (92 tests) => 0:06:59.299306
